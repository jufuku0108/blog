<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Japan Azure Identity Support Blog</title>
  
  <subtitle>日本マイクロソフトの Azure Active Directory と AD FS に関するサポート情報のブログです。</subtitle>
  <link href="https://jpazureid.github.io/blog/atom.xml" rel="self"/>
  
  <link href="https://jpazureid.github.io/blog/"/>
  <updated>2022-01-31T04:07:17.279Z</updated>
  <id>https://jpazureid.github.io/blog/</id>
  
  <author>
    <name>Azure Identity Support Japan</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>アプリでゼロ トラスト対応を実現する 2 - 最小限の特権で設計する</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory/achieving-zero-trust-readiness-in-your-apps-2-designing-for-least-privilege/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory/achieving-zero-trust-readiness-in-your-apps-2-designing-for-least-privilege/</id>
    <published>2022-01-24T00:00:00.000Z</published>
    <updated>2022-01-31T04:07:17.279Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Azure Identity サポート チームの竜です。</p><p>本記事は、2022 年 1 月 18 日に米国の Azure Active Directory Identity Blog で公開された <a href="https://techcommunity.microsoft.com/t5/azure-active-directory-identity/achieving-zero-trust-readiness-in-your-apps-2-designing-for/ba-p/2959986">Achieving Zero Trust readiness in your apps #2: Designing for Least Privilege</a> を意訳したものになります。</p><hr><p>こんにちは、Jeff Sakowicz です。Microsoft Identity チームで、Application Platform Security の Principal Program Management Lead をしています。私たちのチームの目標は、安全で信頼性が高く、発展的なアプリのエコシステムを作っていくことです。この目標を達成する一環として、アプリがゼロ トラストのセキュリティ モデルをサポートできるようにすることがあげられます。</p><p>前回に続き、今回は「なぜ開発者にとってゼロ トラストが重要なのか」についての二つ目の記事となります。<a href="https://jpazureid.github.io/blog/azure-active-directory/Achieving-ZeroTrust-readiness-in-your-apps1-Why-it-matters/">前回</a> は、<a href="https://www.microsoft.com/ja-jp/security/business/zero-trust?rtc=1">ゼロ トラスト</a> の原則およびゼロ トラストが ID とアクセス管理にどのように適用されるかをご紹介しました。今回は、Microsoft の ID プラットフォームにおいて、「<strong>最小限の特権アクセスの原則</strong>を使用してアプリケーションを設計する方法」についてご説明します。</p><h2 id="なぜ最小特権アクセスの使用にこだわる必要があるのでしょうか？"><a href="#なぜ最小特権アクセスの使用にこだわる必要があるのでしょうか？" class="headerlink" title="なぜ最小特権アクセスの使用にこだわる必要があるのでしょうか？"></a>なぜ最小特権アクセスの使用にこだわる必要があるのでしょうか？</h2><p>端的に言うと、アプリケーションの許可を制限することで、攻撃された場合に影響を受ける範囲を減らし、アプリを利用する顧客を増やすことができるからます。実際のところ、IT 管理者はアプリから要求される権限を確認する際やアプリに権限を付与するかどうかを決定する際に、以前より厳しく精査を行うようになっています。たくさんの権限を要求するアプリを作成した場合、アプリが承認される可能性が低くなり、時にはアプリの利用が完全に拒否される場合もあります。</p><h2 id="過剰な特権とは何でしょうか？過剰な特権が与えられているアプリとはどんなものでしょうか？"><a href="#過剰な特権とは何でしょうか？過剰な特権が与えられているアプリとはどんなものでしょうか？" class="headerlink" title="過剰な特権とは何でしょうか？過剰な特権が与えられているアプリとはどんなものでしょうか？"></a>過剰な特権とは何でしょうか？過剰な特権が与えられているアプリとはどんなものでしょうか？</h2><p>ある主体が必要以上の特権を要求し、場合によってはそのアクセス許可が付与されることを、私たちは「過剰な特権」と呼んでいます。この記事では、Microsoft Graph API を呼び出すクライアント アプリのシナリオを例に、Microsoft ID プラットフォーム上で使用される OAuth 2.0 のアクセス許可において「過剰な権限が与えられているアプリ」に特に着目して説明します。この記事に記載されている原則は、他のアクセス許可のモデルや API にも適用可能なため、より詳細については今後の記事でも説明していく予定です。</p><p>過剰な特権は、アプリが「<strong>未使用の</strong>」または「<strong>削減可能な</strong>」アクセス許可を要求し、そのアクセス許可を付与された場合に発生します。</p><ol><li>「<strong>未使用のアクセス許可</strong>」とは、目的の作業には全く必要のないアクセス許可を指します。例えば、カレンダー アプリが、”Files.ReadWrite.All” アクセス許可を取得しているにもかかわらず、Files API を利用していない場合は、<strong>未使用の</strong>アクセス許可が存在することになります。</li><li>「<strong>削減可能なアクセス許可</strong>」とは、必要な作業を実行するためのアクセスを満たす、より低い特権を持つアクセス許可を指します。例えば、サインインしたユーザーの OneDrive からファイルを読み込む必要があるが、新しいファイルの作成や既存のファイルの変更は必要としないアプリを考えてみましょう。このアプリが “Files.ReadWrite.All” アクセス許可を要求し付与された場合は、アプリは削減可能なアクセス許可を持つことになります。このアプリは 、”Files.ReadWrite.All” ではなく、”Files.Read.All” を要求することが適切です。</li></ol><h2 id="過剰な特権が付与されているアプリに対応するうえでの最終的な目標は何でしょうか？"><a href="#過剰な特権が付与されているアプリに対応するうえでの最終的な目標は何でしょうか？" class="headerlink" title="過剰な特権が付与されているアプリに対応するうえでの最終的な目標は何でしょうか？"></a>過剰な特権が付与されているアプリに対応するうえでの最終的な目標は何でしょうか？</h2><p>MMicrosoft ID チームは、過剰な特権を付与されているアプリへの対応を進めるために、3 つの主要な目標を掲げています。</p><ol><li><strong>開発者</strong>が、過剰なアクセス許可を要求せず、スムーズに採用されるような信頼できるアプリを構築できるように支援します。不必要な権限を要求すると、アプリが利用される環境において、ユーザーおよび IT 部門、さらには組織で設定された <a href="https://docs.microsoft.com/ja-jp/azure/active-directory/manage-apps/configure-user-consent?tabs=azure-portal">アプリの同意ポリシー</a> の間で不和が生じます。</li><li><strong>IT 管理者やその他の意思決定者</strong>が過剰な特権を持つアプリを制限できるよう、組織内で必要な最小限のアクセス許可を特定する方法や、最小限のアクセス許可を要求および付与する方法について支援します。</li><li>侵害の範囲を拡大したり、組織内での別マシンへのさらなる乗っ取を防止したりするような特権を<strong>攻撃者</strong>が取得できないように防止します。</li></ol><h2 id="アプリを確実に最小特権化するにはどうすれば良いのでしょうか？"><a href="#アプリを確実に最小特権化するにはどうすれば良いのでしょうか？" class="headerlink" title="アプリを確実に最小特権化するにはどうすれば良いのでしょうか？"></a>アプリを確実に最小特権化するにはどうすれば良いのでしょうか？</h2><p>ここでは、開発者と IT 管理者が、「アプリケーションの最小特権の原則を遵守すること」を考える際に、念頭に置くべき 3 つのベスト プラクティスをざっくりとご紹介します。</p><ol><li>未使用のアクセス許可や削減可能なアクセス許可を避け、過剰な特権を<strong>防止</strong>しましょう。アプリケーションが API の呼び出しに必要とするアクセス許可を確認し、お客様のシナリオを実現するために必要なものだけを要求しましょう。</li><li>お手持ちのアプリに対して既に付与されたアクセス許可を定期的に<strong>監査</strong>し、アクセス許可を削減もしくは削除できないか確認しましょう。つまり、IT 管理者においてはテナント内のアプリに付与されたアクセス許可を監査し、開発者はアプリが要求しているアクセス許可を確認しましょう。</li><li>アプリを<strong>アップデート</strong>して、未使用のアクセス許可や削減可能なアクセス許可を要求しないようにし、また以前付与されたアクセス許可の中でも不要になったものを取り消しましょう。</li></ol><p>マイクロソフトは、このプロセスを支援するツールを用意しています。例えば、<a href="https://developer.microsoft.com/ja-jp/graph/graph-explorer">Graph Explorer</a> を使用することで、お客様のシナリオを実現するためにどのような Microsoft Graph API の呼び出しが必要か確認いただけます。その後、Microsoft Graph の<a href="https://docs.microsoft.com/ja-jp/graph/permissions-reference">アクセス許可のリファレンス</a> を使用し、Microsoft Graph の最小限の特権から最大限の特権の中で、適切なアクセス許可を見つけることができます。</p><p>具体的な手順については、こちらの資料をご参照ください: <a href="https://docs.microsoft.com/ja-jp/azure/active-directory/develop/secure-least-privileged-access">最小限の特権の原則でセキュリティを高める</a></p><h2 id="ゼロ-トラストへ対応した開発を始める方法"><a href="#ゼロ-トラストへ対応した開発を始める方法" class="headerlink" title="ゼロ トラストへ対応した開発を始める方法"></a>ゼロ トラストへ対応した開発を始める方法</h2><p>さらに詳しく知りたい方は、<a href="https://docs.microsoft.com/security/zero-trust/">Zero Trust Guidance Center</a> に公開された開発者向けの新しいガイダンスをご覧ください。このガイダンスには、Zero Trust に対応したアプリケーションを開発するための <a href="https://docs.microsoft.com/en-us/security/zero-trust/identity-developer">新しい開発および統合リソース</a> が含まれています。</p><p>詳細については、こちらからダウンロードできる開発者向けホワイトペーパーをご覧ください: <a href="https://aka.ms/ztdev">Zero Trust for the Microsoft Identity developer</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは、Azure Identity サポート チームの竜です。&lt;/p&gt;
&lt;p&gt;本記事は、2022 年 1 月 18 日に米国の Azure Active Directory Identity Blog で公開された &lt;a href=&quot;https://techcommu</summary>
      
    
    
    
    
    <category term="Azure AD" scheme="https://jpazureid.github.io/blog/tags/Azure-AD/"/>
    
    <category term="US Identity Blog" scheme="https://jpazureid.github.io/blog/tags/US-Identity-Blog/"/>
    
  </entry>
  
  <entry>
    <title>External Identities (B2C) が Authenticator アプリに対応するとともにデータ保存場所の価格更新が発表されました</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory/external-identities-b2c-supports-authenticator-apps-and-new-data/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory/external-identities-b2c-supports-authenticator-apps-and-new-data/</id>
    <published>2022-01-22T23:00:00.000Z</published>
    <updated>2022-01-31T04:07:17.391Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Azure Identity サポート チームの 高田 です。</p><p>本記事は、2022 年 1 月 20 日に米国の Azure Active Directory Identity Blog で公開された <a href="https://techcommunity.microsoft.com/t5/azure-active-directory-identity/external-identities-b2c-supports-authenticator-apps-and-new-data/ba-p/2147079">External Identities B2C supports Authenticator apps, and new data residency pricing</a> を意訳したものになります。ご不明点等ございましたらサポート チームまでお問い合わせください。</p><hr><p>皆さん、こんにちは。</p><p>明けましておめでとうございます。新しい年になりましたので、新しい機能を発表したいと思います。本日は、B2C ユーザー向けの時間ベースのワン タイム パスコード (時間に基づいて生成される OTP) による多要素認証 (MFA) のパブリック プレビューと、Azure AD B2C ディレクトリのデータ保存場所のサポートに関する重要な変更など、Azure AD External Identities の 2 つのアップデートについてお知らせします。</p><h2 id="時間ベースの-OTP-で-B2C-ユーザー向けの-MFA-を強化"><a href="#時間ベースの-OTP-で-B2C-ユーザー向けの-MFA-を強化" class="headerlink" title="時間ベースの OTP で B2C ユーザー向けの MFA を強化"></a>時間ベースの OTP で B2C ユーザー向けの MFA を強化</h2><p>詐欺やセキュリティ攻撃の増加により、消費者のアカウントをより安全な MFA の方法で保護することが重要となっています。B2C のユーザー フローに認証アプリを介した時間ベースの OTP を組み込むことで、既存の電子メールや電話の要素に比べて高いレベルのセキュリティを提供でき、電話料金の発生も抑えることが可能となります。<a href="https://techcommunity.microsoft.com/t5/azure-active-directory-identity/it-s-time-to-hang-up-on-phone-transports-for-authentication/ba-p/1751752">アプリベースの MFA がメールや電話の MFA だけよりも安全だといえる</a> 理由については、Alex Weinert の説明をご覧ください。</p><p>お使いのユーザー アカウント用の時間ベースの OTP は、どの認証アプリケーションでも設定できます。弊社では Microsoft Authenticator を利用して時間ベースの OTP を設定することをお勧めしています。Microsoft Authenticator では認証状態の確認を暗号化された双方向通信にて行っており、さらに様々な利用の流れや設定に対応することで、ユーザーが自らセキュリティを高められるようにしています。</p><p><img src="/blog/azure-active-directory/external-identities-b2c-supports-authenticator-apps-and-new-data/microsoft-authenticator-app-images-lined-up-option.jpg"></p><p>この B2C ユーザー フローでは、Contoso という会社の顧客が Microsoft Authenticator アプリケーションで時間ベースの OTP を使用して認証を完了するよう促されています。</p><p>Azure AD B2C で時間ベースの OTP を設定する方法については、<a href="https://docs.microsoft.com/ja-jp/azure/active-directory-b2c/multi-factor-authentication?pivots=b2c-user-flow#verification-methods">こちらのドキュメント</a> をお読みください。</p><h2 id="データ保存場所に関する価格の更新"><a href="#データ保存場所に関する価格の更新" class="headerlink" title="データ保存場所に関する価格の更新"></a>データ保存場所に関する価格の更新</h2><p>弊社では、お客様がデータを管理でき、地域のデータ保存場所の要件に準拠することが非常に重要であることを認識しております。このビジネス クリティカルな要望に対応する最初のステップとして、今年初めに <a href="https://docs.microsoft.com/ja-jp/azure/active-directory-b2c/data-residency">Azure AD B2C のデータをオーストラリアで保持する機能の一般提供</a> を発表しました。この機能に対する需要の増加に対応するため、2022 年半ばより、オーストラリアやその他の特定の国/地域向けにデータ保存場所を設定した既存および新規のお客様には、月間アクティブ ユーザー (MAU) あたり 0.02 ドルの追加料金が発生するようになります。</p><p><img src="/blog/azure-active-directory/external-identities-b2c-supports-authenticator-apps-and-new-data/b2c-go-local-australia.jpg"></p><p>お客様からのフィードバックに基づき、お客様がデータ保存の要件を満たすために必要な国や地域を選択できるよう、データ保存場所の提供を拡大し続けてまいります。</p><p>これらのアップデートに関するご意見は、Azure フォーラムまたは Twitter で <a href="https://twitter.com/azuread">@AzureAD</a> のタグを付けてお寄せください。</p><p>Robin Goldstein<br>Twitter: <a href="https://twitter.com/RobinGo_MS">@RobinGo_MS</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは、Azure Identity サポート チームの 高田 です。&lt;/p&gt;
&lt;p&gt;本記事は、2022 年 1 月 20 日に米国の Azure Active Directory Identity Blog で公開された &lt;a href=&quot;https://techco</summary>
      
    
    
    
    
    <category term="Azure AD" scheme="https://jpazureid.github.io/blog/tags/Azure-AD/"/>
    
    <category term="US Identity Blog" scheme="https://jpazureid.github.io/blog/tags/US-Identity-Blog/"/>
    
  </entry>
  
  <entry>
    <title>Azure AD における継続的なアクセス評価の一般提供を開始しました</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory/continuous-access-evaluation-in-azure-ad-is-now-generally/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory/continuous-access-evaluation-in-azure-ad-is-now-generally/</id>
    <published>2022-01-22T16:00:00.000Z</published>
    <updated>2022-01-31T04:07:17.367Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Azure Identity サポート チームの 村上 です。</p><p>本記事は、2022 年 1 月 10 日に米国の Azure Active Directory Identity Blog で公開された <a href="https://techcommunity.microsoft.com/t5/azure-active-directory-identity/continuous-access-evaluation-in-azure-ad-is-now-generally/ba-p/2464398">Continuous Access Evaluation in Azure AD is now generally available!</a> を意訳したものになります。ご不明点等ございましたらサポート チームまでお問い合わせください。</p><hr><p>皆さん、こんにちは。</p><p>Azure AD のゼロ トラスト セッション管理ポートフォリオの一部として、継続的アクセス評価 (Continuous Access Evaluation、以下 CAE) の一般提供 (GA) を発表できることを嬉しく思います。</p><p>CAE は、以下を含めたアカウントのライフサイクルにおいて発生するイベントとポリシーにリアルタイムに対応します。 </p><ul><li>アカウントの取り消し</li><li>アカウントの無効化/削除</li><li>パスワードの変更</li><li>ユーザーの場所の変更</li><li>ユーザー リスクの増大</li></ul><p>上記のようなイベントを受け取ると、アプリのセッションは直ちに中断され、ユーザーは Azure AD にリダイレクトされ、再認証やポリシーの再評価が行われます。CAE では、ゼロ トラストの原則 (Verify Explicitly: 明示的な確認と Assume Breach: 攻撃者が既に自社の IT 環境に潜伏していると想定) を基盤に、ゼロ トラスト認証セッション管理という新しい概念を導入しました。ゼロ トラストのアプローチでは、認証セッションの持続時間は事前に定義された期間ではなく、セッションの完全性に依存します。この仕組みは、<a href="https://openid.net/wg/sse/">Shared Signals and Events</a> と呼ばれる業界の取り組みと一致しており、私たちはこのグループの中で、一般公開に耐える継続的アクセスの実装を行った最初の企業であることを誇りに思います。</p><p>CAE の一般公開に伴い、すべてのテナントにおいて本機能を自動で有効にしました。Azure AD Premium 1 ライセンスをご利用のお客様は、<a href="https://docs.microsoft.com/ja-jp/azure/active-directory/conditional-access/concept-conditional-access-session#customize-continuous-access-evaluation">条件付きアクセスのセッション ブレード</a> で設定を変更したり、CAE を無効にすることができます。</p><p><img src="/blog/azure-active-directory/continuous-access-evaluation-in-azure-ad-is-now-generally/Image01.png"></p><p>この一般提供により、ポリシーのリアルタイムな適用が可能となり、これによりセッションの持続時間を安全に延長できるため、より安全で耐障害性の高い運用が可能になります。万が一、Azure AD が停止した場合でも、CAE セッションを使用しているユーザーは、影響を受けることなく継続して使用できます。</p><blockquote><p>CAE のおかげで、Exchange Online や SharePoint Online のような重要なサービスで、セッションの取り消しやユーザーの再認証を待つ必要がなくなりました。ユーザー ID でセキュリティ インシデントが発生しても、トークンを即座に失効させることができるので安心感があります。さらに、CAE のデフォルトのセッション持続期間が長いことも、特に障害の可能性に対する耐性を高めるという観点で歓迎すべき利点です。 – BRIDGEWATER 社</p></blockquote><p>CAE は最も人気のあるプレビュー機能の 1 つで、すでに数千のお客様によって数百万人のユーザーに対して導入され成功を収めています。CAE の詳細については、現在 CAE をサポートしている <a href="https://docs.microsoft.com/ja-jp/azure/active-directory/conditional-access/concept-continuous-access-evaluation#critical-event-evaluation">アプリのリスト</a> も含め、<a href="https://docs.microsoft.com/ja-jp/azure/active-directory/conditional-access/concept-continuous-access-evaluation">こちら</a> でご覧いただけます。</p><p>いつものように、皆様のご意見や提案をお聞かせください。コメントをお寄せいただくか、<a href="https://feedback.azure.com/d365community/forum/22920db1-ad25-ec11-b6e6-000d3a4f0789">AzureADFeedback</a> までお気軽にご連絡ください。</p><p>Alex Simons (Twitter: <a href="https://twitter.com/Alex_A_Simons">@alex_a_simons</a>)<br>Corporate Vice President Program Management<br>Microsoft Identity Division</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは、Azure Identity サポート チームの 村上 です。&lt;/p&gt;
&lt;p&gt;本記事は、2022 年 1 月 10 日に米国の Azure Active Directory Identity Blog で公開された &lt;a href=&quot;https://techco</summary>
      
    
    
    
    
    <category term="Azure AD" scheme="https://jpazureid.github.io/blog/tags/Azure-AD/"/>
    
    <category term="US Identity Blog" scheme="https://jpazureid.github.io/blog/tags/US-Identity-Blog/"/>
    
  </entry>
  
  <entry>
    <title>Decentralized ID を使用したソリューション開発にご参加ください</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory/join-us-to-build-solutions-using-decentralized-identities/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory/join-us-to-build-solutions-using-decentralized-identities/</id>
    <published>2022-01-22T00:00:00.000Z</published>
    <updated>2022-01-31T04:07:17.479Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Azure Identity サポート チームの高田です。</p><p>本記事は、2022 年 1 月 10 日に米国の Azure Active Directory Identity Blog で公開された <a href="https://techcommunity.microsoft.com/t5/azure-active-directory-identity/join-us-to-build-solutions-using-decentralized-identities/ba-p/2810649">Join us to build solutions using Decentralized Identities</a> を意訳したものになります。ご不明点等ございましたらサポート チームまでお問い合わせください。</p><hr><p>サイバー セキュリティ攻撃は、日々、組織や顧客データを危険にさらしており、企業はデータの管理方法とそれに伴うリスクの度合いについてこれまでとは異なる考えを持つよう迫られています。ユーザーは、電子化された取引がシームレスかつ安全に行われ、同時にプライバシーも保護されることを必要としています。より透明で安全なデジタル ID 体験を実現するには、標準ベースの <a href="https://aka.ms/ownyouridentity">Decntralized ID</a> (DID) システムで既存のクラウド ID システムを補強していく必要があります。この新しいシステムにより、ユーザーや組織が自分のデータをより詳細に管理し、自身の ID を直接証明できるようにし、アプリケーション、デバイス、サービス プロバイダに高度な信頼性と安全性を提供します。</p><p>Decentralized ID の核となるのは、<a href="https://aka.ms/verifyonce">検証可能な資格情報</a> 技術です。これは、信頼できるプロバイダーが、大学の学生証や医療機関の健康記録など、検証済みの ID をユーザーに発行することを可能にします。ユーザーが資格情報を証明する必要がある時は、検証済み ID を共有することで、要求者はそれが適切に署名され最新であることを自動的に確認することができます。それぞれの検証済み ID は設計上変更不可であり、迅速に共有することができ、個人データそのものではなく証明のみを共有することができるため、身元確認のためのプロセスがより簡単、迅速、かつ安全になります。これは Win-Win の関係であり、世界中の組織がすでに様々なユース ケースでこれらのソリューションを試験的に導入しています。</p><p>1 月中は、このエキサイティングな新技術について知っていただくために、コーディングのライブ ストリーム、ブログ、YouTube ビデオなど、一連のイベントを開催し、1 万ドル以上の賞金をかけた素晴らしいハッカソンを最後に開催する予定です。エンジニア、サポート、プロダクト マネジメントの各チームが技術サポートを提供し、参加者のみなさんを支援します。ハッカソンに必要なのは、ノート パソコンと想像力、そして簡単なコーディングをして検証可能な資格情報を発行したり検証したりするソリューションを作りたいという気持ちだけです。ただ事前に必要なものがいくつかありますので、当日に必要なものが揃っているかどうか、ご確認ください。</p><p>1 月に開催予定のイベントの一覧:</p><table><thead><tr><th>Date</th><th></th></tr></thead><tbody><tr><td>01/13</td><td><a href="https://425.show/twitch">Twitch ストリーム</a></td></tr><tr><td>01/19</td><td><a href="https://425.show/twitch">Twitch ストリーム - DID の紹介 (つづき)</a>]</td></tr><tr><td>01/19</td><td>YouTube のビデオ プレイリスト - DID の紹介</td></tr><tr><td>01/24</td><td><a href="https://425.show/did-space">Twitter Spaces - Decentralized ID の紹介</a></td></tr><tr><td>01/25</td><td><a href="https://www.twitch.tv/425Show">Twitch Stream - 検証可能な資格情報を使用したアプリの開発</a></td></tr><tr><td>01/25</td><td><a href="https://425.show/twitch">Twitch Stream - DID 基盤の設定</a></td></tr><tr><td>01/27</td><td><a href="https://425.show/did-hackathon">ハッカソン: DID で何かスゴいものを作ろう</a></td></tr></tbody></table><p>まずは、QR コードをスキャンするか、以下のリンク (<a href="https://425.show/blogreader">https://425.show/blogreader</a>) をクリックして、最初の認証済み資格情報を発行ください。</p><p><img src="/blog/azure-active-directory/join-us-to-build-solutions-using-decentralized-identities/qr-code.png"></p><p>標準規格や技術コンポーネント、コードの成果物をオープンソース化し、誰もがアクセスできるようにすることで、DID のエコシステムが成長し、繁栄すると信じています。今後の活動に心からワクワクしています。このエキサイティングなテクノロジーを使ってソリューションを構築したい個人や組織と提携することを楽しみにしています。</p><p>Decentralized ID Hackathon への参加申し込みは <a href="https://microsoft-did.devpost.com/">こちら</a> からどうぞ。また、<a href="https://425.show/twitch">Twitch</a> でフォローいただくか、<a href="https://425.show/discord">Discord</a> チャンネルに参加して、エキスパートとつながり、コラボレーションしていただくことも可能です。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは、Azure Identity サポート チームの高田です。&lt;/p&gt;
&lt;p&gt;本記事は、2022 年 1 月 10 日に米国の Azure Active Directory Identity Blog で公開された &lt;a href=&quot;https://techcomm</summary>
      
    
    
    
    
    <category term="Azure AD" scheme="https://jpazureid.github.io/blog/tags/Azure-AD/"/>
    
    <category term="US Identity Blog" scheme="https://jpazureid.github.io/blog/tags/US-Identity-Blog/"/>
    
  </entry>
  
  <entry>
    <title>Azure AD の新機能により ID プロビジョニングをよりシンプルに</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory/simplify-your-identity-provisioning-with-these-new-azure-ad/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory/simplify-your-identity-provisioning-with-these-new-azure-ad/</id>
    <published>2022-01-01T00:00:00.000Z</published>
    <updated>2022-01-31T04:07:17.587Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Azure Identity サポート チームの中井です。</p><p>本記事は、2021 年 12 月 13 日に米国の Azure Active Directory Identity Blog で公開された <a href="https://techcommunity.microsoft.com/t5/azure-active-directory-identity/simplify-your-identity-provisioning-with-these-new-azure-ad/ba-p/2466922">Simplify your identity provisioning with these new Azure AD capabilities</a> を意訳したものになります。ご不明点等ございましたらサポート チームまでお問い合わせください。</p><hr><p>リモートワークの発展と導入が進む中、強固な ID とガバナンスの制御が ITの拡張性と柔軟なユーザー体験にとって重要です。本日、このようなご要望に対応するために、<a href="https://docs.microsoft.com/ja-jp/azure/active-directory/">Azure Active Directory</a> (Azure AD) の新機能とベスト プラクティスをご紹介します。これらのアップデートにより、Azure AD Connect クラウド同期を構成している状況でのクラウドからのパスワード ライトバックの実行、オンプレミス アプリケーションへのプロビジョニング、SCIM プロビジョニング エンドポイントの検証などが可能になります。</p><h2 id="オンプレミスとクラウドを問わずパスワードのリセットが可能に"><a href="#オンプレミスとクラウドを問わずパスワードのリセットが可能に" class="headerlink" title="オンプレミスとクラウドを問わずパスワードのリセットが可能に"></a>オンプレミスとクラウドを問わずパスワードのリセットが可能に</h2><p>パスワード ライトバックにより、オンプレミスから同期しているユーザーがクラウド上でパスワードの変更を開始すると、ユーザーのオンプレミス <a href="https://docs.microsoft.com/ja-jp/azure/active-directory-domain-services/overview">Active Directory Domain Services (AD DS)</a> 環境にリアルタイムにパスワードが書き戻されます。これにより、ユーザーは複数のパスワードの管理に悩まされることなく、クラウドとオンプレミスのアプリケーションをシームレスに行き来することができます。また、パスワードがどこで更新されても、クラウドとオンプレミスの間で同期状態を維持することが可能です。</p><p>現在パブリック プレビュー中の <a href="https://docs.microsoft.com/ja-jp/azure/active-directory/authentication/tutorial-enable-cloud-sync-sspr-writeback">Azure AD Connect クラウド同期のパスワード ライトバック</a> を用いることで、従来の Azure AD Connect からは到達できないドメインに存在するユーザーをパスワード ライトバックの対象とすることが可能となります。組織は、複数のネットワーク的に分断されたドメインから単一の Azure AD テナントにユーザーを同期し、Azure AD からこれらのユーザーのパスワードをリセットすることができます。</p><p><img src="/blog/azure-active-directory/simplify-your-identity-provisioning-with-these-new-azure-ad/on-premesis-integration.png"></p><h2 id="クラウドおよびオンプレミスのアプリケーションへのプロビジョニングをよりシンプルに"><a href="#クラウドおよびオンプレミスのアプリケーションへのプロビジョニングをよりシンプルに" class="headerlink" title="クラウドおよびオンプレミスのアプリケーションへのプロビジョニングをよりシンプルに"></a>クラウドおよびオンプレミスのアプリケーションへのプロビジョニングをよりシンプルに</h2><p>Microsoft Ignite において、<a href="https://docs.microsoft.com/ja-jp/azure/active-directory/app-provisioning/on-premises-scim-provisioning">SCIM</a>、<a href="https://docs.microsoft.com/ja-jp/azure/active-directory/app-provisioning/tutorial-ecma-sql-connector">SQL</a>、<a href="https://docs.microsoft.com/ja-jp/azure/active-directory/app-provisioning/on-premises-ldap-connector-configure">LDAP</a> をサポートするオンプレミスアプリケーションへのプロビジョニングに関し、Azure AD でパブリック プレビューが利用可能となったことを <a href="https://jpazureid.github.io/blog/azure-active-directory/identity-at-ignite-strengthen-resilience-with-identity/">発表</a> しました。お客様は、<a href="https://docs.microsoft.com/ja-jp/azure/active-directory/saas-apps/mondaycom-provisioning-tutorial">monday.com</a>、<a href="https://docs.microsoft.com/ja-jp/azure/active-directory/saas-apps/miro-provisioning-tutorial">Miro</a>、<a href="https://docs.microsoft.com/ja-jp/azure/active-directory/saas-apps/asana-provisioning-tutorial">Asana</a> などの人気のある SaaS アプリケーションと同じ方法で、オンプレミス アプリケーションへのプロビジョニングを管理することが可能です。さらにこの発表に加えて、今回、OpenLDAP などのサードパーティの LDAP ディレクトリにユーザーをプロビジョニングする機能を追加いたしました。</p><p><img src="/blog/azure-active-directory/simplify-your-identity-provisioning-with-these-new-azure-ad/azure-ad.png"></p><h2 id="SCIM-規格に準拠したプロビジョニング-エンドポイントの構築とテストをよりシンプルに"><a href="#SCIM-規格に準拠したプロビジョニング-エンドポイントの構築とテストをよりシンプルに" class="headerlink" title="SCIM 規格に準拠したプロビジョニング エンドポイントの構築とテストをよりシンプルに"></a>SCIM 規格に準拠したプロビジョニング エンドポイントの構築とテストをよりシンプルに</h2><p>SCIM 検証ツールが限定でプレビュー開始となりました。これにより、パートナーや顧客は、エンドポイントが Azure AD SCIM クライアントと互換性があるかどうかを検証でき、Azure AD アプリケーション ギャラリーへの登録に要する時間を短縮することができます。<a href="https://docs.microsoft.com/ja-jp/azure/active-directory/app-provisioning/use-scim-to-provision-users-and-groups">手順</a> に従い新しいアプリケーションの構築が完了しましたら、こちらの <a href="https://forms.office.com/pages/responsepage.aspx?id=v4j5cvGGr0GRqy180BHbR7dZme7gPidCseyJdx2X-31UNUlLU05EVTg0MjBKNU1CV1ZDVkJZU0pVWC4u">リンク</a> よりプレビューへの招待をリクエストできます。</p><p><img src="/blog/azure-active-directory/simplify-your-identity-provisioning-with-these-new-azure-ad/scim-results.png"></p><h2 id="Azure-AD-Connect-同期を最新バージョンへアップグレードして今後に備える"><a href="#Azure-AD-Connect-同期を最新バージョンへアップグレードして今後に備える" class="headerlink" title="Azure AD Connect 同期を最新バージョンへアップグレードして今後に備える"></a>Azure AD Connect 同期を最新バージョンへアップグレードして今後に備える</h2><p>Azure AD Connect 同期のレガシー バージョン (v1.x) は、SQL Server 2012 や ADAL などのコンポーネントに依存していますが、これらは来年に廃止される予定です。そのため、すべてのお客様は同期処理のサポートが中断されないよう、<a href="https://docs.microsoft.com/ja-jp/azure/active-directory/hybrid/reference-connect-version-history">Azure AD Connect sync v2.0</a> へアップグレードいただくか、<a href="https://docs.microsoft.com/ja-jp/azure/active-directory/cloud-sync/what-is-cloud-sync">Azure AD Connect クラウド同期</a> への切り替えをご検討いただく必要がございます。Azure AD Connect 同期 v1.x のバージョンは、2022 年 8 月 30 日をもちまして廃止されます。</p><p>IT に関する計画の予測が容易となるよう、弊社では Azure AD Connect 同期のバージョンについて一貫した廃止サイクルを確立しています。今後は、新バージョンがリリースされてから 18 カ月後に各バージョンを廃止する予定です。</p><h2 id="プロビジョニング-ロジックに日付の比較を使用する"><a href="#プロビジョニング-ロジックに日付の比較を使用する" class="headerlink" title="プロビジョニング ロジックに日付の比較を使用する"></a>プロビジョニング ロジックに日付の比較を使用する</h2><p><a href="https://docs.microsoft.com/ja-jp/azure/active-directory/app-provisioning/functions-for-customizing-application-data">属性マッピング</a> を用いることにより、対象のシステムに書き込む前にデータを制御および変換することができます。皆様からのフィードバックに基づき、新しい組み込み日付関数 <a href="https://docs.microsoft.com/ja-jp/azure/active-directory/app-provisioning/functions-for-customizing-application-data#now">Now()</a>, <a href="https://docs.microsoft.com/ja-jp/azure/active-directory/app-provisioning/functions-for-customizing-application-data#dateadd">DateAdd()</a>, <a href="https://docs.microsoft.com/ja-jp/azure/active-directory/app-provisioning/functions-for-customizing-application-data#datediff">DateDiff()</a> を追加し、日付を比較したり、日付時刻の値に基づくきめ細かい属性プロビジョニングを定義できるようにいたしました。ユーザーのプロビジョニング フローの他の関数とネストしたり組み合わせることで、以下のようなシナリオを実装できます。</p><ul><li>ユーザー タイプに基づいて、SaaS アプリケーションまたはオンプレミス アプリケーションのユーザー アカウントの有効期限を、 現在のプロビジョニング時刻から “X” 日後に設定する。</li><li>現在の日付と人事的な採用日の間隔の差を求め、それをアカウントの有効化/データフロー ロジックの決定に使用する。</li></ul><p>いつも通り、皆様のご意見をお聞かせください。コメントをお寄せいただくか、<a href="https://feedback.azure.com/d365community">aka.ms/AzureADFeedback</a> までお気軽にご連絡ください。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは、Azure Identity サポート チームの中井です。&lt;/p&gt;
&lt;p&gt;本記事は、2021 年 12 月 13 日に米国の Azure Active Directory Identity Blog で公開された &lt;a href=&quot;https://techcom</summary>
      
    
    
    
    
    <category term="Azure AD" scheme="https://jpazureid.github.io/blog/tags/Azure-AD/"/>
    
    <category term="US Identity Blog" scheme="https://jpazureid.github.io/blog/tags/US-Identity-Blog/"/>
    
  </entry>
  
  <entry>
    <title>Azure ポータル UX における Azure AD Graph 権限のサインアップのサポート終了</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory/end-of-support-for-azure-ad-graph-permission-sign-up-through/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory/end-of-support-for-azure-ad-graph-permission-sign-up-through/</id>
    <published>2021-12-26T00:00:00.000Z</published>
    <updated>2022-01-31T04:07:17.387Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Azure Identity サポート チームの中井です。</p><p>本記事は、2021 年 12 月 8 日に米国の Azure Active Directory Identity Blog で公開された <a href="https://techcommunity.microsoft.com/t5/azure-active-directory-identity/end-of-support-for-azure-ad-graph-permission-sign-up-through/ba-p/2464404">End of support for Azure AD Graph permission sign up through portal UX</a> を意訳したものになります。ご不明点等ございましたらサポート チームまでお問い合わせください。</p><hr><p>皆さん、こんにちは。</p><p>昨年、<a href="https://techcommunity.microsoft.com/t5/azure-active-directory-identity/update-your-applications-to-use-microsoft-authentication-library/ba-p/1257363">Azure AD Graph API と ADAL (Azure Active Directory Authentication Library) の廃止</a> を発表しました。廃止プロセスの一環として、8 月に <a href="https://twitter.com/Microsoft365Dev/status/1432810426442649603?s=20">こちら</a> でお知らせしたように、 Azure ポータル画面からアプリ登録する際の以下の Azure AD Graph API の権限設定を無効化しました。</p><p><img src="/blog/azure-active-directory/end-of-support-for-azure-ad-graph-permission-sign-up-through/legacy_apis.png"></p><p>この変更の目的は、Azure AD Graph を使用するよう設定される新規アプリケーションの数を減らし、新規アプリケーションを Azure AD Graph API で構成するようなレガシーなプロセスが残っていないか確認することにあります。Azure AD Graph の権限を持つ既存のアプリケーションは、API が廃止されるまで引き続き動作し、Azure AD Graph の権限の表示、同意、設定、削除は引き続き Azure ポータルを使用して行うことが可能です。</p><p>アプリケーションの移行作業中に、まだアプリケーションに Azure AD Graph 権限を追加する必要がある場合は、次のいずれかの方法をご利用ください。</p><ul><li>Azure ポータルを使用して、組織が使用する API を検索します。</li><li>Azure ポータルでアプリケーション 仕様書を更新します。</li><li>Microsoft Graph <a href="https://docs.microsoft.com/graph/api/resources/application?view=graph-rest-1.0">application API</a> を使用し、<a href="https://docs.microsoft.com/graph/api/resources/requiredresourceaccess?view=graph-rest-1.0">requiredResourceAccess</a> プロパティを更新します。</li><li>Microsoft Graph PowerShell <a href="https://docs.microsoft.com/powershell/module/microsoft.graph.applications/update-mgapplication?view=graph-powershell-1.0">Update-MgApplication</a> コマンドレットを使用して RequiredResourceAccess オブジェクトを更新します。</li></ul><p>詳細なガイダンスは、<a href="https://docs.microsoft.com/graph/migrate-azure-ad-graph-faq#i-need-to-add-new-azure-ad-graph-permissions-to-my-app-but-i-cant-select-azure-ad-graph-as-a-required-permission-for-my-app-registration-how-can-i-add-the-azure-ad-graph-permissions">移行 FAQ</a> を参照ください。</p><p>上記にて紹介しました権限設定の方法は、Azure AD Graph API が廃止されるまでご利用可能です。アプリケーションを移行した後は、アプリケーションから Azure AD Graph 権限を削除し、Microsoft Graph 権限のみを保持することをお勧めします。弊社ではお客様がアプリケーションを <a href="https://docs.microsoft.com/graph/overview">Microsoft Graph API</a> に移行するための取り組みを支援させていただきますので、移行過程でお力になれることがございましたらお知らせください。</p><p>Alex Simons (Twitter: <a href="http://twitter.com/alex_a_simons">@Alex_A_Simons</a>)<br>Corporate Vice President of Program Management<br>Microsoft Identity Division</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは、Azure Identity サポート チームの中井です。&lt;/p&gt;
&lt;p&gt;本記事は、2021 年 12 月 8 日に米国の Azure Active Directory Identity Blog で公開された &lt;a href=&quot;https://techcomm</summary>
      
    
    
    
    
    <category term="Azure AD" scheme="https://jpazureid.github.io/blog/tags/Azure-AD/"/>
    
    <category term="US Identity Blog" scheme="https://jpazureid.github.io/blog/tags/US-Identity-Blog/"/>
    
  </entry>
  
  <entry>
    <title>Azure AD カスタム セキュリティ属性の紹介</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory/introducing-azuread-custom-security-attributes/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory/introducing-azuread-custom-security-attributes/</id>
    <published>2021-12-26T00:00:00.000Z</published>
    <updated>2022-01-31T04:07:17.467Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、 Azure ID チームの小出です。</p><p>本記事は、2021 年 12 月 1 日に米国の Azure Active Directory Identity Blog で公開された <a href="https://techcommunity.microsoft.com/t5/azure-active-directory-identity/introducing-azure-ad-custom-security-attributes/ba-p/2147068">Introducing Azure AD custom security attributes</a> を意訳したものになります。ご不明点などございましたら、サポート チームまでお問い合わせください。</p><hr><p>今回の Microsoft Azure Active Directory (Azure AD) のカスタム セキュリティ属性と、ABAC (Attribute Based Access Control / 属性ベースのアクセス制御) 条件におけるユーザー属性のパブリック プレビューは、前回の Azure Storage における ABAC 条件の <a href="https://techcommunity.microsoft.com/t5/azure-active-directory-identity/introducing-attribute-based-access-control-abac-in-azure/ba-p/2147069">パブリック プレビュー</a> を踏まえたものです。Azure AD のカスタム セキュリティ属性 (以下、カスタム属性) は、Azure AD で定義できるキーと値のペアで、ユーザーやサービス プリンシパル (エンタープライズ アプリケーション)、マネージド ID などの Azure AD オブジェクトに割り当てることができます。カスタム属性を使用すると、ユーザーのコスト センターやエンタープライズ アプリケーションを所有するビジネス ユニットなどのビジネス固有の情報を追加し、特定のユーザーがそれらの属性を管理できるようになります。ユーザー属性は、Azure ロール割り当ての ABAC 条件で使用することができ、リソース属性だけの場合よりも、さらにきめ細かいアクセス制御が可能になります。Azure AD のカスタム セキュリティ属性の利用には、Azure AD Premium ライセンスが必要です。</p><p>カスタム属性機能は、Azure AD での属性の管理や Azure ロール割り当てでの ABAC 条件について寄せられたフィードバックにもとづいて開発されました。</p><ul><li>いくつかのシナリオでは、ユーザーに関する機密情報を Azure AD に保存し、許可されたユーザーのみがこの情報を読み取ったり管理したりできるようにする必要があります。たとえば、各従業員の職位を保存し、人事部の特定のユーザーのみがその属性を読み取り、管理できるようにします。</li><li>ビジネス ユニットや秘密度のレベルなどの属性を持つエンタープライズ アプリケーションを分類してレポートする必要があります。たとえば、アプリケーションを所有するビジネス ユニットごとに、各エンタープライズ アプリケーションを追跡します。</li><li>Azure ストレージ リソースに関して、API アクセス キーや SAS トークンから、一元化された一貫性のあるアクセス制御 (Azure RBAC + ABAC) に移行することで、セキュリティ態勢を改善する必要があります。API アクセス キーや SAS トークンは、ID に紐づけられていないないため、アクセス キーやトークンを持っている人は誰でもリソースにアクセスすることができます。 スケーラブルにセキュリティ対策を強化するためには、数百万の Azure Storage Blob へのアクセスを少ないロール割り当てで管理できるよう、リソース属性とともにユーザー属性が必要です。</li></ul><p>ここでは、どのように属性を管理し、Azure ADオブジェクトをフィルタリングすればよいか、Azure でアクセス制御を拡張する方法を簡単に見てみましょう。</p><h2 id="ステップ-1-Azure-AD-での属性の定義"><a href="#ステップ-1-Azure-AD-での属性の定義" class="headerlink" title="ステップ 1: Azure AD での属性の定義"></a>ステップ 1: Azure AD での属性の定義</h2><p>最初のステップは、関連する属性の集まりである “属性セット” を作成することです。たとえば、マーケティング部門に関連する属性を参照したい場合は、「marketing」という名前の属性セットを作成することができます。次に、属性セット内の属性と、属性セットの特徴を定義します。たとえば、属性にはあらかじめ定義された値しか使用できないことや、属性に割り当てられる値は 1 つか、もしくは複数かなどを指定します。この例では、プロジェクト属性に3つの値 (Cascade、Baker、Skagit) があり、ユーザーには 3 つの値のうち 1 つしか割り当てられません。下の図は、上記の例を示しています。</p><p><img src="/blog/azure-active-directory/introducing-azuread-custom-security-attributes/1_addattribute.png"></p><h2 id="ステップ-2-ユーザーまたはエンタープライズ-アプリケーションへの属性の割り当て"><a href="#ステップ-2-ユーザーまたはエンタープライズ-アプリケーションへの属性の割り当て" class="headerlink" title="ステップ 2: ユーザーまたはエンタープライズ アプリケーションへの属性の割り当て"></a>ステップ 2: ユーザーまたはエンタープライズ アプリケーションへの属性の割り当て</h2><p>属性が定義されると、ユーザー、エンタープライズ アプリケーション、およびマネージド ID に割り当てることができます。</p><p><img src="/blog/azure-active-directory/introducing-azuread-custom-security-attributes/2_assignment.png"></p><p>属性を割り当てると、属性を使ってユーザーやアプリケーションをフィルタリングできます。たとえば、秘密度レベルが「高」のすべてのエンタープライズ アプリケーションを確認することができます。</p><p><img src="/blog/azure-active-directory/introducing-azuread-custom-security-attributes/3_filtering.png"></p><h2 id="ステップ-3-属性管理の委任"><a href="#ステップ-3-属性管理の委任" class="headerlink" title="ステップ 3: 属性管理の委任"></a>ステップ 3: 属性管理の委任</h2><p>属性を管理するために利用できる Azure AD の組み込みロールは 4 つあります。</p><table><thead><tr><th>アクセス許可</th><th>グローバル管理者</th><th>属性定義管理者</th><th>属性割り当て管理者</th><th>属性定義閲覧者</th><th>属性割り当て閲覧者</th></tr></thead><tbody><tr><td>属性セットを読み取る</td><td></td><td>〇</td><td>〇</td><td>〇</td><td>〇</td></tr><tr><td>属性の定義を読み取る</td><td></td><td>〇</td><td>〇</td><td>〇</td><td></td></tr><tr><td>ユーザーやアプリ (サービス プリンシパル) の属性割り当てを読み取る</td><td></td><td></td><td>〇</td><td></td><td>〇</td></tr><tr><td>属性セットを追加もしくは編集する</td><td></td><td>〇</td><td></td><td></td><td></td></tr><tr><td>属性の定義を追加、編集もしくは非アクティブ化する</td><td></td><td>〇</td><td></td><td></td><td></td></tr><tr><td>ユーザーやアプリ (サービス プリンシパル) へ属性を割り当てる</td><td></td><td></td><td>〇</td><td></td><td></td></tr></tbody></table><p>既定ではグローバル管理者とグローバル閲覧者は、属性を作成、読み取り、または更新することができません。グローバル管理者または特権ロール管理者は、属性を管理するために、属性管理ロールを他のユーザーまたは自身に割り当てる必要があります。これら 4 つのロールは、テナントまたは属性セットのスコープで割り当てることができます。テナント スコープで役割を割り当てると、すべての属性セットの管理を委任することができます。属性セットのスコープで役割を割り当てると、特定の属性セットの管理を委任することができます。例を挙げて説明します。</p><p><img src="/blog/azure-active-directory/introducing-azuread-custom-security-attributes/4_xia.png"></p><ol><li>Xia は特権ロール管理者です。そのため、Xia はテナント レベルで属性定義管理者ロールを自身に割り当てます。これにより、彼女は属性セットを作成することができます。</li><li>エンジニアリング部門では、Alice が属性の定義を担当し、Chandra が属性の割り当てを担当しています。Xia はエンジニアリング属性セットを作成し、Alice には属性定義管理者ロールを、Chandra にはエンジニアリング属性セット スコープの属性割り当て管理者ロールを割り当て、Alice と Chandra が必要最小限の権限を持つようにします。</li><li>マーケティング部門では、Bob が属性の定義と割り当てを担当しています。Xia は、マーケティング属性セットを作成し、属性定義管理者と属性割り当て管理者のロールを Bob に割り当てます。</li></ol><h2 id="ステップ-4-少ない-Azure-ロール割り当てできめ細かなアクセス制御を実現する"><a href="#ステップ-4-少ない-Azure-ロール割り当てできめ細かなアクセス制御を実現する" class="headerlink" title="ステップ 4: 少ない Azure ロール割り当てできめ細かなアクセス制御を実現する"></a>ステップ 4: 少ない Azure ロール割り当てできめ細かなアクセス制御を実現する</h2><p>前回のブログ記事 <a href="https://techcommunity.microsoft.com/t5/azure-active-directory-identity/introducing-attribute-based-access-control-abac-in-azure/ba-p/2147069">Azure ロール割り当てでの ABAC 条件</a> で紹介した架空の例をもとに考えてみましょう。 Bob は、照明や家電など何千ものカテゴリの商品を販売するホームセンター チェーンである Contoso 株式会社営業チームの Azure サブスクリプション所有者です。これらのカテゴリの日次売上レポートは、その日 (たとえば 2021-03-24) の Azure ストレージ コンテナに保存されており、中央の財務チームのメンバーは、より簡単にレポートにアクセスできます。Charlie は照明カテゴリのセールス マネージャーで、照明カテゴリの売上レポートをどのストレージコンテナでも読めるようにする必要がありますが、他のカテゴリーのレポートを読むことはできません。</p><p>リソース属性（例えば、blob インデックス タグ）だけでは、Bob は Charlie のロール割り当てを 1 つ作成し、blob インデックス タグが「category = lighting」となっている blob への読み取りアクセスを制限する条件を追加する必要があります。Bob は Charlie のようなユーザーの数だけ、多くのロール割り当てを作成する必要があります。リソース属性と併用してユーザー属性を使用すると、Bob は Azure AD グループ内のすべてのユーザーを対象とした 1 つのロール割り当てを作成し、”ユーザーの category 属性値が blob の category タグ値と一致する” ように要求する ABAC 条件を追加することができます。Azure AD 管理者の Xia は、「contosocentralfinance」という属性セットを作成し、Bob に属性セットの Azure AD 属性定義管理者と属性割り当て管理者のロールを割り当て、Bob が自分の仕事をするのに最低限必要な権限を与えます。以下の図は、このシナリオを示しています。</p><p><img src="/blog/azure-active-directory/introducing-azuread-custom-security-attributes/5_abac.png"></p><p>Bob は、ユーザー属性とリソース属性を使って、ABAC 条件ビルダーで次のような条件を書きます。</p><p><img src="/blog/azure-active-directory/introducing-azuread-custom-security-attributes/6_roleassignmentcondition.png"></p><p>まとめると、ユーザー属性、リソース属性、ABAC 条件を使えば、わずか 1 つのロール割り当てで、何百万もの Azure ストレージ Blob へのアクセスを管理することができるのです。  </p><h2 id="監査とツール"><a href="#監査とツール" class="headerlink" title="監査とツール"></a>監査とツール</h2><p>属性には機密情報が含まれ、アクセスを許可または拒否することができるため、属性の定義、割り当て、および割り当て解除に関するアクティビティは Azure AD 監査ログに記録されます。属性に関連するタスクの管理と自動化には、ポータルに加えて、PowerShell や Microsoft Graph API を使用できます。Azure CLI、PowerShell、または Azure Resource Manager テンプレートと Azure REST API を使用して、Azure ロール割り当ての ABAC 条件を管理することもできます。</p><h2 id="リソース"><a href="#リソース" class="headerlink" title="リソース"></a>リソース</h2><p>始めやすいように、条件のサンプルを含むいくつかの <a href="https://docs.microsoft.com/ja-jp/azure/storage/common/storage-auth-abac-examples?toc=/azure/role-based-access-control/toc.json">例</a> を用意しています。Contoso 株式会社の <a href="https://docs.microsoft.com/ja-jp/azure/role-based-access-control/conditions-custom-security-attributes-example">例</a> では、ABAC 条件を使用して Azure ストレージ Blob に関するシナリオのアクセス制御をどのように拡張できるかを案内しています。また、Azure AD のドキュメント、<a href="https://docs.microsoft.com/ja-jp/azure/active-directory/fundamentals/custom-security-attributes-manage">How-to</a>、<a href="https://docs.microsoft.com/ja-jp/azure/active-directory/fundamentals/custom-security-attributes-troubleshoot">トラブルシューティング</a> のガイドも利用できます。</p><p>Azure AD の <a href="https://docs.microsoft.com/ja-jp/azure/active-directory/fundamentals/custom-security-attributes-overview">カスタム セキュリティ属性</a> と <a href="https://docs.microsoft.com/ja-jp/azure/role-based-access-control/conditions-overview">Azure ストレージの ABAC 条件</a> について、皆様のご意見をお待ちしています。今後、Azure AD の条件付きアクセスでカスタム セキュリティ属性を使用する方法についても紹介するのでぜひ楽しみにしておいてください。皆様からのご意見、<a href="https://forms.office.com/pages/responsepage.aspx?id=v4j5cvGGr0GRqy180BHbR-lT4fPHJUBHjqPLpZfcitlUQkVNUTg1UjFaUldJQlMyOUVVNDBGTlBRTi4u">今後のシナリオ</a> のアイデアをお待ちしています。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは、 Azure ID チームの小出です。&lt;/p&gt;
&lt;p&gt;本記事は、2021 年 12 月 1 日に米国の Azure Active Directory Identity Blog で公開された &lt;a href=&quot;https://techcommunity.micr</summary>
      
    
    
    
    
    <category term="Azure AD" scheme="https://jpazureid.github.io/blog/tags/Azure-AD/"/>
    
    <category term="US Identity Blog" scheme="https://jpazureid.github.io/blog/tags/US-Identity-Blog/"/>
    
  </entry>
  
  <entry>
    <title>ゼロ トラスト展開のためのよりよいコントロールとインサイト</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory/more-control-and-better-insights-for-your-zero-trust-deployments/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory/more-control-and-better-insights-for-your-zero-trust-deployments/</id>
    <published>2021-12-18T00:00:00.000Z</published>
    <updated>2022-01-31T04:07:17.511Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、 Azure Identity サポート チームの小出です。</p><p>本記事は、 2021 年 11 月 30 日に米国の Azure Active Directory Identity Blog で公開された <a href="https://techcommunity.microsoft.com/t5/azure-active-directory-identity/more-control-and-better-insights-for-your-zero-trust-deployments/ba-p/2365684">More control and better insights for your Zero Trust deployments</a> を意訳したものになります。ご不明点などございましたら、サポート チームまでお問い合わせください。</p><hr><p>Ignite 2021 はお楽しみいただけましたか？ユーザーやアプリケーションを脅威から保護するため、ゼロ トラストを展開するうえでどのように Azure Active Directory を使っているか、皆様からのご意見を伺うことができました。多くの方から、ID 環境の保護と調査のために、より強力で使いやすいツールを求める声をいただいています。そこで本日は、Azure AD の条件付きアクセスと Identity Protection の新機能について詳しくご紹介します。新しい機能を使うと、ID の保護を強化するとともに、業務をより簡単に進めることができるようになります。</p><h2 id="Azure-AD-の条件付きアクセスと-Identity-Protection-の新機能"><a href="#Azure-AD-の条件付きアクセスと-Identity-Protection-の新機能" class="headerlink" title="Azure AD の条件付きアクセスと Identity Protection の新機能"></a>Azure AD の条件付きアクセスと Identity Protection の新機能</h2><p>Ignite では、複数の強力な機能を発表しました。より使いやすくなった条件付きアクセスに加え、ゼロ トラストの展開を加速させるインサイトの提供、さらに主要なシナリオについてより包括的な保護を行えるようになりました。<strong>条件付きアクセスの概要を示すダッシュボード</strong> (パブリック プレビュー版) では、ポリシーの適用範囲におけるギャップを素早く見つけることができ、テンプレートを使用することで推奨されるポリシーをより簡単に導入することができます。また、デバイス用のフィルターやアプリ用のフィルター (一般公開 / GA) では、特権操作を行うワークステーションへ管理者のみがアクセスできるよう制限するなど新たなシナリオが追加され、主要なシナリオをより包括的にカバーできるようになりました。最後に、<strong>リスク データのエクスポート</strong> (新しいトークン シグナルを含む) がより簡単になり、素晴らしいワークブックも追加されたので、お客様側でリスクについての詳細 (およびその対処法) を得ることもできるようになりました。</p><h3 id="条件付きアクセスの概要ダッシュボード"><a href="#条件付きアクセスの概要ダッシュボード" class="headerlink" title="条件付きアクセスの概要ダッシュボード"></a>条件付きアクセスの概要ダッシュボード</h3><p>まず、<strong>条件付きアクセスの概要ダッシュボード</strong> を見てみましょう。ポリシーの数が増えてくると、管理者はそのポリシーが本当に組織全体を保護しているかどうか把握する必要があります。条件付きアクセスの新しい概要ダッシュボードでは、ポリシーの適用範囲内にあるユーザ、アプリ、デバイスをまとめ、ポリシーの適用範囲にあるギャップを明らかにすることで、包括的なポリシーの展開がこれまで以上に容易になります。</p><p><img src="/blog/azure-active-directory/more-control-and-better-insights-for-your-zero-trust-deployments/1_CAdashboard.png"></p><p>ダッシュボードは 4 つのメインタブで構成されています。</p><ul><li>はじめに: 条件付きアクセスを初めて利用する方は、ポリシーを構成する要素について学んで新しいポリシーを作成ください。  </li><li>概要: 条件付きアクセスで保護されているユーザー、デバイス、アプリケーションの概要を確認できます。また、テナント内のサインイン アクティビティ データに基づいて推奨されるポリシーを表示したり、ポリシー テンプレートからすばやくポリシーを展開したりすることができます。  </li><li>カバレッジ:  テナント内で最も頻繁にアクセスされるアプリケーションが、条件付きアクセスによって保護されていることを確認できます。  </li><li>監視: テナント内の各ポリシーの影響を視覚化し、フィルターを追加してゲスト アクセスやレガシー認証、危険なサインイン、管理外のデバイスなどの傾向を確認できます。 </li><li>チュートリアル: 一般的に導入されている条件付きアクセス ポリシーとそのベスト プラクティスについて学べます。  </li></ul><h3 id="条件付きアクセス-テンプレート"><a href="#条件付きアクセス-テンプレート" class="headerlink" title="条件付きアクセス テンプレート"></a>条件付きアクセス テンプレート</h3><p>さらに、マイクロソフトが推奨するベスト プラクティスに沿った新しいポリシーを展開する際、簡単にサンプルとして利用できる方法を提供し、進化する脅威への対応を支援するため、<strong>条件付きアクセス テンプレート</strong> を発表しました。これらのテンプレートは、ユーザーやデバイスを最大限に保護し、さまざまなユーザーの種類や場所で共通して使用可能なポリシーを作成するのに役立ちます。</p><p>14 種類の組み込みテンプレートから、新しいポリシーをすばやく作成できます (今後、お客様のご意見や新しい機能、新しい攻撃タイプへの対応に基づいてテンプレートを追加していきます)。テンプレートからポリシーを展開するのは簡単です。テンプレートを使用するだけでもよいかもしれませんが、テンプレートから始めて、ビジネス ニーズに合わせてカスタマイズしていくこともできます。  </p><p><img src="/blog/azure-active-directory/more-control-and-better-insights-for-your-zero-trust-deployments/2_CAtemplate.png" alt="図 1: 条件付きアクセス テンプレートの管理画面"></p><h3 id="デバイス用の条件付きアクセス-フィルター"><a href="#デバイス用の条件付きアクセス-フィルター" class="headerlink" title="デバイス用の条件付きアクセス フィルター"></a>デバイス用の条件付きアクセス フィルター</h3><p><a href="https://docs.microsoft.com/ja-jp/azure/active-directory/conditional-access/concept-condition-filters-for-devices">デバイス用のフィルター</a> を使用すると、デバイスの属性にもとづいて、一連のデバイスに条件付きアクセス ポリシーを適用できます。この機能により、重要なリソースへのアクセスに特権アクセスのワークステーションを必要とするなど、お客様が求めていた多くの新しいシナリオが実現します。また、デバイス フィルター条件を使用して、IoT デバイス (Teams ミーティング ルームを含む) の使用を保護することも可能です。Surface Hubs、Teams 電話、Teams 会議室をはじめ、あらゆる IoT デバイスに対応しています。Azure AD の動的グループや、Microsoft Endpoint Manager ですでに提供されているものと同じようにルール作成ができるよう、デバイス用のフィルターを設計しました。  </p><p>デバイス ID、表示名、モデル、モバイル デバイス管理 (MDM) のアプリ ID など、組み込みで用意されているデバイスのプロパティに加えて、最大 15 個の <a href="https://docs.microsoft.com/ja-jp/azure/active-directory/conditional-access/concept-condition-filters-for-devices">追加拡張属性</a> をサポートしています。ルール ビルダーを使えば、ブール論理を使ったデバイスのマッチング ルールを簡単に構築することができます。また、ルールの構文を直接編集して、より高度なマッチング ルールを実現することもできます。この新しい条件を用いることで、お客様の環境にてどのようなシナリオを実現できるのかとても楽しみです。</p><p><img src="/blog/azure-active-directory/more-control-and-better-insights-for-your-zero-trust-deployments/3_devicefilter.png" alt="図 2: デバイス用フィルターの管理画面"></p><h3 id="アプリケーション用フィルター"><a href="#アプリケーション用フィルター" class="headerlink" title="アプリケーション用フィルター"></a>アプリケーション用フィルター</h3><p>条件付きアクセスでは、デバイス用のフィルターに加えて、アプリケーション用のフィルターも使用できます。テナント上のアプリの数が爆発的に増えているため、大規模環境でアプリにポリシーを適用するための簡単な方法が必要だとの声をいただいています。アプリ用のフィルターを使用すると、カスタム セキュリティ属性にもとづいて、条件付きアクセスの対象アプリをより簡単に指定できます。一連のアプリにカスタム セキュリティ属性のタグを付けるだけで、すべてのアプリを個別に選択するのではなく、その属性を持つアプリに直接ポリシーを適用することができます。新しいアプリが導入された場合も、ポリシーを更新するのではなく、アプリに属性を追加するだけで済みます。</p><p>アプリ用のフィルターは、新しい Azure AD カスタム セキュリティ属性を使用します。カスタム セキュリティ属性は、組織ごとに作成および管理されるため、自社に適した属性を定義して、条件付きアクセスポリシーで使用することができます。また、カスタム セキュリティ属性は、豊富な委任モデルをサポートしています。アプリに特定の属性を追加できるユーザーを選択したり、アプリの所有者がこれらの属性を変更できないようにしたりすることも可能です。これにより、管理者がポリシーを変更したり、誤って変更したりすることなく、一連の管理者がアプリに条件付きアクセス ポリシーを簡単に導入し管理できるようになります。アプリ用の条件付きアクセス フィルターは、近日中にパブリック プレビュー版が公開される予定です。  </p><p><img src="/blog/azure-active-directory/more-control-and-better-insights-for-your-zero-trust-deployments/4_appfilter.png" alt="図 3: アプリ フィルター"></p><h3 id="診断設定での新しいエクスポート-オプション"><a href="#診断設定での新しいエクスポート-オプション" class="headerlink" title="診断設定での新しいエクスポート オプション"></a>診断設定での新しいエクスポート オプション</h3><p>Identity Protecion の豊富な検知機能とシグナルを元に、2 つの大きな改善を行い、リスク データを活用してお客様の環境の傾向を簡単に把握できるようにしました。</p><p>1 つ目の改善点は、<strong>診断設定</strong> の拡張です。リスク データをエクスポートするための新しい方法を追加しました。ワンクリックでリスクのあるユーザーやリスクの検出データを Log Analytics やサードパーティの SIEM に送信することができます。また、既定の保存期間を超えてデータを保持する必要がある場合には、数ヶ月分のデータをワンクリックでストレージ アカウントに送信できるようになりました。  </p><p><img src="/blog/azure-active-directory/more-control-and-better-insights-for-your-zero-trust-deployments/5_setting.png" alt="図 4: Identity Protection 診断設定の管理画面"></p><h3 id="リスク分析ワークブック"><a href="#リスク分析ワークブック" class="headerlink" title="リスク分析ワークブック"></a>リスク分析ワークブック</h3><p>また、組織内のリスクの傾向についてより深いインサイトを、簡単な設定で得たいというご要望もいただきました。そこで、Log Analytics と拡張された診断設定をベースに、Identity Protection のための新しい「リスク分析ワークブック」をリリースしました。このワークブックには、最も多く発生しているリスクの種類と、それらが発生している場所が示されています。さらに、お客様の環境で検出されたリスクにどれだけ効果的に対応しているかを可視化し、ポリシー設定を改善できるよう着目点を示すように支援します。  </p><p><img src="/blog/azure-active-directory/more-control-and-better-insights-for-your-zero-trust-deployments/6_heatmap.png" alt="図 5: ヒート マップ"></p><p>新しいワークブックを使用するには</p><ol><li>Azure ポータルにサインインします。  </li><li>[Azure Active Directory」→ [監視] タブ →「Workbooks」に移動します。  </li><li>[Identity Protection リスク分析] をクリックします。</li></ol><p>条件付きアクセスのこれらの新機能により、ゼロ トラストの導入がさらに容易になり、お客様にとって新しいシナリオが利用可能となれば幸いです。また、2 つの Identity Protection の機能は、シンプルでありながら強力なインサイトを備えており、お客様の環境をより把握するのに活用いただけると考えています。皆様からのフィードバックをお待ちしております。Microsoft Tech Community での会話に参加して、ご意見やご提案をお聞かせください。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは、 Azure Identity サポート チームの小出です。&lt;/p&gt;
&lt;p&gt;本記事は、 2021 年 11 月 30 日に米国の Azure Active Directory Identity Blog で公開された &lt;a href=&quot;https://techc</summary>
      
    
    
    
    
    <category term="Azure AD" scheme="https://jpazureid.github.io/blog/tags/Azure-AD/"/>
    
    <category term="US Identity Blog" scheme="https://jpazureid.github.io/blog/tags/US-Identity-Blog/"/>
    
  </entry>
  
  <entry>
    <title>ASP.NET アプリケーションの AAD 認証を v1 から v2 に変更する</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory/aspdotnet-from-v1-to-v2/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory/aspdotnet-from-v1-to-v2/</id>
    <published>2021-12-12T15:00:00.000Z</published>
    <updated>2022-01-31T04:07:17.291Z</updated>
    
    <content type="html"><![CDATA[<p>本記事は <a href="https://qiita.com/advent-calendar/2021/microsoft-azure-tech">Azure Tech Advent Calendar 2021</a> 13 日目の記事です。<br>Japan Azure Identity Support Blog では、お問合せの多い事象へのトラブルシューティング方法や、英文で公開された記事の日本語訳の情報を発信しています。<br>今回の記事では、たびたびお問い合わせいただくことのある ASP.NET + MVC + Azure AD 認証を構成しているアプリケーションを Azure AD 認証エンドポイント v1 から v2 に変更する際のポイントについて説明します。</p><h2 id="ASP-NET-アプリケーションの-Azure-AD-認証"><a href="#ASP-NET-アプリケーションの-Azure-AD-認証" class="headerlink" title="ASP.NET アプリケーションの Azure AD 認証"></a>ASP.NET アプリケーションの Azure AD 認証</h2><p>ASP.NET アプリケーションに Azure AD の組織アカウントを利用してサインインを追加する場合、Open Web Interface for .NET (OWIN) を利用することで簡単に実装することが可能です。 </p><p><a href="https://docs.microsoft.com/ja-jp/azure/active-directory/develop/tutorial-v2-asp-webapp">チュートリアル:ASP.NET Web アプリに Microsoft へのサインインを追加する</a> </p><p>また、Visual Studio のウィザードにて <strong>Microsoft ID プラットフォーム</strong> を選択することができますが、ウィザードに沿って構成することで Azure AD 認証に必要なコンポーネントや処理が自動的に追加されます。</p><p><img src="/blog/azure-active-directory/aspdotnet-from-v1-to-v2/01-wizard.png"></p><p>しかしながら、この自動的に追加される Azure AD 認証では Azure AD 認証エンドポイントの v1 が利用されています。<br>Azure AD の認証エンドポイントには v1 と v2 があり、v1 エンドポイントは比較的古いアプリケーションで利用されていることが多く、新しいアプリケーションを作成する場合には v2 の認証エンドポイントをご利用いただくことをおすすめしています。 </p><p>v1 エンドポイントと v2 エンドポイントの違いについては以下の資料をご覧ください。</p><p><a href="https://docs.microsoft.com/ja-jp/azure/active-directory/azuread-dev/azure-ad-endpoint-comparison#limitations">Microsoft ID プラットフォーム (v2.0) に更新する理由 # 制限事項</a> </p><p>Visual Studio のウィザードで作成されたアプリケーションの認証エンドポイントを v2 に変更するには、手動でプログラムを修正する必要があります。<br>本資料では修正のポイントをご紹介します。</p><h2 id="認証エンドポイントの変更"><a href="#認証エンドポイントの変更" class="headerlink" title="認証エンドポイントの変更"></a>認証エンドポイントの変更</h2><p>Visual Studio のウィザードで作成されたアプリケーションを変更するには、以下の変更が必要です。<br>なお、この点を変更するだけで以下のように v2 エンドポイントが利用されるよう変更されます。</p><p>変更前 </p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">https://login.microsoftonline.com/8778e49f-0123-0123-0123-f7c0aafd9f7b/oauth2/authorize?client_id=94cc007d-161c-4a66-8b11-dbcd971bfe16&amp;response_mode=form_post&amp;response_type=code+id_token&amp;scope=openid+profile&amp; ・・・省略・・・</span><br></pre></td></tr></table></figure><p>変更後</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">https://login.microsoftonline.com/8778e49f-0123-0123-0123-f7c0aafd9f7b/oauth2/v2.0/authorize?client_id=94cc007d-161c-4a66-8b11-dbcd971bfe16&amp;response_mode=form_post&amp;response_type=code+id_token&amp;scope=openid+profile+email&amp; ・・・省略・・・</span><br></pre></td></tr></table></figure><h3 id="認証エンドポイントを-v2-に変更する"><a href="#認証エンドポイントを-v2-に変更する" class="headerlink" title="認証エンドポイントを v2 に変更する"></a>認証エンドポイントを v2 に変更する</h3><p>Visual Studio のウィザードで作成されたアプリケーションでは、Web.config と Startup.Auth.cs で以下のように既定で実装されています。</p><p>Web.config</p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">appSettings</span>&gt;</span></span><br><span class="line">  ・・・ 省略 ・・・</span><br><span class="line">  <span class="tag">&lt;<span class="name">add</span> <span class="attr">key</span>=<span class="string">&quot;ida:AADInstance&quot;</span> <span class="attr">value</span>=<span class="string">&quot;https://login.microsoftonline.com/&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">add</span> <span class="attr">key</span>=<span class="string">&quot;ida:TenantId&quot;</span> <span class="attr">value</span>=<span class="string">&quot;8778e49f-0123-0123-0123-f7c0aafd9f7b&quot;</span> /&gt;</span></span><br><span class="line">  ・・・ 省略 ・・・</span><br><span class="line"><span class="tag">&lt;/<span class="name">appSettings</span>&gt;</span></span><br></pre></td></tr></table></figure><p>Startup.Auth.cs</p><figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="built_in">string</span> aadInstance = EnsureTrailingSlash(ConfigurationManager.AppSettings[<span class="string">&quot;ida:AADInstance&quot;</span>]);</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="built_in">string</span> tenantId = ConfigurationManager.AppSettings[<span class="string">&quot;ida:TenantId&quot;</span>];</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="built_in">string</span> authority = aadInstance + tenantId;</span><br></pre></td></tr></table></figure><p>上記の authority の定義において “/v2.0” の文字列を連携することで v2 エンドポイントが利用されるようになります。<br>もちろん別の方法でも対応できるかとは思いますが、この方法が最も容易かと思います。 </p><figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"><span class="comment">// private static string authority = aadInstance + tenantId;</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="built_in">string</span> authority = aadInstance + tenantId + <span class="string">&quot;/v2.0&quot;</span>;</span><br></pre></td></tr></table></figure><h2 id="ご参考-アクセス許可-scope-を明示する"><a href="#ご参考-アクセス許可-scope-を明示する" class="headerlink" title="ご参考 : アクセス許可 (scope) を明示する"></a>ご参考 : アクセス許可 (scope) を明示する</h2><p>もしプログラム側で Graph API などの利用を想定されている場合は、必要に応じて Scope プロパティに必要なアクセス許可をご指定ください。<br>実装としては、Startup.ConfigureAuth メソッド内で実装されている OpenIdConnectAuthenticationOptions オブジェクトの初期化において Scope プロパティを利用することで可能です。</p><figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">ConfigureAuth</span>(<span class="params">IAppBuilder app</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// ・・・ 省略 ・・・</span></span><br><span class="line">    app.UseOpenIdConnectAuthentication(</span><br><span class="line">        <span class="keyword">new</span> OpenIdConnectAuthenticationOptions</span><br><span class="line">        &#123;</span><br><span class="line">            ClientId = clientId,</span><br><span class="line">            Authority = authority,</span><br><span class="line">            PostLogoutRedirectUri = postLogoutRedirectUri,</span><br><span class="line">            Scope = <span class="string">&quot;openid profile User.Read&quot;</span> <span class="comment">// Microsoft Graph の User.Read を必要とする場合</span></span><br><span class="line">        &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>なお、OWIN は OpenID Connect ベースの認証を実現するためのミドルウェアです。<br>Microsoft Graph API などの呼び出しで利用するアクセス トークンは OWIN では取得することができないため、Microsoft Authentication Library (MSAL) を組み合わせて利用いただく必要があります。<br>MSAL を利用した具体的な実装につきましては以下のサンプルをご参照ください。</p><p><a href="https://docs.microsoft.com/ja-jp/learn/modules/msgraph-build-aspnetmvc-apps/">Microsoft Graph .NET SDK で ASP.NET MVC Web アプリケーションをビルドする</a></p><h2 id="参考-ID-トークンに含まれている内容"><a href="#参考-ID-トークンに含まれている内容" class="headerlink" title="参考: ID トークンに含まれている内容"></a>参考: ID トークンに含まれている内容</h2><p>この変更に伴い、v1 エンドポイントで取得した ID トークンに含まれていたはずの情報が v2 エンドポイントの時には含まれていない！ということが起こり得ます。この点が影響し、例えば、ASP.NET 側で User.Identity.Name プロパティでサインインしているユーザーの名前が取得できない事象が発生したりします。この差分を埋めるためにはさらに拡張が必要となります。</p><p>今回は User.Identity.Name を例として説明します。</p><h3 id="なぜ発生するか"><a href="#なぜ発生するか" class="headerlink" title="なぜ発生するか"></a>なぜ発生するか</h3><p>ASP.NET において User.Identity.Name のもととなる情報として、<a href="http://schemas.xmlsoap.org/ws/2005/05/identity/claims/">http://schemas.xmlsoap.org/ws/2005/05/identity/claims/</a> 名前空間の name クレーム (User.Identity.Claims プロパティで確認可能です) が利用されています。そして、この name クレームの情報は、v1 エンドポイントから取得可能な ID トークン内の “unique_name” 属性が利用されていました。</p><p><img src="/blog/azure-active-directory/aspdotnet-from-v1-to-v2/02-v1-id-token.png"></p><p>しかしながら、”unique_name” 属性は、以下の資料にも記載のあるとおり v2 エンドポイントでは含まれない属性となりました。</p><p><a href="https://docs.microsoft.com/ja-jp/azure/active-directory/develop/active-directory-optional-claims">アプリに省略可能な要求を提供する</a></p><h3 id="どのような対処が必要か"><a href="#どのような対処が必要か" class="headerlink" title="どのような対処が必要か"></a>どのような対処が必要か</h3><p>v2 エンドポイントでは、代わりに “preferred_username” 属性を含めることができます。このため、User.Identity.Name プロパティが正常に参照できるようにするには、この “preferred_username” 属性を利用するよう実装する必要があります。ただ、”preferred_username” 属性は既定では ID トークンに含まれないため、上記の資料のとおり “profile” のアクセス許可 (scope) を要求する必要があります。</p><p>“profile” のアクセス許可を含めて認証を実施することにより、”preferred_username” 属性が含まれる ID トークンを取得することが可能です。</p><p><img src="/blog/azure-active-directory/aspdotnet-from-v1-to-v2/03-v2-id-token.png"></p><p>しかしながら、この対処だけではまだ User.Identity.Name は null のままであり、また、<a href="http://schemas.xmlsoap.org/ws/2005/05/identity/claims/">http://schemas.xmlsoap.org/ws/2005/05/identity/claims/</a> 名前空間の name クレームも設定されていません。</p><p><a href="http://schemas.xmlsoap.org/ws/2005/05/identity/claims/">http://schemas.xmlsoap.org/ws/2005/05/identity/claims/</a> 名前空間の name クレームも設定されるようにするには、以下のような実装が必要となります。</p><ul><li>Scope プロパティを追加した OpenIdConnectAuthenticationOptions オブジェクトの初期化処理に Notifications プロパティを OpenIdConnectAuthenticationNotifications オブジェクトで初期化する処理を追加</li><li>OpenIdConnectAuthenticationNotifications オブジェクトを初期化する処理で SecurityTokenValidated プロパティにメソッドを設定</li><li>SecurityTokenValidated プロパティに設定したメソッドで “preferred_username” をもとに <a href="http://schemas.xmlsoap.org/ws/2005/05/identity/claims/">http://schemas.xmlsoap.org/ws/2005/05/identity/claims/</a> 名前空間の name クレームを追加する処理を追加</li></ul><p>具体的な内容は実装を見たほうが早いと思いますため、以下に実装例を記載します。<br>なお、Startup クラスは partial 宣言により複数のファイルに分割され定義されています。以下の実装は ConfigureAuth メソッドの実装が定義されている Startup.Auth.cs に行います。</p><figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">using</span> System.Threading.Tasks;</span><br><span class="line"><span class="keyword">using</span> Microsoft.Owin.Security.Notifications;</span><br><span class="line"><span class="keyword">using</span> Microsoft.IdentityModel.Protocols.OpenIdConnect;</span><br><span class="line"><span class="keyword">using</span> System.Security.Claims;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">partial</span> <span class="keyword">class</span> <span class="title">Startup</span></span><br><span class="line">&#123;</span><br><span class="line">    ・・・省略・・・</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">ConfigureAuth</span>(<span class="params">IAppBuilder app</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        ・・・省略・・・</span><br><span class="line">        app.UseOpenIdConnectAuthentication(</span><br><span class="line">            <span class="keyword">new</span> OpenIdConnectAuthenticationOptions</span><br><span class="line">            &#123;</span><br><span class="line">                ClientId = clientId,</span><br><span class="line">                Authority = authority,</span><br><span class="line">                PostLogoutRedirectUri = postLogoutRedirectUri,</span><br><span class="line">                Scope = <span class="string">&quot;openid profile&quot;</span>, <span class="comment">// オプション : ほかに必要なアクセス許可があれば併せて指定します</span></span><br><span class="line">                Notifications = <span class="keyword">new</span> OpenIdConnectAuthenticationNotifications()</span><br><span class="line">                &#123;</span><br><span class="line">                    SecurityTokenValidated = OnSecurityTokenValidated,</span><br><span class="line">                &#125;,</span><br><span class="line">            &#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Task <span class="title">OnSecurityTokenValidated</span>(<span class="params">SecurityTokenValidatedNotification&lt;OpenIdConnectMessage, OpenIdConnectAuthenticationOptions&gt; args</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">string</span> nameClaimType = <span class="string">&quot;http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name&quot;</span>;</span><br><span class="line">        <span class="built_in">string</span> preferredUsernameClaimType = <span class="string">&quot;preferred_username&quot;</span>;</span><br><span class="line"></span><br><span class="line">        Claim nameClaim = args.AuthenticationTicket.Identity.Claims.FirstOrDefault(claim =&gt; claim.Type == nameClaimType);</span><br><span class="line">        Claim preferredUsernameClaim = args.AuthenticationTicket.Identity.Claims.FirstOrDefault(claim =&gt; claim.Type == preferredUsernameClaimType);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (nameClaim == <span class="literal">null</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (preferredUsernameClaim != <span class="literal">null</span> &amp;&amp; !String.IsNullOrEmpty(preferredUsernameClaim.Value))</span><br><span class="line">            &#123;</span><br><span class="line">                args.AuthenticationTicket.Identity.AddClaim(<span class="keyword">new</span> Claim(nameClaimType, preferredUsernameClaim.Value));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> Task.CompletedTask;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>このように構成することにより、<a href="http://schemas.xmlsoap.org/ws/2005/05/identity/claims/">http://schemas.xmlsoap.org/ws/2005/05/identity/claims/</a> 名前空間の name クレームに “preferred_username” 属性の内容を反映させることが可能です。 </p><p><img src="/blog/azure-active-directory/aspdotnet-from-v1-to-v2/05-user-identity-claims.png"></p><p>もちろん、User.Identity.Name も取得できます！ </p><p><img src="/blog/azure-active-directory/aspdotnet-from-v1-to-v2/04-user-identity-name.png"></p><p>ほかにも必要な属性がありましたら、上記の資料を基にアクセス許可 (scope) を要求する、もしくは、[Azure ポータル] &gt; [Azure Active Directory] &gt; [アプリの登録] &gt; 対象のアプリ &gt; [トークン構成] にて “オプションの要求の追加” から登録することをご検討ください。</p><hr><p>いかがでしたでしょうか。<br>ASP.NET アプリケーションにおいて v1 から v2 への移行する際の一助となりましたら幸いです。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;本記事は &lt;a href=&quot;https://qiita.com/advent-calendar/2021/microsoft-azure-tech&quot;&gt;Azure Tech Advent Calendar 2021&lt;/a&gt; 13 日目の記事です。&lt;br&gt;Japan Azure</summary>
      
    
    
    
    
    <category term="Azure AD" scheme="https://jpazureid.github.io/blog/tags/Azure-AD/"/>
    
  </entry>
  
  <entry>
    <title>フェデレーション環境 (Windows 統合認証) で [サインインの状態を維持しますか？] の画面が表示されない</title>
    <link href="https://jpazureid.github.io/blog/active-directory-federation-service/kmsi-not-shown-wia/"/>
    <id>https://jpazureid.github.io/blog/active-directory-federation-service/kmsi-not-shown-wia/</id>
    <published>2021-12-10T15:00:00.000Z</published>
    <updated>2022-01-31T04:07:17.063Z</updated>
    
    <content type="html"><![CDATA[<div class="alert is-info"><p class="alert-title">Note</p><p>2021 年 12 月 11 日更新: 以前のサインイン エクスペリエンスの内容を削除し、条件付きアクセスにて提供されている永続的なブラウザー セッションについて追記しました。</p></div><p>こんにちは、Azure ID サポートチームの高田です。</p><p>本日は、Azure AD のサインイン画面の変更とそれに伴うフェデレーション環境への影響についておまとめしました。</p><h2 id="Azure-AD-にサインインする際の「サインイン状態を維持しますか？」の画面"><a href="#Azure-AD-にサインインする際の「サインイン状態を維持しますか？」の画面" class="headerlink" title="Azure AD にサインインする際の「サインイン状態を維持しますか？」の画面"></a>Azure AD にサインインする際の「サインイン状態を維持しますか？」の画面</h2><p>Azure AD へのサインイン時に以下のような「サインイン状態を維持しますか？」の画面が表示される場合がございます。</p><p><img src="/blog/active-directory-federation-service/kmsi-not-shown-wia/new-signin-page-kmsi.png"></p><p>この [サインインの状態を維持しますか？] の画面は、基本的に Azure AD の [会社のブランド] から構成できる [サインインしたままにするオプションを表示する] の設定が [はい] の場合に表示されます。既定ではこのオプションは [はい] の状態で、明示的に [いいえ] にしていない限り、基本的に上記の [サインインの状態を維持しますか？] の画面が表示されることとなります (オプションを [いいえ] にした場合、[サインインの状態を維持しますか？] の画面は表示されず、サインイン状態は維持されない動作です)。</p><p>※ [会社のブランド] を構成する手順につきましては、下記の公開情報を参照ください。</p><p>クイック スタート: Azure AD のサインイン ページに会社のブランドを追加する<br><a href="https://docs.microsoft.com/ja-jp/azure/active-directory/customize-branding">https://docs.microsoft.com/ja-jp/azure/active-directory/customize-branding</a></p><p>この [サインインの状態を維持しますか？] の画面は、 [サインインしたままにするオプションを表示する] オプションを [はい] にしていても、以下の場合に表示されません。</p><ol><li>Azure AD がユーザーのサインインをリスクのある状態と判断した場合</li><li>フェデレーション ユーザーにてサインインを試行し、AD FS にて Windows 統合認証が用いられた場合</li></ol><p>上記 1 については、同一のマシンを複数人で共有していたり、短時間に長距離を移動したユーザーが該当します。リスクの高いサインインについては以下の資料も参考にしていただければと思います。</p><p>Azure Active Directory ポータルのリスクの高いサインイン レポート<br><a href="https://docs.microsoft.com/ja-jp/azure/active-directory/active-directory-reporting-security-risky-sign-ins">https://docs.microsoft.com/ja-jp/azure/active-directory/active-directory-reporting-security-risky-sign-ins</a></p><p>上記 2 は、社内にいるユーザーが AD FS を利用してサインインする場合を示しています。Windows 統合認証を用いてサインインする場合、ユーザーから見るとアプリケーションへのアクセスから Azure AD へのリダイレクト、さらに AD FS へのリダイレクト後の Windows 統合認証がすべて自動的に完了する流れとなります。[サインインの状態を維持しますか？] の画面は、一連の処理の流れを止めることとなるため、Windows 統合認証の場合に表示されないよう実装されました。AD FS にて Windows 統合認証が用いられたとき、[サインインの状態を維持しますか？] の選択は表示されませんが、選択としては [いいえ] の状態で認証が完了しています。このため、サインインの状態は維持されません (Azure AD から永続的なブラウザー セッションは確立されません)。</p><p>AD FS を利用する場合でも、社内からではなく外部から WAP (Web Application Proxy) を介してアクセスするような場合や、社内からのアクセスであっても、Firefox 等、AD FS の標準設定では Windows 統合認証が使用できないブラウザーをお使いの場合は、フォーム認証が用いられます。このときは、上記 1 に合致していない状況であれば [サインインの状態を維持しますか？] の画面が表示されます。</p><h2 id="AD-FS-で-Windows-統合認証が行われた場合もサインインの状態を維持させる方法"><a href="#AD-FS-で-Windows-統合認証が行われた場合もサインインの状態を維持させる方法" class="headerlink" title="AD FS で Windows 統合認証が行われた場合もサインインの状態を維持させる方法"></a>AD FS で Windows 統合認証が行われた場合もサインインの状態を維持させる方法</h2><p>フェデレーション環境をお持ちのお客様において、AD FS で Windows 統合認証が行われた場合もサインインの状態を維持したい (Azure AD から永続的なブラウザー セッションを確立したい) とお考えのお客様においては、以下 A もしくは B のいずれかの対応を実施ください。Azure AD 側の構成変更 (条件付きアクセスでの対応) をご要望の場合は A の方法を、AD FS 側の構成変更で対応されたい場合は B の方法をご利用ください。</p><h3 id="A-Azure-AD-条件付きアクセス-ポリシーを使用した方法"><a href="#A-Azure-AD-条件付きアクセス-ポリシーを使用した方法" class="headerlink" title="A. Azure AD 条件付きアクセス ポリシーを使用した方法"></a>A. Azure AD 条件付きアクセス ポリシーを使用した方法</h3><p>以下では、Azure AD 側の条件付きアクセスポリシーを設定することで、永続的なブラウザー セッションを確立する方法をお知らせします。現在多くのお客様が AD FS の利用を廃止し、Azure AD 上での認証に移行 (フェデレーション ドメインからマネージド ドメインへの移行) を進めていらっしゃいます。これに伴い、AD FS 側には極力手を加えたくないというお客様も多いと思います。本方法では、AD FS 側の変更はなく、Azure AD 側の条件付きアクセス ポリシーを構成することで、AD FS にて Windows 統合認証が利用された時も Azure AD から永続的なブラウザー セッションを確立します。</p><p>条件付きアクセス ポリシーを構成するため、以下の手順を実施ください。</p><ol><li><a href="https://portal.azure.com/">Azure ポータル</a> に条件付きアクセス管理者ロールに相当するユーザーでサインインします。</li><li>[Azure Active Directory] のブレードを開き、[セキュリティ] から [条件付きアクセス] を選択します。</li><li>[ポリシー] ブレードで [+ 新しいポリシー] から [新しいポリシーを作成する] を選択します。</li><li>ポリシーの名前に KMSI (Keep Me Signed in) などの名前を付けます。</li><li>[ユーザーまたはワークロード ID] から Azure AD と永続的なブラウザー セッションを確立したいユーザーを選択します。</li><li>[クラウド アプリまたは操作] にて [すべてのクラウド アプリ] を選択します。</li><li>[セッション] にて、[永続的なブラウザー セッション] にチェックを付けます。</li><li>プルダウンメニューから [常に永続的] を選び、画面下の [選択] を押下します。</li><li>[ポリシーの有効化] を [オン] にして [作成] ボタンを押下します。</li></ol><p>以上の操作により、指定されたユーザーについては、AD FS にて Windows 統合認証が利用されていたとしてもユーザーのブラウザーには永続的なブラウザーセッションが確立され、ユーザーのサインイン状態が維持されます。</p><p>なお、この設定は [すべてのクラウド アプリ] が選択されている場合に正しく動作します。また、[会社のブランド] の [サインイン状態を維持するためのオプションを表示する] ポリシーは本設定によりオーバーライドされます。さらに、[永続的にしない] を選ぶと、後述する AD FS から渡される永続的 SSO (psso) クレームもオーバーライドされます。つまり、[永続的にしない] を選んだ場合、AD FS 側で psso を発行する発行変換規則が構成されていても、Azure AD 側でそのクレームを無効化することも可能です。</p><h3 id="B-AD-FS-のクレーム-ルールを使用した方法"><a href="#B-AD-FS-のクレーム-ルールを使用した方法" class="headerlink" title="B. AD FS のクレーム ルールを使用した方法"></a>B. AD FS のクレーム ルールを使用した方法</h3><p>以下では AD FS 側でクレーム ルールを変更し、組織内からの認証の場合は、永続的 SSO (psso) と呼ばれるクレームをトークンに含めるように構成します。これを受け取った Azure AD は、サインイン状態を維持させるようクライアントと永続的なブラウザー セッションを確立します。この際、「サインイン状態を維持しますか？」画面は表示されませんが、サインイン状態が維持されます ([サインインの状態を維持しますか？] 画面で手動にて [はい] を押下したのと同じ状態となります)。</p><p>AD FS サーバー上の手順を以下におまとめいたしましたので、ご確認いただけますと幸いです。</p><ol><li><p>AD FS サーバーに管理者でログオンします。</p></li><li><p>AD FS の管理コンソールを開きます。</p></li><li><p>画面左側のツリーから [証明書利用者信頼] を選択します。</p></li><li><p>[Microsoft Office 365 Identity Platform] を右クリックし、[発行変換規則の編集] から [規則の追加] をクリックします。</p></li><li><p>ウィザードでドロップダウンから [カスタム規則を使用して要求を送信] を選択し、[次へ] をクリックします。</p></li><li><p>[要求規則名] の下のボックスに Keep Users Signed In と入力し、次に進みます。</p></li><li><p>[カスタム規則:] ボックスに次のように入力します。</p> <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">c:[Type == &quot;http://schemas.microsoft.com/ws/2012/01/insidecorporatenetwork&quot;, Value == &quot;true&quot;]</span><br><span class="line">=&gt; issue(Type = &quot;http://schemas.microsoft.com/2014/03/psso&quot;, Value = &quot;true&quot;);</span><br></pre></td></tr></table></figure></li><li><p>[完了]をクリックし、ウィザードを終了します。</p></li></ol><p>上記クレーム ルールを追加しますと、社内からの (WAP を経由しない) アクセスの場合は、<a href="http://schemas.microsoft.com/2014/03/psso">http://schemas.microsoft.com/2014/03/psso</a> のクレームが AD FS の発行するトークンに追加されます。トークンを受け取った Azure AD はこのクレームを確認し、永続的なブラウザーセッションをクライアントと確立します。AD FS ファーム全体 (全ユーザー) が対象となるルールですが、新しく psso のクレームを追加するだけですので、既存のクレーム ルールに影響を及ぼすことはありません。また、上記ウィザードの完了後すぐに効果が及びます。</p><p>なお、クレームルールの追加により予期しない動作が生じた場合は、追加したルールを削除すれば元に戻すことが可能ですので、その際は、追加したルールを削除することで対応ください。</p><p><strong>2018/02/21 追記:</strong></p><p>上記設定は、発行変換規則に対するものです。アクセス制御に影響する発行承認規則には変更を加えません。このため、上記設定を行っても既存のクレーム ルールでのアクセス制御に影響を及ぼすことはありません。上記設定を実施後に、これまで動作していたアクセスがブロックされるなどの影響が起きることはないとお考えください。影響が及ぶのは Azure AD が永続的なブラウザー セッションをクライアントと確立し、サインイン状態が維持されるという点のみです。</p><p><strong>2018/02/26 追記:</strong></p><p>クレーム ルールを制御することで、<a href="http://schemas.microsoft.com/2014/03/psso">http://schemas.microsoft.com/2014/03/psso</a> のクレームを有効にする対象ユーザーを制御することが可能です。例えば以下のようにしてクレーム ルールを指定すれば、社内からのアクセスで、さらに指定したグループにユーザーが含まれている場合のみ psso を有効にできます。</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">c1:[Type == &quot;http://schemas.microsoft.com/ws/2012/01/insidecorporatenetwork&quot;, Value == &quot;true&quot;]</span><br><span class="line">&amp;&amp; c2:[Type == &quot;http://schemas.microsoft.com/ws/2008/06/identity/claims/groupsid&quot;, Value == &quot;S-1-5-21-4118385845-2129555445-158388420-1121&quot;]</span><br><span class="line">=&gt; issue(Type = &quot;http://schemas.microsoft.com/2014/03/psso&quot;, Value = &quot;true&quot;);</span><br></pre></td></tr></table></figure><p>上記のうち、S-1-5-21-4118385845-2129555445-158388420-1121 の箇所にご要望のグループの SID を指定ください。グループの SID は、[Active Directory ユーザーとコンピューター] や PowerShell の Get-ADGroup コマンドレットからご確認いただけます。</p><p><strong>2018/03/06 追記:</strong></p><p>以上の内容は、Windows Server 2012 R2 以降の AD FS を対象とした手順です。Windows Server 2008 R2 および 2012 の AD FS をご利用の場合は以下のようにします。</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">NOT exists([Type == &quot;http://schemas.microsoft.com/2012/01/requestcontext/claims/x-ms-proxy&quot;])</span><br><span class="line">=&gt; issue(Type = &quot;http://schemas.microsoft.com/2014/03/psso&quot;, Value = &quot;true&quot;);</span><br></pre></td></tr></table></figure><p>なお、Windows Server 2008 R2 で x-ms-proxy クレームを利用するには AD FS 2.0 ロールアップ 3 の適用が必要です (要 OS 再起動)。</p><p>Description of Update Rollup 3 for Active Directory Federation Services (AD FS) 2.0<br><a href="https://support.microsoft.com/ja-jp/help/2790338/description-of-update-rollup-3-for-active-directory-federation-service">https://support.microsoft.com/ja-jp/help/2790338/description-of-update-rollup-3-for-active-directory-federation-service</a></p><p>上記内容が少しでもお客様の参考となりますと幸いです。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;div class=&quot;alert is-info&quot;&gt;&lt;p class=&quot;alert-title&quot;&gt;Note&lt;/p&gt;&lt;p&gt;2021 年 12 月 11 日更新: 以前のサインイン エクスペリエンスの内容を削除し、条件付きアクセスにて提供されている永続的なブラウザー セッションにつ</summary>
      
    
    
    
    
    <category term="AD FS" scheme="https://jpazureid.github.io/blog/tags/AD-FS/"/>
    
    <category term="Azure AD" scheme="https://jpazureid.github.io/blog/tags/Azure-AD/"/>
    
  </entry>
  
  <entry>
    <title>ID の保護をより広範囲に</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory/more-coverage-to-protect-your-identities/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory/more-coverage-to-protect-your-identities/</id>
    <published>2021-12-07T21:00:00.000Z</published>
    <updated>2022-01-31T04:07:17.515Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Azure Identity サポート チームの 高田 です。</p><p>本記事は、2021 年 11 月 29 日に米国の Azure Active Directory Identity Blog で公開された <a href="https://techcommunity.microsoft.com/t5/azure-active-directory-identity/more-coverage-to-protect-your-identities/ba-p/2365685">AMore coverage to protect your identities</a> を意訳したものになります。ご不明点等ございましたらサポート チームまでお問い合わせください。</p><hr><p><a href="https://myignite.microsoft.com/sessions/fe5951da-9fa5-4e09-b529-007fff7a2add?source=sessions">Microsoft Ignite 2021</a> では、激化する ID への攻撃から守るために、Microsoft がサイバー セキュリティのコミュニティとどのように協力してきたかを紹介しました。今回のブログ記事では、<a href="https://docs.microsoft.com/ja-jp/azure/active-directory/identity-protection/overview-identity-protection">Azure Active Directory (AD) Identity Protection</a> と <a href="https://docs.microsoft.com/ja-jp/azure/active-directory/conditional-access/overview">条件付きアクセス</a> について発表された ID セキュリティ機能について深く掘り下げてみたいと思います。これらの ID セキュリティ機能は以下のような機能を提供します。</p><ul><li>新たな脅威の見える化 (Identity Protection におけるトークン窃取の検出)</li><li>ほぼリアルタイムでの保護 (継続的なアクセス評価)</li><li>ワークロード ID への保護の拡張 (ワークロード ID 用の条件付きアクセス)</li></ul><h2 id="新たな攻撃手段の検出-トークン窃取の検出"><a href="#新たな攻撃手段の検出-トークン窃取の検出" class="headerlink" title="新たな攻撃手段の検出: トークン窃取の検出"></a>新たな攻撃手段の検出: トークン窃取の検出</h2><p>攻撃者はトークンを窃取して再利用し、被害をうけるリソースに継続的にアクセスしたり、取得済みの多要素認証のクレームを取得して高い権限を取得したりする場合が増えています。トークンの窃取は、主にマルウェアや MITM (Machine-In-The-Middle) のフィッシング攻撃によって行われています。攻撃者はユーザーやアプリなどの ID からトークンを盗むと、それを使って ID になりすまし、データを盗むことができます。</p><p><img src="/blog/azure-active-directory/more-coverage-to-protect-your-identities/illustration-of-how-token-theft-happens.png" alt="図 1: トークンの窃取発生時の図解"></p><p>Ignite では、トークンの再利用について管理者に警告する <strong>2 つの新しい検出機能</strong> の一般提供を発表しました。それぞれ「<strong>異常なトークン</strong>」と「<strong>セッション クッキーの通常とは異なるサインイン プロパティ</strong>」です。これらの新しい検出機能は、トークン内のクレーム、トークンが発行されてからの時間、およびその他の認証属性に異常がないかを確認します。これらのリスクが検出された場合、まずはユーザーのアクティブなトークンを失効させ、トークンがどのように盗まれたかを評価し、マルウェアが存在する場合はそれを除去するまでユーザーのアクセスをブロックするようご対応ください。アクティブなトークンの失効については、Revoke-AzureADUserAllRefreshToken の PowerShell コマンドレットを使用いただけます。</p><p><img src="/blog/azure-active-directory/more-coverage-to-protect-your-identities/new-token-detection-image.png" alt="図 2: 異常なトークンとトークン発行者の異常が検出された際の管理画面"></p><p>トークン再利用の検知と防止に加えて、トークンの窃取を検知して対応する機能を開発しています。次の検知機能である <strong>トークン発行者の異常</strong> は、攻撃者がトークンを自由に発行できてしまう、侵害されたオンプレミスの SAML ID プロバイダーを特定するための最初の取り組みとなります。この検出結果を調査した結果、攻撃があったと判断した場合は次のことを行うようお勧めします。</p><ul><li>署名証明書の不正使用の原因を特定し排除する。</li><li>すべての <a href="https://docs.microsoft.com/ja-jp/azure/active-directory/manage-apps/manage-certificates-for-federated-single-sign-on">SAML トークン署名証明書</a> を入れ替える。</li><li>Revoke-AzureADUserAllRefreshToken の PowerShell コマンドレットを使用してアクティブなトークンを取り消す。</li><li>AD FS を使用している場合は、<a href="https://docs.microsoft.com/ja-jp/windows-server/identity/ad-fs/deployment/best-practices-securing-ad-fs">AD FS と Web Application Proxy の安全性を確保するためのベスト プラクティス</a> を確認する。</li><li><a href="https://aka.ms/protectm365">https://aka.ms/protectm365</a> に基づきオンプレミスの SAML 信頼への依存度を減らす。</li><li><a href="https://docs.microsoft.com/ja-jp/azure/dedicated-hsm/faq">HSM を使用して SAML トークン署名証明書を管理</a> する。</li></ul><h2 id="ほぼリアルタイムでのポリシー適用-継続的なアクセス評価"><a href="#ほぼリアルタイムでのポリシー適用-継続的なアクセス評価" class="headerlink" title="ほぼリアルタイムでのポリシー適用: 継続的なアクセス評価"></a>ほぼリアルタイムでのポリシー適用: 継続的なアクセス評価</h2><p>新しい検知機能は、セッションや更新トークンが悪意を持って再利用された際の検知に有効です。しかし、認証プロトコルでは、トークンをチェックするのはそれらが更新されたときのみです (アクセス トークンの場合、通常 1 時間に 1 回程度)。つまり、ユーザーやポリシーの状態の変化を検知するには、更新間隔の時間分だけ遅れてしまうのです。<a href="https://docs.microsoft.com/ja-jp/azure/active-directory/conditional-access/concept-continuous-access-evaluation">継続的なアクセス評価 (CAE)</a> は、Azure AD がアプリとのやり取りを維持して、そのギャップを解消するための仕組みです。CAE は、ユーザーのサインインがブロックされたり、信頼できない場所に移動したり、ユーザーのリスクが検出されたりするなど、条件の変化にリスクが生じた場合に、リアルタイムでアクセスを取り消すことができます。</p><p>例えば、CAE を有効にして、信頼できない IP 範囲やマルウェアに感染したデバイスをブロックするように条件付きアクセス ポリシーを構成することができます。これを有効にすると、信頼できる IP 範囲にある感染したデバイスから盗まれたトークンは、信頼できる範囲外で再利用されると拒否されます (悪意があると想定されるため)。このようなことが起こる前であっても、トークンを盗んでいるマルウェアが検出された場合、トークンを無効にすることができます。CAE と Identity Protection が連携することで、定義した条件以外でのトークンの再利用をブロックし、トークンの再利用が試みられた場合には、それを検知して自動的に修復します。CAE は、<strong>2021 年末までに一般提供</strong> を開始する予定です。それ以降は、CAE の構成を何も変更していない場合は、デフォルトで CAE が有効になります (何か構成を変更している場合は、その設定が尊重されます)。それまでは、条件付きアクセス配下の設定で CAE の構成を変更することができます。</p><h2 id="保護の範囲をさらに拡大-ワークロード-ID-用の条件付きアクセス"><a href="#保護の範囲をさらに拡大-ワークロード-ID-用の条件付きアクセス" class="headerlink" title="保護の範囲をさらに拡大: ワークロード ID 用の条件付きアクセス"></a>保護の範囲をさらに拡大: ワークロード ID 用の条件付きアクセス</h2><p>洗練され、組織的で様々な手法を組み合わせた攻撃が増加しています。そのため、すべての企業や組織にとって、<a href="https://docs.microsoft.com/ja-jp/security/zero-trust/">ゼロ トラスト戦略</a> が必須となっています。ゼロ トラストの中核となるのが、Azure AD 条件付きアクセスであり、この機能ではすべての ID に対して明示的に検証を行います。人間の ID を保護するだけでなく、アプリやサービス プリンシパルなどのワークロード ID を用いたアプリのみの認証も保護するように、条件付きアクセスの機能を拡張しています。環境内のワークロード ID を保護することは、悪意のある人物がこれらの ID を侵害および使用して環境にアクセスすることを防ぐために重要です。</p><p><a href="https://docs.microsoft.com/ja-jp/azure/active-directory/conditional-access/workload-identity">ワークロード ID 用の条件付きアクセス</a> では、信頼できるネットワーク外からの認証をブロックすることで、サービス プリンシパルの不正使用を防ぐことができます。ワークロード ID のための条件付きアクセスは、現在パブリック プレビュー中です。</p><p><img src="/blog/azure-active-directory/more-coverage-to-protect-your-identities/admin-experience-for-conditional-access-for-workload-identities.png" alt="図 3: ワークロード ID 用の条件付きアクセスの管理画面"></p><p>Microsoft Ignite 2021 をお楽しみいただけておりましたら幸いです。質問やコメントがありましたら、お声がけください。皆様からのフィードバックをお待ちしております。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは、Azure Identity サポート チームの 高田 です。&lt;/p&gt;
&lt;p&gt;本記事は、2021 年 11 月 29 日に米国の Azure Active Directory Identity Blog で公開された &lt;a href=&quot;https://techc</summary>
      
    
    
    
    
    <category term="Azure AD" scheme="https://jpazureid.github.io/blog/tags/Azure-AD/"/>
    
    <category term="US Identity Blog" scheme="https://jpazureid.github.io/blog/tags/US-Identity-Blog/"/>
    
  </entry>
  
  <entry>
    <title>条件付きアクセスにワークロード ID を対象とする機能がプレビューとして追加されました</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory/introducing-ca-for-workload-id/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory/introducing-ca-for-workload-id/</id>
    <published>2021-12-07T08:00:00.000Z</published>
    <updated>2022-01-31T04:07:17.471Z</updated>
    
    <content type="html"><![CDATA[<p>本記事は <a href="https://qiita.com/advent-calendar/2021/microsoft-azure-tech">Azure Tech Advent Calendar 2021</a> 7 日目の記事です。<br>Japan Azure Identity Support Blog では、お問合せの多い事象へのトラブルシューティング方法や、英文で公開された記事の日本語訳の情報を発信しています。今回の記事では、以下のプレビュー機能の紹介となります。</p><p>ワークロード ID 用の条件付きアクセス (プレビュー)<br><a href="https://docs.microsoft.com/ja-jp/azure/active-directory/conditional-access/workload-identity">https://docs.microsoft.com/ja-jp/azure/active-directory/conditional-access/workload-identity</a></p><p>従来、条件付きアクセスは “ユーザー” の “リソース” へのサインインを制御する機能でした。今回のプレビューによって、”ワークロード ID” というサービス プリンシパルのサインインに対して IP アドレス ベースの制御を構成することが可能になりました。</p><p>この記事は、2021/12 の記事作成時点における公開情報の内容を補足することを目的としています。最新の情報については、公開情報のページを確認ください。<br>まずは、この機能の対象について、Azure の利用者向けの補足になるような情報をまとめています。後半には、Azure AD の管理者寄りの情報を記載しています。</p><h2 id="ワークロード-ID-と該当するサインインの操作について"><a href="#ワークロード-ID-と該当するサインインの操作について" class="headerlink" title="ワークロード ID と該当するサインインの操作について"></a>ワークロード ID と該当するサインインの操作について</h2><p>この機能で制御対象となるのは、例えば、以下の方法を利用したサインインです。</p><ul><li><code>az login --service-principal -u &lt;app-id&gt; -p &lt;password-or-cert&gt; --tenant &lt;tenant&gt;</code><br>参考 : <a href="https://docs.microsoft.com/ja-jp/cli/azure/authenticate-azure-cli#sign-in-with-a-service-principal">Azure CLI を使用してサインインする</a></li><li><code>Connect-AzAccount -CertificateThumbprint $Thumbprint -ApplicationId $ApplicationId -Tenant $TenantId -ServicePrincipal</code><br>参考 : <a href="https://docs.microsoft.com/en-us/powershell/module/az.accounts/Connect-AzAccount?view=azps-6.6.0#example-7--connect-using-certificates">Connect-AzAccount</a></li><li><code>Connect-AzureAD -TenantId $tenant.ObjectId -ApplicationId  $sp.AppId -CertificateThumbprint $thumb</code><br>参考 : <a href="https://docs.microsoft.com/en-us/powershell/module/azuread/connect-azuread?view=azureadps-2.0#example-3--connect-a-session-as-a-service-principal">Connect-AzureAD</a></li></ul><p>これらのサインインでは、ユーザーの資格情報なしにサービス プリンシパルの権限でサインインを行います。この場合、事前にサブスクリプションやテナントの管理者がサービス プリンシパルに対しリソースへのアクセス権を付与し、サービス プリンシパルはその権限の範囲でリソースアクセスが可能となります。<br>このようにユーザー操作を必要とせずサービス プリンシパルに割り当てられた権限を利用し、定期的に情報を取得したり、リソースを変更するようなバッチ処理を行うようなアプリをワークロード ID と呼んでいます。</p><p>ワークロード ID は、ユーザーとは異なり、バッチ処理を行うスクリプト内、もしくはマシンにアプリケーションの資格情報が保存されています。<br>環境内のワークロード ID を保護することは、悪意のある人物がこれらの ID を侵害し、不正にアクセスすることを防ぐために重要です。<br>ワークロード ID の条件付きアクセスでは、<strong>信頼できるネットワーク外からの認証をブロックすることで、サービス プリンシパルの不正使用を防ぐことができます。</strong></p><p>現時点におけるワークロード ID と判別されるアプリケーションは、シングルテナント アプリケーションのみです。<br>シングル テナントアプリケーションが登録されるのは、Azure Portal から登録する際に、<code>Azure Active Directory</code> &gt; <code>アプリの登録</code> &gt; <code>+ 新規登録</code>  からアプリを追加する際に <strong>“この組織ディレクトリのみに含まれるアカウント”</strong> を選択して作成した場合です。</p><p><img src="/blog/azure-active-directory/introducing-ca-for-workload-id/1_signInAudience.png" alt="signInAudience の確認"></p><p>上記以外にも、以下のコマンドで作成されたアプリケーションなども該当します。</p><p><code>az ad sp create-for-rbac</code><br>参考 : <a href="https://docs.microsoft.com/en-us/cli/azure/ad/sp?view=azure-cli-latest">az ad sp</a></p><p>現時点では、次の分類のサービス プリンシパルはワークロード ID には含まれません。</p><ul><li>マネージド ID</li><li>マルチテナント アプリケーション (サードパーティー の SaaS アプリ)</li><li>マイクロソフトが提供するサービスが動作するためのアプリケーション</li></ul><h2 id="制御対象となったときの動作"><a href="#制御対象となったときの動作" class="headerlink" title="制御対象となったときの動作"></a>制御対象となったときの動作</h2><p>ワークロード ID 用の条件付きアクセスの機能によってサインインがブロックされたとき、Azure AD から 400 エラーとともに、次に例示するメッセージが返されます。</p><figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">&quot;error&quot;</span>: <span class="string">&quot;invalid_grant&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;error_description&quot;</span>: <span class="string">&quot;AADSTS53003: Access has been blocked by Conditional Access policies. The access policy does not allow token issuance.\r\nTrace ID: a50bbe59-dd02-42f6-b6b1-3931021e0f02\r\nCorrelation ID: 355da6cc-ab30-4456-91aa-0be3e8e0925c\r\nTimestamp:****&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;error_codes&quot;</span>: [</span><br><span class="line">        <span class="number">53003</span></span><br><span class="line">    ],</span><br><span class="line">    <span class="attr">&quot;timestamp&quot;</span>: <span class="string">&quot;****&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;trace_id&quot;</span>: <span class="string">&quot;a50bbe59-dd02-42f6-b6b1-3931021e0f02&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;correlation_id&quot;</span>: <span class="string">&quot;355da6cc-ab30-4456-91aa-0be3e8e0925c&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;error_uri&quot;</span>: <span class="string">&quot;https://login.microsoftonline.com/error?code=53003&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;suberror&quot;</span>: <span class="string">&quot;message_only&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;claims&quot;</span>: <span class="string">&quot;&#123;\&quot;access_token\&quot;:&#123;\&quot;capolids\&quot;:&#123;\&quot;essential\&quot;:true,\&quot;values\&quot;:[\&quot;da9d1d9d-2cf5-498f-8463-69025e65fe48\&quot;]&#125;&#125;&#125;&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>AADSTS53003 は、条件付きアクセスによってサインインがブロックされたときに表示されるメッセージです。<br>条件付きアクセスは、組織の管理者によって設定されています。現状 IP アドレスの制御のみが構成できるため、現在の実行環境からのアクセスがブロックされるように構成されている可能性があります。<br>ポリシーを変更する権限を持たない場合は、アクセス可能なように設定変更することはできないため、必要に応じてテナント内で権限を持つ管理者に確認ください。</p><h2 id="ポリシーの設定に関連する補足"><a href="#ポリシーの設定に関連する補足" class="headerlink" title="ポリシーの設定に関連する補足"></a>ポリシーの設定に関連する補足</h2><p>設定を行う管理者向けに、補足となるような情報を QA 形式でまとめてみました。参考になりましたら幸いです。</p><p>Q.  条件付きアクセスをワークロード ID 用に構成しようとすると、UI 上で選択できる項目が減ってしまう。設定する方法はないか？</p><p>A.  ポリシーの対象をワークロード ID にした場合、ワークロード ID 用の条件付きアクセスの機能で現在利用できる項目のみの表記に変わります。<br><code>クラウド アプリまたは操作</code> の項目では、**”すべてのクラウド アプリ”** を選び、すべてのサインインが対象になるように構成する必要があります。<br>また、現在構成可能なのは IP アドレス ベースの条件と、制御としてブロックのみ利用できます。</p><hr><p>Q.  組織内で、ワークロード ID に分類されるアプリを確認したい。</p><p>A.  ワークロード ID に分類されるオブジェクトは、少なくとも <code>Azure Active Directory</code> &gt; <code>アプリの登録</code> &gt; <code>(対象のアプリを選択)</code> &gt; <code>認証</code>  の項目から <code>サポートされているアカウントの種類</code> が <strong>“この組織ディレクトリのみに含まれるアカウント”</strong> として設定されているものです。</p><p><img src="/blog/azure-active-directory/introducing-ca-for-workload-id/2_signInAudience.png" alt="signInAudience の確認"></p><p>ワークロード ID に分類されるアプリを抽出することを目的に、取得できるアプリケーションの一覧から対象外となるアプリを除く例について紹介します。<br>シングルテナント アプリを取得して、3rd Party の SaaS 用のアプリを除きます。<br>一部、マイクロソフトのサービスを利用するためのアプリが含まれる可能性があります。</p><p>以下のスクリプトをグローバル管理者のアカウントを利用して実行ください。<br>Microsoft Graph PowerShell SDK を利用するため、事前に以下のコマンドでモジュールをインストールします。</p><p><code>Install-Module Microsoft.Graph</code><br>参考 : <a href="https://github.com/microsoftgraph/msgraph-sdk-powershell">Microsoft Graph PowerShell SDK</a></p><p>次のコマンドを順に実行します。<br>グローバル管理者でのサインイン時に、Microsoft Graph PowerShell SDK に対する Application.Read.All の権限を許可するように表示された場合は、承諾する必要があります。</p><figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="built_in">Connect-MgGraph</span> <span class="literal">-Scope</span> <span class="string">&quot;Application.Read.All&quot;</span></span><br><span class="line"><span class="built_in">Get-MgApplication</span> <span class="literal">-Filter</span> <span class="string">&quot;signInAudience eq &#x27;AzureADMyOrg&#x27;&quot;</span> <span class="literal">-All</span> | <span class="built_in">where</span> &#123;<span class="variable">$_</span>.ApplicationTemplateId <span class="operator">-eq</span> <span class="variable">$null</span>&#125;</span><br></pre></td></tr></table></figure><p>出力結果は以下のコマンドなどで CSV 形式で保存できます。</p><figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="built_in">Get-MgApplication</span> <span class="literal">-Filter</span> <span class="string">&quot;signInAudience eq &#x27;AzureADMyOrg&#x27;&quot;</span> <span class="literal">-All</span> | <span class="built_in">where</span> &#123;<span class="variable">$_</span>.ApplicationTemplateId <span class="operator">-eq</span> <span class="variable">$null</span>&#125; | <span class="built_in">select</span> DisplayName,AppId,SignInAudience |  <span class="built_in">Export-Csv</span> <span class="literal">-Path</span> <span class="string">&quot;&lt;出力先のパス&gt;&quot;</span> <span class="literal">-NoTypeInformation</span></span><br></pre></td></tr></table></figure><hr><p>Q.  マネージド ID の利用に関しても何かしらの制御を構成したい。</p><p>A.  ワークロード ID の条件付きアクセスにおいては、マネージド ID は対象外であるため、割り当てられているロールが適切であるか確認します。<br>Azure AD 内のユーザーやグループの操作は、グローバル管理者などが適切なロールや権限を付与しない限り、変更できません。</p><hr><p>Q.  制御の適用状況を確認したい。</p><p>A.  サインイン ログを確認します。<br><code>Azure Active Directory</code> &gt; <code>サインイン ログ</code> の項目から表示するログを <code>サービス プリンシパルのサインイン</code> に変更します。<br>サービス プリンシパルのサインインでは、同じサインインリクエストは指定された時間でまとめて表示されます。<br>まとめられた項目を展開すると、それぞれのサインインの詳細を選択することができるようになるため、確認したい項目を選択します。(画像内 3 ~ 4)</p><p><img src="/blog/azure-active-directory/introducing-ca-for-workload-id/3_GuideServicePrincipalLogs.png" alt="サービスプリンシパル ログの確認"></p><p>表示されたブレードにて、<code>条件付きアクセス</code> のタブを選択します。<br>設定したポリシー名を選択します。</p><p><img src="/blog/azure-active-directory/introducing-ca-for-workload-id/4_ca-tab.png" alt="サービスプリンシパル ログの確認"></p><p>以下は、許可していない IP アドレスからのサインインがブロックされたときの例です。<br>この点はユーザーの条件付きアクセスと同じような確認ができます。</p><p><img src="/blog/azure-active-directory/introducing-ca-for-workload-id/5_ca-result.png"></p><hr><p>Q.  対象とするアプリケーションの一覧に表示されるのに、選択できないアプリがある。以下の画像の様な表示を確認する。</p><p><img src="/blog/azure-active-directory/introducing-ca-for-workload-id/6_SearchMultiTenantApp2.png" alt="対象とするアプリの検索"></p><p>A.  <code>サポートされているアカウントの種類</code> がマルチ テナントとなっているアプリである可能性があります。<br>現状の動作として、対象のアプリケーションを選択する際に、<code>アプリの登録</code> &gt; <code>対象のアプリを選択</code> &gt; <code>認証</code>  の項目にある <code>サポートされているアカウントの種類</code> が <strong>“任意の組織ディレクトリ内のアカウント (任意の Azure AD ディレクトリ - マルチ テナント)”</strong> として設定されているアプリは、対象として選択できません。<br>マルチ テナントアプリとして設定されている場合は、ワークロード ID に含まれないためです。<br>あらためて、ワークロード ID に含まれないアプリは、以下に分類されるアプリとなります。</p><ul><li>マネージド ID</li><li>マルチテナント アプリケーション (サードパーティー の SaaS アプリ)</li><li>マイクロソフトが提供するサービスが動作するためのアプリケーション</li></ul><hr><p>プレビュー機能である、ワークロード ID の条件付きアクセスについて紹介しました。<br>主に、どういった操作がワークロード ID のサインインとして対象となるのか、その具体例について補足してみました。<br>上記内容が少しでも参考となりますと幸いです。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;本記事は &lt;a href=&quot;https://qiita.com/advent-calendar/2021/microsoft-azure-tech&quot;&gt;Azure Tech Advent Calendar 2021&lt;/a&gt; 7 日目の記事です。&lt;br&gt;Japan Azure </summary>
      
    
    
    
    
    <category term="Azure AD" scheme="https://jpazureid.github.io/blog/tags/Azure-AD/"/>
    
    <category term="Conditional Access Policy" scheme="https://jpazureid.github.io/blog/tags/Conditional-Access-Policy/"/>
    
  </entry>
  
  <entry>
    <title>TKPG-F8G 署名キーのロールオーバー頻度の変更について</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory/tkpg-f8g-changes-to-signing-key-rollover-frequency/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory/tkpg-f8g-changes-to-signing-key-rollover-frequency/</id>
    <published>2021-12-02T01:00:00.000Z</published>
    <updated>2022-01-31T04:07:17.595Z</updated>
    
    <content type="html"><![CDATA[<p>2021-12-01 にサービス正常性通知の TKPG-F8G にて通知されております、「Action recommended: Azure Changes to Signing Key Rollover Frequency description: Active: Action recommended: Azure Changes to Signing Key Rollover Frequency service」について、具体的な通知の内容について解説いたします。</p><blockquote><p>You’re receiving this notice because you use Azure Active Directory (Azure AD).<br>At Microsoft, we want to ensure that we’re providing our customers with frequently rotated signing keys for security tokens. This announcement is a courtesy notification to Azure AD application developers that we’re making changes to the signing key rotation frequency.<br>What is the Microsoft Identity change?<br>To provide greater security for signing key rollover, there will be a gradual increase in the frequency of key rollovers starting in December until a one-week frequency is reached over the course of several months.<br>Previously, Microsoft informed customers that the Microsoft identity platform’s signing key rolls on a periodic basis and, in the case of an emergency, could be rolled over immediately. There will continue to be no set or guaranteed time between these key rolls. Any application that integrates with the Microsoft identity platform should be prepared to handle a key rollover event no matter how frequently it may occur.</p><p>Am I affected by this change?<br>How your application handles key rollover depends on variables such as the type of application or what identity protocol and library was used. As such, not all Azure AD applications will be affected.<br>Please reference our documentation and follow the instructions to assess if your application will be affected. If your application will be affected, follow the guidance on how to update the application to support automatic key rollover or manually update the key to prevent impact.<br>If you have any questions or concerns, please contact us.</p></blockquote><h2 id="OverView"><a href="#OverView" class="headerlink" title="OverView"></a>OverView</h2><p>Azure AD では OpenID Connect などの標準技術を利用し、公開鍵基盤を利用したアプリケーション間の信頼を構成しています。具体的には Azure AD が保持する秘密鍵を利用しトークンに署名を行い、連携先のアプリケーションはメタデータとして公開されている公開鍵を利用し、署名の検証を行いトークンの有効性を確認します。</p><p>メタデータとして公開されている公開鍵は、これまでもセキュリティ上の理由から定期的にロールオーバーされていました。一方でそのロールオーバーがより頻繁に行われるようになる旨を今回の通知ではご案内しております。具体的には、これまで約 6 週おきにロールオーバーされていたものが 12 月から順次更新間隔を短くし、数ヶ月かけて 1 週間の頻度に達するようにします。</p><ul><li><a href="https://docs.microsoft.com/ja-jp/azure/active-directory/develop/active-directory-signing-key-rollover?WT.mc_id=Portal-Microsoft_Azure_Health#overview-of-signing-keys-in-the-microsoft-identity-platform">Microsoft ID プラットフォームでの署名キーのロールオーバー | Microsoft Docs</a></li></ul><p>通常、ライブラリがメタデータの定期的なチェックし、公開鍵の自動更新を実装していることが一般的です。しかしながら、ライブラリがメタデータの定期チェックを実装していない、あるいはメタデータの自動更新を実装していない独自アプリは、今回の変更の影響を受ける可能性があります。</p><h2 id="私のアプリは影響を受けますか？"><a href="#私のアプリは影響を受けますか？" class="headerlink" title="私のアプリは影響を受けますか？"></a>私のアプリは影響を受けますか？</h2><p>本影響は貴社アプリ内にて、トークンの署名検証を行うアプリのみに影響があります。たとえば、 Web API や OpenID Connect で連携するアプリを開発している場合に影響を受ける可能性がございます。トークンの署名検証を行うアプリであっても、弊社の標準ライブラリなどでメタデータを定期的に更新するよう実装されている場合には影響を受けません。またこれまでもメタデータの公開鍵は、約 6 週間おきにロールオーバーされておりましたので、すでに 6 週間以上動作しているアプリは問題ないと判断いただけるものと存じます。</p><p>メタデータを利用した署名の検証をしているかは、Azure ポータル上で確認することはできず、アプリの実装観点での確認が必要です。上記公開情報に<a href="https://docs.microsoft.com/ja-jp/azure/active-directory/develop/active-directory-signing-key-rollover?WT.mc_id=Portal-Microsoft_Azure_Health#how-to-assess-if-your-application-will-be-affected-and-what-to-do-about-it">一般的な実装パターンごとに確認方法と対処方法</a>をおまとめしておりますので、こちらをご確認ください。</p><h2 id="よくある質問"><a href="#よくある質問" class="headerlink" title="よくある質問"></a>よくある質問</h2><p>以下に、よくある質問をおまとめします。</p><h3 id="az-login-などでサービス-プリンシパルを利用した認証を実施していますが影響を受けますか"><a href="#az-login-などでサービス-プリンシパルを利用した認証を実施していますが影響を受けますか" class="headerlink" title="az login などでサービス プリンシパルを利用した認証を実施していますが影響を受けますか"></a>az login などでサービス プリンシパルを利用した認証を実施していますが影響を受けますか</h3><p>いいえ、az login などクライアントではトークンの検証を行いませんので影響を受けません。</p><h3 id="エンタープライズ-アプリケーションでシングル-サインオン設定をしている-SAML-アプリには影響がありますか"><a href="#エンタープライズ-アプリケーションでシングル-サインオン設定をしている-SAML-アプリには影響がありますか" class="headerlink" title="エンタープライズ アプリケーションでシングル サインオン設定をしている SAML アプリには影響がありますか"></a>エンタープライズ アプリケーションでシングル サインオン設定をしている SAML アプリには影響がありますか</h3><p>いいえ、エンタープライズ アプリケーションのシングル サインオン設定にて、トークン署名証明書を生成している SAML アプリは、今回のロールオーバーの影響を受けません。個別の SAML アプリのトークン署名用証明書は引き続きお客さまにて管理いただけます。</p><h3 id="OpenID-Connect-で連携している-SaaS-アプリに影響はありますか"><a href="#OpenID-Connect-で連携している-SaaS-アプリに影響はありますか" class="headerlink" title="OpenID Connect で連携している SaaS アプリに影響はありますか"></a>OpenID Connect で連携している SaaS アプリに影響はありますか</h3><p>はい、OpenID Connect で連携している SaaS アプリが ID トークンの検証をしている場合、今回の影響を受ける可能性があります。ただ、通常は SaaS アプリベンダーにて対処が実施されるかと存じますので、ご不安な場合には各アプリベンダーまでご確認ください。</p><h3 id="Azure-AD-アプリケーション-プロキシで公開されたアプリは影響を受けますか"><a href="#Azure-AD-アプリケーション-プロキシで公開されたアプリは影響を受けますか" class="headerlink" title="Azure AD アプリケーション プロキシで公開されたアプリは影響を受けますか"></a>Azure AD アプリケーション プロキシで公開されたアプリは影響を受けますか</h3><p>公開されたアプリが OpenID Connect で Azure AD と連携しており、アプリ側でトークンの検証を実装している場合は確認が必要です。Azure AD アプリケーション プロキシの事前認証のみで認証を実施している場合、お客様での対処は不要です。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;2021-12-01 にサービス正常性通知の TKPG-F8G にて通知されております、「Action recommended: Azure Changes to Signing Key Rollover Frequency description: Active: Act</summary>
      
    
    
    
    
    <category term="Azure AD" scheme="https://jpazureid.github.io/blog/tags/Azure-AD/"/>
    
    <category term="Security" scheme="https://jpazureid.github.io/blog/tags/Security/"/>
    
  </entry>
  
  <entry>
    <title>条件付きアクセスの認証コンテキストを触ってみた</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory/introducing-authentication-context/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory/introducing-authentication-context/</id>
    <published>2021-12-01T08:00:00.000Z</published>
    <updated>2022-01-31T04:07:17.459Z</updated>
    
    <content type="html"><![CDATA[<p>本記事は <a href="https://qiita.com/advent-calendar/2021/microsoft-azure-tech">Azure Tech Advent Calendar 2021</a> 1 日目の記事です。<br>Japan Azure Identity Support Blog では、お問合せの多い事象へのトラブルシューティング方法や、運用環境でのおススメの構成などサポート情報を中心に案内しておりますが、今回の記事は、プレビュー機能についていろいろと試してみた所謂「やってみた系」の記事です。</p><p>認証コンテキスト自体は 2021 年 3 月に <a href="https://techcommunity.microsoft.com/t5/azure-active-directory-identity/granular-conditional-access-for-sensitive-data-and-actions/ba-p/1751775">Microsoft Ignite で 発表された</a>条件付きアクセス ポリシーの新しい機能ですが、日本語での解説記事が全然出ておらず、個人的にもっと広まってほしいと思い、この機会にご紹介します。</p><div class="alert is-important"><p class="alert-title">重要</p><p>認証コンテキスト機能は、現在 Public Preview での提供であり、プレビュー期間中は作成した認証コンテキストを削除できません。</p><p>そのため以下の手順をお試しいただく際には、検証用テナントなどで動作を確認いただくことを推奨します。</p><p>本記事でご紹介する機能は 2021/12/01 現在の動作であり、最新の動作については公開ドキュメントをご参照ください。</p></div><h2 id="認証コンテキストとは？"><a href="#認証コンテキストとは？" class="headerlink" title="認証コンテキストとは？"></a>認証コンテキストとは？</h2><p>Azure AD の条件付きアクセス ポリシーは、サインインの場所、デバイスの状態、ユーザーのリスクなど様々なシグナルをもとに Azure AD で保護されたリソースへのアクセスを制御する機能です。<br>従来のポリシーで制御可能な操作は、保護されたリソース (クラウド アプリ) へのアクセス、セキュリティ情報の登録またはデバイスの登録または参加の操作のみでした。</p><p>しかしながら、より高度なアクセス制御を求めたいアプリケーションでは、特定の操作を行うときのみ多要素認証を要求する、あるいは、準拠済みデバイスからのアクセスを要求するといった、ステップアップ認証を設定したい場合があります。<br>このような要件を満たすために実装が進んでいる機能が、認証コンテキストです。</p><ul><li>条件付きアクセス ポリシーのクラウド アプリ、アクション、認証コンテキスト - Azure Active Directory | Microsoft Docs<br><a href="https://docs.microsoft.com/ja-jp/azure/active-directory/conditional-access/concept-conditional-access-cloud-apps#authentication-context-preview">https://docs.microsoft.com/ja-jp/azure/active-directory/conditional-access/concept-conditional-access-cloud-apps#authentication-context-preview</a></li></ul><p>認証コンテキストを利用することで、特定の SharePoint サイトにアクセスする際のみに追加の認証を要求したり、Microsoft Defender for Cloud Apps (旧 MCAS) を利用し、セッション ポリシーを割り当てたアプリケーションで、特定の動作に対し追加の認証を要求したりすることが可能になります。</p><p><img src="/blog/azure-active-directory/introducing-authentication-context/conditional-accees-policy-example.png" alt="条件付きアクセス ポリシーの動作例"></p><p><img src="/blog/azure-active-directory/introducing-authentication-context/authentication-context-example.png" alt="認証コンテキストの動作例"></p><p>ちなみに、サポート チームではこのような情報は社内情報として入手することもあれば、お客様と同時に Ignite や Tech ブログなどの発表で知る… ということもあります😅</p><h2 id="公式ドキュメントを読む"><a href="#公式ドキュメントを読む" class="headerlink" title="公式ドキュメントを読む"></a>公式ドキュメントを読む</h2><p>新機能が発表されてもすぐに使えるとは限りません。認証コンテキストの場合は、3 月に Ignite で発表されてから 5 月ごろに <a href="https://techcommunity.microsoft.com/t5/azure-active-directory-identity/conditional-access-authentication-context-now-in-public-preview/ba-p/1942484">パブリック プレビューが開始され</a> ました。</p><p>同時に公式ドキュメントもたいてい公開されるので、私も早速動作を試してみました。</p><ul><li><a href="https://docs.microsoft.com/ja-jp/azure/active-directory/conditional-access/concept-conditional-access-cloud-apps#authentication-context-preview">条件付きアクセス ポリシーのクラウド アプリ、アクション、認証コンテキスト - Azure Active Directory | Microsoft Docs</a></li></ul><h2 id="実際に試してみる"><a href="#実際に試してみる" class="headerlink" title="実際に試してみる"></a>実際に試してみる</h2><p>では、公式ドキュメントを参考に早速試してみましょう。認証コンテキストを試すには、以下の手順が必要です。</p><ol><li>認証コンテキストを作成する</li><li>認証コンテキストに条件付きアクセス ポリシーを適用する</li><li>認証コンテキストを利用アプリに割り当てる</li></ol><p>構認証コンテキストは単体で動作するわけではなく、アプリ、認証コンテキスト、条件付きアクセスが連動して動作します。<br>もう少し具体的に言うと、アプリが認証コンテキストを利用するという認証要求を Azure AD に送信し、Azure AD は指定された認証コンテキストに紐づく条件付きアクセス ポリシーを適用、結果としてポリシーに基づいた追加のアクセス制御が可能となります。</p><div class="alert is-info"><p class="alert-title">Note</p><p>認証コンテキスト機能を利用するには Azure AD Premium P1 以上のライセンスが必要です。</p></div><h3 id="認証コンテキストの作成"><a href="#認証コンテキストの作成" class="headerlink" title="認証コンテキストの作成"></a>認証コンテキストの作成</h3><p>認証コンテキストを作成するには、Azure ポータルの <code>Azure Active Directory</code> &gt; <code>セキュリティ</code> &gt; <code>条件付きアクセス ポリシー</code> &gt; <code>認証コンテキスト</code> から作成します。</p><p><img src="/blog/azure-active-directory/introducing-authentication-context/authentication-context01.png" alt="認証コンテキストの作成"></p><p>今回は、Require_MFA, Require_CompliantDevice, Require_TOU の 3 つの認証コンテキストを作成しました。</p><p><img src="/blog/azure-active-directory/introducing-authentication-context/authentication-context02.png" alt="作成した認証コンテキスト"></p><p>認証コンテキストは作成順に c1 ~ c25 までの ID が割り振られます。</p><p><img src="/blog/azure-active-directory/introducing-authentication-context/authentication-context-id.png" alt="認証コンテキストの ID"></p><div class="alert is-important"><p class="alert-title">重要</p><p>認証コンテキスト機能は、現在 Public Preview での提供であり、プレビュー期間中認証コンテキストの上限は 25 個で、作成した認証コンテキストを削除できません。</p></div><h3 id="認証コンテキストへ条件付きアクセスの適用"><a href="#認証コンテキストへ条件付きアクセスの適用" class="headerlink" title="認証コンテキストへ条件付きアクセスの適用"></a>認証コンテキストへ条件付きアクセスの適用</h3><p>作成した認証コンテキストは、それのみでは何も機能しません。そのため、認証コンテキストに条件付きアクセス ポリシーを割り当てます。<br>認証コンテキストは「コンテキスト」の定義で合って、実際の動作は条件付きアクセス ポリシーで制御します。</p><p><img src="/blog/azure-active-directory/introducing-authentication-context/apply-policy-to-authentication-context.png" alt="認証コンテキストとポリシーの関係"></p><p>通常の条件付きアクセス ポリシー同様にユーザーや適用の条件などを設定でき、緊急用の管理アカウントなどを除外することも可能です。</p><p>今回は、それぞれ C001_Require_MFA, C002_Require_CompliantDevice, C003_Require_TOU の名前でポリシー作成し、認証コンテキストに合った制御を設定しました。</p><p><img src="/blog/azure-active-directory/introducing-authentication-context/authentication-context03.png" alt="条件付きアクセス ポリシーの対象"></p><p><img src="/blog/azure-active-directory/introducing-authentication-context/authentication-context04.png" alt="作成した条件付きアクセス ポリシー"></p><p>複数の条件付きアクセス ポリシーを一つの認証コンテキストに割り当てたり、逆に複数の認証コンテキストに 1 つの条件付きアクセス ポリシーを割り当てることも可能です。<br>たとえば、機密情報アクセス用の認証コンテキストに、社内 IP からのアクセス時のポリシーと、社外 IP からのアクセス時のポリシーをそれぞれ適用する、といった利用法が考えられます。</p><p>認証コンテキストと条件付きアクセス ポリシーの組み合わせを大量に管理するのは労力が大きくなるため、なるべく汎用的な認証コンテキストを定義し、複数のアプリで使いまわせるように設計するのが良いように思います。</p><h3 id="認証コンテキストの対応サービスへの適用"><a href="#認証コンテキストの対応サービスへの適用" class="headerlink" title="認証コンテキストの対応サービスへの適用"></a>認証コンテキストの対応サービスへの適用</h3><p>作成した認証コンテキストと、そのコンテキストに対する条件付きアクセスは呼び出されない限りは機能しません。つまり、アプリが認証コンテキストを明示的に呼び出し、追加の認証を要求する必要があります。</p><p><img src="/blog/azure-active-directory/introducing-authentication-context/apply-authentication-context-to-apps.png" alt="認証コンテキストとポリシー、アプリの関係"></p><p>今回は認証コンテキストを呼び出すアプリとして SharePoint Online の特定サイトを利用します。つまり、SharePoint Online の特定サイトにアクセスする際に、認証コンテキストが呼び出されるよう構成し、条件付きアクセス ポリシーにて追加の認証が要求されるか確かめます。</p><p>SharePoint Online への認証コンテキストの適用方法は、現時点では 2 つあります。一つは特定の機密度ラベルに認証コンテキストを割り当てる方法です。<a href="https://docs.microsoft.com/ja-jp/sharepoint/authentication-context-example">公開ドキュメントの手順</a> では機密度ラベルに認証コンテキストを割り当てる方法が紹介されています。</p><p>機密度ラベルを利用したほうがファイルの暗号化などと組み合わせてより高度な設定が可能ですが、今回は条件付きアクセス ポリシーの動作を確認することが目的ですので、もう一つの、簡易な手順であるサイトに直接認証コンテキストを割り当てる手順にて検証します。(機密度ラベルを利用した検証はラベルの作成や展開時間を含めると丸一日かかりました)</p><p>特定のサイトに認証コンテキストを適用するには、<a href="https://docs.microsoft.com/ja-jp/powershell/module/sharepoint-online/set-sposite?view=sharepoint-ps">SharePoint Online PowerShell の Set-SPOSite コマンド</a> を利用します。</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># SharePoint Online にグローバル管理者権限でサインインします。</span><br><span class="line">Connect-SPOService -Url https://&lt;yourdomain&gt;-admin.sharepoint.com/</span><br><span class="line"></span><br><span class="line"># 認証コンテキストを特定のサイトを指定して割り当てます。</span><br><span class="line">Set-SPOSite -Identity https://&lt;yourdomain&gt;.sharepoint.com/sites/confidential -ConditionalAccessPolicy AuthenticationContext -AuthenticationContextName &quot;Require_CompliantDevice&quot;</span><br></pre></td></tr></table></figure><p>上記手順では、準拠済みデバイスが必要と設定した認証コンテキストをサイトに割り当てました。<br>その後、認証コンテキストを割り当てたサイトに非準拠デバイスでアクセスを実施すると、以下のように準拠済みデバイスが必要な旨が表示され、アクセスがブロックされます。もちろん、認証コンテキストを設定していないサイトには今まで通りアクセスが可能です。</p><p><img src="/blog/azure-active-directory/introducing-authentication-context/authentication-context05.png" alt="条件付きアクセス ポリシーによるブロック"></p><p>サインイン ログの条件付きアクセス ポリシーの項目を確認すると、期待通り認証コンテキストに割り当てたポリシーが適用されていることが確認できます。</p><p><img src="/blog/azure-active-directory/introducing-authentication-context/authentication-context06.png" alt="適用された条件付きアクセス"></p><div class="alert is-info"><p class="alert-title">Note</p><p>サインインログから条件付きアクセス ポリシーの適用状況を確認する方法は、<a href="/blog/azure-active-directory/conditional-cannot-access-rightnow/">「現時点ではこれにはアクセスできません」 エラーについて</a> を参照下さい。</p></div><h2 id="プロトコルの詳細を見てみる"><a href="#プロトコルの詳細を見てみる" class="headerlink" title="プロトコルの詳細を見てみる"></a>プロトコルの詳細を見てみる</h2><p>機能紹介はここまでですが、今回はもう少し認証コンテキストが動作する仕組みを見てみましょう。SharePoint Online へアクセスをする際には Azure AD で OpenID Connect を利用した認証が実施されます。つまり、SharePoint Online から Azure AD に対し、ID トークンを発行するための認可リクエストが送信されています。</p><p>そこでブラウザーの F12 ツールなどを利用し、条件付きアクセス ポリシーでブロックされた際の通信トレースを取得してみます。<br>以下の通信は、認証コンテキストを設定した SharePoint サイトにアクセスを行った際、Azure AD に送信された認可リクエストの中身です。ここで注目してほしいのは claims パラメータの中身です。</p><p><img src="/blog/azure-active-directory/introducing-authentication-context/authentication-context07.png" alt="claims パラメーター"></p><p>claims パラメータは <a href="https://openid.net/specs/openid-connect-core-1_0.html#ClaimsParameter">OpenID Connect Core で定義されている</a> トークンに含めてほしいクレームを定義するパラメータです。ここでは id_token に acrs クレームを含めるよう、指示をしています。<br>acrs クレームは、OpenID Connect の <a href="https://openid.net/specs/openid-connect-core-1_0.html#rfc.section.5.5.1.1">acr (Authentication Context Class Reference) クレーム</a> と同じような動作をするクレームで、以下のように認証コンテキストを指定することで、ID トークンの発行時に 指定された認証コンテキストに適用された条件付きアクセス ポリシーを完了させることを要求します。</p><figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123; </span><br><span class="line">  <span class="attr">&quot;id_token&quot;</span>:&#123;</span><br><span class="line">    <span class="attr">&quot;acrs&quot;</span>:&#123;</span><br><span class="line">      <span class="attr">&quot;essential&quot;</span>:<span class="literal">true</span>,</span><br><span class="line">      <span class="attr">&quot;value&quot;</span>:<span class="string">&quot;c2&quot;</span> <span class="comment">//認証コンテキストの ID</span></span><br><span class="line">      &#125;,</span><br><span class="line">    <span class="attr">&quot;xms_cc&quot;</span>:&#123;</span><br><span class="line">      <span class="attr">&quot;values&quot;</span>:[<span class="string">&quot;CP1&quot;</span>] <span class="comment">//クレーム チャレンジ対応クライアントを要求</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>上記の例では、c2 つまり、Require_CompliantDevice の認証コンテキストを指定して、ID トークンの発行を要求していることがわかります。</p><p><img src="/blog/azure-active-directory/introducing-authentication-context/authentication-context08.png" alt="c2 の認証コンテキスト"></p><p>認証コンテキストに割り当てられた条件付きアクセス ポリシーを突破したかどうかは、発行される ID トークンの acrs クレームを確認することで判定が可能です。実際に条件付きアクセス ポリシーを突破した状態でアクセスを行った際には、以下のように acrs クレームが含まれる ID トークンが発行されます</p><p><img src="/blog/azure-active-directory/introducing-authentication-context/authentication-context09.png" alt="ID トークン"></p><p>SharePoint Online 側では、acrs クレームをチェックして、本当にユーザーが認証コンテキストを満たす認証を実施したかを判定できます。</p><div class="alert is-info"><p class="alert-title">Note</p><p>xms_cc オプションはクライアント アプリケーションがクレーム チャレンジに対応しており、API が返却するクレーム チャレンジ ヘッダーを適切に処理できることを示しています。</p><p>話の本筋からそれますのでここでは紹介しませんが、詳しくは <a href="https://docs.microsoft.com/ja-jp/azure/active-directory/develop/claims-challenge">クレーム チャレンジ、クレーム要求、およびクライアントの機能 - Microsoft identity platform | Microsoft Docs</a> や、<a href="https://github.com/Azure-Samples/ms-identity-ca-auth-context/blob/71b9d8a07de995d47b030e8449202016a9f76c41/TodoListClient/Controllers/TodoListController.cs#L44">該当の</a> <a href="https://github.com/Azure-Samples/ms-identity-ca-auth-context/blob/74146a201bf28b04145d1743d4d8d52919bd5896/TodoListClient/Infrastructure/ExtractAuthenticationHeader.cs">ソース</a> <a href="https://github.com/Azure-Samples/ms-identity-ca-auth-context/blob/74146a201bf28b04145d1743d4d8d52919bd5896/TodoListService/Controllers/TodoListController.cs#L98">コード</a> を参照ください。</p></div><h2 id="Appendix-公式サンプルを触ってみる"><a href="#Appendix-公式サンプルを触ってみる" class="headerlink" title="Appendix: 公式サンプルを触ってみる"></a>Appendix: 公式サンプルを触ってみる</h2><p>ここまで SharePoint Online を例にして、実際の認証コンテキストの動作を確認してきました。<br>認証コンテキストの動作をまとめると、以下のようなフローになります。</p><ol><li>アプリが保持する機密情報へのアクセス</li><li>アプリで設定した認証コンテキストを含む、認可要求</li><li>Azure AD の条件付きアクセス ポリシーによる認証コンテキストに応じた追加の認証要件</li><li>認証コンテキスト突破済みのトークン</li></ol><p><img src="/blog/azure-active-directory/introducing-authentication-context/authentication-context-flow.png" alt="認証コンテキストの大まかなフロー"></p><p>ここまでは、認証コンテキストを要求するアプリは SharePoint Online でしたが、上記のプロトコルをきちんと実装すれば、自社の OpenID Connect で実装されたアプリにも組み込むことが可能です。<br>MSAL ライブラリを利用し、認証コンテキストを呼び出す具体的なサンプルは、<a href="https://github.com/Azure-Samples/ms-identity-ca-auth-context">GitHub</a> にあります。</p><p>認証コンテキスト利用したアプリを実装する際には、認証コンテキストの具体的な内容はアプリ側では確認できない点に注意してください。<br>今回の手順では認証コンテキストとして、今回の手順では認証コンテキストとして、Require_MFA (c1), Require_CompliantDevice (c2), Require_TOU (c3) の 3 つを作成しましたが、あくまでこれは私のテストテナントでの話です。<br>他のテナントでは c1 が CompliantDevice と MFA が必要な認証コンテキスト、といったように c1, c2, c3 という ID は認証コンテキストの内容を推定する役には立ちません。</p><p><img src="/blog/azure-active-directory/introducing-authentication-context/authentication-context-with-custom-apps.png" alt="認証コンテキストの内容はアプリからはわからない"></p><p>特にマルチテナント アプリでは認証コンテキストはテナントによって異なるため、アプリ上で管理者による認証コンテキストの参照を行う機能の実装を検討ください。<br>上記のサンプル コードでは、管理者専用の設定ページにて Graph API で認証コンテキストの一覧を取得し、アプリケーションの動作時に要求する認証コンテキストを選択できるようなインターフェイスを実装しています。</p><p><img src="/blog/azure-active-directory/introducing-authentication-context/authentication-context-sample-admin.png" alt="アプリは認証コンテキストの内容を知らない"></p><p>アプリを実装する際には、認証コンテキストをどのように取得するかという点にも気を付けて実装いただく必要があります。</p><p><img src="/blog/azure-active-directory/introducing-authentication-context/authentication-context-app-fetch.png" alt="認証コンテキストの情報を取得する必要がある"></p><p>なお、Graph API で認証コンテキストの情報を取得したとしても、あくまでアプリは認証コンテキストの名前などのみが取得でき、実際に設定されている条件付きアクセス ポリシーの内容は確認できません。条件付きアクセス ポリシーの管理は引き続きテナント管理者が実施することとなります。(認証コンテキストと、適用されるポリシーの実際の動作が合致するように管理する必要があります)</p><p>さて、サンプルの動作に戻りましょう。上記の管理者ページでは、ToDo List の POST または DELETE 操作を実施時に必要な認証コンテキストを選択することが可能です。試しに TODO リストの POST に Require_TOU を、TODO リストの削除に Require_MFA を設定したところ、それぞれの操作を実施時に設定した認証コンテキストによる追加の認証が行われました。</p><p><img src="/blog/azure-active-directory/introducing-authentication-context/authentication-context-sample-post.png" alt="TODO リストの作成時に規約の同意が求められる"></p><p><img src="/blog/azure-active-directory/introducing-authentication-context/authentication-context-sample-delete.png" alt="TODO リストの削除時に多要素認証が求められる"></p><div class="alert is-important"><p class="alert-title">重要</p><p>認証コンテキストに限りませんが、条件付きアクセス ポリシーは適用時に必ず認証を求めるものではなく、要求された条件を満たした認証を完了しているかを判定します。</p><p>上記のサンプルでも一度多要素認証を実施したのちは、Azure AD 側あるいはアプリの認証キャッシュが有効な間は TODO リストの削除が可能です。</p></div><h2 id="まとめ"><a href="#まとめ" class="headerlink" title="まとめ"></a>まとめ</h2><p>今回は Azure AD の条件付きアクセス ポリシーのプレビュー機能である、Authentication Context を紹介しました。実際に設定をしたのは SharePoint Online のみですが、Microsoft Defender for Cloud Apps (旧 MCAS) でセッション制御に利用したり、また自作のアプリでもステップアップ認証要求を求めるよう実装したりすることが可能です。また、Azure AD Privileged Identity で、ロールの昇格の条件として認証コンテキスト利用できるようになるという発表もされており (早く Public Preview 来てくれー)、今後の展開も大変楽しみです。</p><p>皆さんもぜひこの新機能をお試しいただき何かお気づきの点などございましたらフィードバックをお待ちしております。</p><p>Azure AD を含む弊社のクラウド サービスでは日々新機能が発表されますが、お客様をサポートできるようサポート チームでも新しい機能について学習し、日々検証を行っています。本記事は、そんな検証の様子の一コマとしてもお楽しみいただければ幸いです。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;本記事は &lt;a href=&quot;https://qiita.com/advent-calendar/2021/microsoft-azure-tech&quot;&gt;Azure Tech Advent Calendar 2021&lt;/a&gt; 1 日目の記事です。&lt;br&gt;Japan Azure </summary>
      
    
    
    
    
    <category term="Azure AD" scheme="https://jpazureid.github.io/blog/tags/Azure-AD/"/>
    
    <category term="Conditional Access Policy" scheme="https://jpazureid.github.io/blog/tags/Conditional-Access-Policy/"/>
    
  </entry>
  
  <entry>
    <title>TLS 1.2 へ移行して基盤環境のセキュリティ確保を</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory/act-fast-by-moving-to-tls-1-2/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory/act-fast-by-moving-to-tls-1-2/</id>
    <published>2021-12-01T00:00:00.000Z</published>
    <updated>2022-01-31T04:07:17.279Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Azure Identity サポート チームの中井です。</p><p>本記事は、2021 年 11 月 22 日に米国の Azure Active Directory Identity Blog で公開された <a href="https://techcommunity.microsoft.com/t5/azure-active-directory-identity/act-fast-to-secure-your-infrastructure-by-moving-to-tls-1-2/ba-p/2967457">Act fast to secure your infrastructure by moving to TLS 1.2!</a> を意訳したものになります。ご不明点等ございましたらサポート チームまでお問い合わせください。</p><div class="alert is-info"><p class="alert-title">Note</p><p>TLS 1.2 に関する案内は、すでに公開中の <a href="https://jpazureid.github.io/blog/azure-active-directory-connect/azure-ad-connect-tls/">Azure AD Connect における TLS 1.2 の対応</a> の記事でも解説されておりますので併せてご覧ください。</p></div><hr><p>適切なセキュリティ対策を講じて機密データを保護することは、すべての組織にとって最も重要なことです。そのためには、データを保護し脅威に対抗するため、常に規格や規制を満たしていく必要があります。このような規格のうちの 1 つとして、Transport Layer Security (TLS) があります。TLS は、Web ブラウザと Web サーバーの間、モバイル アプリケーションとサーバー間の通信を暗号化するためのインターネット プロトコルです。弊社では、Azure Active Directory で TLS 1.2 を使用し基盤環境を保護することを推奨しています。テナントのセキュリティ態勢を向上させ、業界標準に準拠するため、旧バージョンの TLS (1.0 および 1.1) は廃止となり削除されます。 </p><p>TLS は広く採用されているセキュリティ プロトコルで、インターネット上の通信におけるプライバシーとデータ セキュリティを促進する仕組みです。TLS は、Azure AD、Office 365、および Microsoft や他のクラウド サービス プロバイダーが所有するその他のクラウド サービスに接続する際に使用されます。TLS の 3 つの要素のうち、1 つ目のものは暗号化であり、転送されるデータを第三者から隠蔽します。2 つ目の要素は認証であり、これは情報を交換する当事者が確かにその主張どおりの人物であることを確認します。3 つ目は整合性であり、データが偽造されていないか、改ざんされていないかを検証します。TLS 1.0 および 1.1 のプロトコルや 3DES 暗号は古いため、最新の暗号アルゴリズムに対応していません。その結果、攻撃者に悪用される可能性のあるセキュリティ上の脆弱性があります。FedRamp と <a href="https://csrc.nist.gov/news/2019/nist-publishes-sp-800-52-revision-2">NIST SP 800-52r2</a> に準拠するためには、レガシーのTLS (1.0、1.1) プロトコルと暗号 (3DES) の利用を廃止する必要があります。</p><p>Microsoft 365 など、ほとんどのマイクロソフトのサービスでは、TLS 1.0 および 1.1 を非推奨にする方法についての<a href="https://docs.microsoft.com/ja-jp/microsoft-365/compliance/tls-1.0-and-1.1-deprecation-for-office-365?view=o365-worldwide">ガイダンス</a> を提供しています。Azure AD を使用している多くのお客様は、すでに TLS 1.2 に移行していますが、この移行を促進するために、追加のガイダンスを提供いたします。2022 年 1 月 31 日から、Azure AD は、これら廃止予定の TLS バージョン 1.0 および 1.1 をサポートしなくなります。TLS 1.2 に移行していないお客様は、Azure AD へのリクエストが失敗するため、影響を受けることとなります。</p><h2 id="Azure-AD-のサインイン-ログを使用してレガシーな-TLS-を検出し移行を計画する"><a href="#Azure-AD-のサインイン-ログを使用してレガシーな-TLS-を検出し移行を計画する" class="headerlink" title="Azure AD のサインイン ログを使用してレガシーな TLS を検出し移行を計画する"></a>Azure AD のサインイン ログを使用してレガシーな TLS を検出し移行を計画する</h2><p>Azure AD で TLS 1.2 をサポートするための完全なガイダンスについては、こちらの <a href="https://docs.microsoft.com/ja-jp/troubleshoot/azure/active-directory/enable-support-tls-environment?tabs=azure-monitor">ドキュメント</a> を参照ください。これに加えてお客様は、Azure AD サインイン ログを使用して、お客様の環境でレガシーな TLS を使用しているクライアントやアプリケーションを特定することができます。レガシーな TLS で実行されたサインインに対して、Azure AD は、”追加の詳細” において、「Legacy TLS (TLS 1.0, 1.1, 3DES)」の項目 を True とマークします。「Legacy TLS」の項目は、レガシーな TLS によるサインインが行われた場合にのみ表示されるため、お客様のログにこの項目が表示されていない場合は、TLS 1.2 への切り替えの準備ができていることになります。</p><p>管理者がレガシーな TLS プロトコルをログから確認し、サインインの試行を特定する方法は複数あります。</p><ol><li><p><strong>PowerShel</strong>: PowerShell を使用して、レガシー TLS が使用されているサインイン ログのエントリをフィルタリングし、出力することができます。PowerShell で MS Graph API を呼び出すには、Azure AD Premium ライセンスが必要です。詳細につきましては、<a href="https://docs.microsoft.com/ja-jp/azure/active-directory/reports-monitoring/reference-powershell-reporting">レポート用の Azure AD PowerShell コマンドレット</a> を参照ください。</p></li><li><p><strong>UX</strong>: お客様は、Azure ポータルで、レガシーな TLS ベースのサインイン ログ エントリの詳細を参照できます。詳細につきましては、<a href="https://docs.microsoft.com/ja-jp/azure/active-directory/reports-monitoring/concept-all-sign-ins">Azure Active Directory のサインイン ログ - プレビュー</a> を参照ください。</p></li></ol><p><img src="/blog/azure-active-directory/act-fast-by-moving-to-tls-1-2/fig1.png" alt="図 1 - TLS のログを確認するため Azure ポータルを使用"> </p><ol start="3"><li><p><strong>JSON</strong>: 過去 7 日間のサインイン ログを JSON 形式でダウンロードして、「Legacy TLS」の項目を確認できます。このフラグは、レガシーな TLS がサインイン要求に使用されている場合にのみ表示されます。サインイン ログを JSON 形式ではなく CSV 形式でダウンロードすると、Legacy TLS 項目は表示されません。詳細につきましては、<a href="https://docs.microsoft.com/ja-jp/azure/active-directory/reports-monitoring/howto-download-logs">方法: Azure Active Directory でログをダウンロードする</a> を参照ください。</p></li><li><p><strong>Azure　モニター</strong>: 最後は、Azure Monitor を用いてログを分析し、ログのエクスポートを設定する方法です。詳細につきましては、<a href="https://docs.microsoft.com/ja-jp/azure/active-directory/reports-monitoring/howto-analyze-activity-logs-log-analytics">Azure Monitor ログを使用して Azure AD アクティビティ ログを分析する</a> を参照してください。</p></li></ol><p><img src="/blog/azure-active-directory/act-fast-by-moving-to-tls-1-2/fig2.png" alt="図 2 - TLS のログを確認するため Azure Monitor を使用"> </p><p>暗号プロトコルの進化に伴い、お客様は業界標準やベスト プラクティスを確認するとともに、既存のプロトコルに新たな脆弱性がないか注視していく必要があります。今回ご紹介したツールにより、お客様が TLS 1.2 への移行をスムーズに行い、セキュリティ体制を強化できれば幸いです。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは、Azure Identity サポート チームの中井です。&lt;/p&gt;
&lt;p&gt;本記事は、2021 年 11 月 22 日に米国の Azure Active Directory Identity Blog で公開された &lt;a href=&quot;https://techcom</summary>
      
    
    
    
    
    <category term="Azure AD" scheme="https://jpazureid.github.io/blog/tags/Azure-AD/"/>
    
    <category term="US Identity Blog" scheme="https://jpazureid.github.io/blog/tags/US-Identity-Blog/"/>
    
  </entry>
  
  <entry>
    <title>Microsoft Authenticator の新たなセキュリティ機能が利用可能となりました！</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory/new-authenticator-security-features/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory/new-authenticator-security-features/</id>
    <published>2021-12-01T00:00:00.000Z</published>
    <updated>2022-01-31T04:07:17.519Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Azure Identity サポート チームの中井です。</p><p>本記事は、2021 年 11 月 18 日に米国の Azure Active Directory Identity Blog で公開された <a href="https://techcommunity.microsoft.com/t5/azure-active-directory-identity/new-microsoft-authenticator-security-features-are-now-available/ba-p/2464386">New Microsoft Authenticator security features are now available!</a> を意訳したものになります。ご不明点等ございましたらサポート チームまでお問い合わせください。</p><hr><p>皆さん、こんにちは。</p><p>昨年、私たちは「<a href="https://techcommunity.microsoft.com/t5/azure-active-directory-identity/it-s-time-to-hang-up-on-phone-transports-for-authentication/ba-p/1751752">認証のための SMS や音声通話を使うのはそろそろやめよう</a>」(原題: “It’s Time to Hang Up on Phone Transports for Authentication”) という記事を公開しました。今日、弊社は Microsoft Authenticator をユーザーにとってより安全に、管理者にとってはより簡便に展開できるようにしました。</p><ol><li>管理者は Microsoft Authenticator において、番号照合や追加情報の提示により、誤った承認を防ぐことができるようになりました (パブリック プレビュー)。</li><li>管理者は Microsoft Authenticator を使用して、GPS 位置情報に基づく条件付きアクセス ポリシーを設定することができるようになりました (一般提供)。</li><li>管理者は「登録キャンペーン」機能を使用して、サインイン時に Microsoft Authenticator を設定するようユーザーに促すことができるようになりました (一般提供)。</li></ol><p>これらの Microsoft Authenticator のセキュリティ アップグレードを是非お試しいただき、ご意見をお聞かせください。これら新機能の詳細については以下をご覧ください。</p><h2 id="Microsoft-Authenticator-で-MFA-を利用する際の番号照合-パブリック-プレビュー"><a href="#Microsoft-Authenticator-で-MFA-を利用する際の番号照合-パブリック-プレビュー" class="headerlink" title="Microsoft Authenticator で MFA を利用する際の番号照合 (パブリック プレビュー)"></a>Microsoft Authenticator で MFA を利用する際の番号照合 (パブリック プレビュー)</h2><p>セキュリティを高め誤った承認を減らすために、管理者は Authenticator で MFA リクエストを承認する際に、サインイン画面に表示されている番号の入力をユーザーに要求することができます。</p><p><img src="/blog/azure-active-directory/new-authenticator-security-features/fig1.png" alt="図1 - 番号の照合"></p><p>ユーザーに番号照合を利用させる方法については、<a href="https://aka.ms/numbermatchdoc">こちら</a> をご覧ください。</p><h2 id="Microsoft-Authenticator-の承認リクエストにおける追加情報の提示-パブリック-プレビュー"><a href="#Microsoft-Authenticator-の承認リクエストにおける追加情報の提示-パブリック-プレビュー" class="headerlink" title="Microsoft Authenticator の承認リクエストにおける追加情報の提示 (パブリック プレビュー)"></a>Microsoft Authenticator の承認リクエストにおける追加情報の提示 (パブリック プレビュー)</h2><p>誤った承認を減らすためのもう一つの方法は、Authenticator の通知でユーザーに追加の情報を表示することです。この機能は、ユーザーがどのアプリケーションにサインインしているか、また IP アドレスに基づいてサインインしている場所を表示します。</p><p><img src="/blog/azure-active-directory/new-authenticator-security-features/fig2.png" alt="図 2 - 通知内に番号照合と併せて追加情報を提示"></p><p>ユーザーに追加の情報を表示する方法については、<a href="https://aka.ms/additionalcontextdoc">こちら</a> をご覧ください。</p><h2 id="GPS-ベースのネームド-ロケーション-一般提供"><a href="#GPS-ベースのネームド-ロケーション-一般提供" class="headerlink" title="GPS ベースのネームド ロケーション (一般提供)"></a>GPS ベースのネームド ロケーション (一般提供)</h2><p>管理者は、条件付きアクセス ポリシーを使用して、Microsoft Authenticator の GPS を使用して、リソースへのアクセスを特定の国の境界内に制限できるようになりました。</p><p>この機能を有効にしたユーザーは、サインイン時に Microsoft Authenticator アプリを使用して GPS 位置情報を共有するよう求められます。GPS 位置情報の完全性を確保するため、デバイスが脱獄またはルート化されている場合、Microsoft Authenticator は認証を拒否します。</p><p><img src="/blog/azure-active-directory/new-authenticator-security-features/fig3.png" alt="図 3 – GPO 座標を利用してネームドロケーションを追加"></p><p>詳細については、<a href="https://docs.microsoft.com/ja-jp/azure/active-directory/conditional-access/location-condition">管理者向けドキュメント</a>、<a href="https://docs.microsoft.com/ja-jp/graph/api/resources/countrynamedlocation?view=graph-rest-1.0">Graph API ドキュメント</a>、<a href="https://support.microsoft.com/en-us/account-billing/common-problems-with-the-microsoft-authenticator-app-12d283d1-bcef-4875-9ae5-ac360e2945dd">FAQページ</a> をご覧ください。</p><h2 id="Microsoft-Authenticator-登録キャンペーン-一般提供"><a href="#Microsoft-Authenticator-登録キャンペーン-一般提供" class="headerlink" title="Microsoft Authenticator 登録キャンペーン (一般提供)"></a>Microsoft Authenticator 登録キャンペーン (一般提供)</h2><p>Microsoft Authenticator 登録キャンペーンの機能を使用することで、ユーザーに Authenticator の設定を促し、安全性の低い SMS / 電話認証からの移行を促すことができます。この機能は、Microsoft Authenticator が有効でありながら設定されていないユーザーを対象としています。ユーザーは MFA サインインの完了後に Authenticator の設定を促され、設定後は既定の認証方法が Microsoft Authenticator アプリに変更されます。</p><p>ユーザーの登録キャンペーンを有効にする方法については、<a href="https://docs.microsoft.com/ja-jp/azure/active-directory/authentication/how-to-mfa-registration-campaign">こちら</a>をご覧ください。</p><p><img src="/blog/azure-active-directory/new-authenticator-security-features/fig4.png" alt="登録キャンペーンの有効化"></p><p>皆様からのご意見をお待ちしております。以下にコメントをお寄せいただくか、 aka.ms/AzureADFeedback までご連絡ください。</p><p>Alex Simons (<a href="https://twitter.com/Alex_A_Simons">@Alex_A_Simons</a>)<br>Corporate VP of Program Management<br>Microsoft Identity Division</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは、Azure Identity サポート チームの中井です。&lt;/p&gt;
&lt;p&gt;本記事は、2021 年 11 月 18 日に米国の Azure Active Directory Identity Blog で公開された &lt;a href=&quot;https://techcom</summary>
      
    
    
    
    
    <category term="Azure AD" scheme="https://jpazureid.github.io/blog/tags/Azure-AD/"/>
    
    <category term="US Identity Blog" scheme="https://jpazureid.github.io/blog/tags/US-Identity-Blog/"/>
    
  </entry>
  
  <entry>
    <title>アプリでゼロ トラスト対応を実現する 1 - なぜ重要なのか</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory/Achieving-ZeroTrust-readiness-in-your-apps1-Why-it-matters/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory/Achieving-ZeroTrust-readiness-in-your-apps1-Why-it-matters/</id>
    <published>2021-11-25T00:00:00.000Z</published>
    <updated>2022-01-31T04:07:17.251Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、 Azure Identity サポート チームの小出です。</p><p>本記事は、 2021 年 11 月15 日に米国の Azure Active Directory Identity Blog で公開された <a href="https://techcommunity.microsoft.com/t5/azure-active-directory-identity/achieving-zero-trust-readiness-in-your-apps-1-why-it-matters/ba-p/2959972">Achieving Zero Trust readiness in your apps #1: Why it matters</a> を意訳したものになります。ご不明点などございましたら、サポート チームまでお問い合わせください。</p><hr><p>こんにちは、Jeff Sakowiczです。私は Microsoft Identity チームで、Application Platform Security の Principal Program Management Lead をしています。私たちのチームの目標は、安全で信頼性が高く、発展的なアプリのエコシステムを作っていくことです。この目標を達成する一環として、アプリがゼロ トラストのセキュリティ モデルをサポートできるようにすることがあげられます。</p><p>今回、弊社アプリ プラットフォームのセキュリティ チームより、皆様が開発したアプリでどのようにゼロ トラスト対応を実現すればよいかと、なぜそれが重要かについて、一連のブログで紹介してまいります。</p><p>従来、アプリケーションのセキュリティを確保するというのは、安全なネットワーク境界内にアプリケーションを配置し、悪用される可能性のあるコードを修正することでした。何か問題が発生した場合、その影響は直接アプリケーション自体に及ぶことが多かったのです。しかし今日、ユーザーや組織が依存するアプリケーションやサービスは相互に絡み合った状況にあります。侵害されたアプリケーションや安全でないアプリケーションは、他の基盤への入り口として機能し、組織全体に影響を与える可能性があります。</p><p>さらに、<a href="https://www.microsoft.com/security/blog/2021/05/12/how-to-secure-your-hybrid-work-world-with-a-zero-trust-approach/">「どこでも仕事ができる」というハイブリッド型勤務</a> を背景に、アプリケーションは急速にクラウドへ移行しています。これは従業員が、自分のネットワークやデバイスからリソースにアクセスするためです。もはや、アプリケーションが保護されたネットワーク境界内でのみ使用されると考えることはできません。</p><p><a href="https://www.microsoft.com/security/business/zero-trust">ゼロ トラスト</a> の原則である「<strong>明示的に検証する</strong>」「<strong>最小限の特権アクセスを使用する</strong>」「<strong>侵害を想定する</strong>」は、このような新しい現実に対応するためのセキュリティの枠組みを提供してくれます。エンド・ツー・エンドのゼロトラスト戦略を採用し、基本的なセキュリティ衛生管理を行うことは、組織のデジタル資産を保護する助けとなります。ゼロトラストの原則を念頭に置いてアプリを開発することで、より安全なハイブリッド型勤務環境を実現でき、セキュリティ インシデントの影響範囲を小さくできます。さらに、迅速に修復や回復を行えるようにもなり、ゼロ トラスト戦略を実施する環境でアプリがシームレスに動作するようになります。</p><p>このブログ シリーズでは、マイクロソフトの ID プラットフォームがどのようにゼロ トラストの原則をサポートしているかを説明し、皆様が ID とアクセス管理にゼロ トラストのアプローチを採用したアプリケーションを作成する手助けをしてまいりたいと思います。まずは、なぜゼロ トラストが重要なのかについてこの記事で説明します。来月は、マイクロソフトの ID プラットフォームを使用して、最小特権アクセスの原則を使用するアプリケーションの設計について説明する予定です。 </p><h2 id="ゼロ-トラストの-ID-セキュリティを実現するためには開発者と-IT-担当者の協力が必須"><a href="#ゼロ-トラストの-ID-セキュリティを実現するためには開発者と-IT-担当者の協力が必須" class="headerlink" title="ゼロ トラストの ID セキュリティを実現するためには開発者と IT 担当者の協力が必須"></a>ゼロ トラストの ID セキュリティを実現するためには開発者と IT 担当者の協力が必須</h2><p>アプリを評価する際に、IT 部門は評価基準をより厳格にする必要があります。IT 部門はリスクを伴うアプリケーションや、高いセキュリティが求められる環境で正しく機能しないアプリケーションの使用を回避するでしょう。よって、アプリケーションが採用されるためには、ゼロ トラストを念頭に置いて設計されている必要があります。</p><p>しかし、ゼロ トラストのアプローチでアプリケーションを開発、設定、展開するには、チーム全体での努力が必要です。IT 部門は自らの環境内のアプリケーションに、どのようなポリシーを適用するか決定しなければなりません。開発者には、IT 部門がよりアプリケーションの安全性を高め、さらにそれを採用し管理できる形でアプリケーションを構築および統合する責任があります。こうした協力により、企業は以下のことが可能になります。</p><ul><li>組織内でアプリケーションを大規模に展開する。</li><li>情報漏洩の可能性を最小限に抑える。また、”侵害を想定する” 観点では、侵害が発生した際の影響を最小限に抑える。</li><li>攻撃や侵害に迅速に対応する。こうした攻撃などから迅速に復旧することで、ビジネスへの損害を軽減する。</li></ul><h2 id="お客様はゼロ-トラストの原則を取り入れ始めており、最初に-ID-から取り組んでいます"><a href="#お客様はゼロ-トラストの原則を取り入れ始めており、最初に-ID-から取り組んでいます" class="headerlink" title="お客様はゼロ トラストの原則を取り入れ始めており、最初に ID から取り組んでいます"></a>お客様はゼロ トラストの原則を取り入れ始めており、最初に ID から取り組んでいます</h2><p>組織のゼロ トラストへの道のりはそれぞれ異なりますが、ほとんどの場合、まず取り組むべき場所はユーザーとアプリケーションの ID です。多くの企業がゼロ トラストを展開する際に、優先的に取り組むアプリケーションのポリシーと制御は以下のとおりとなります。</p><ul><li><strong>認証情報の管理とローテーション ポリシー</strong>: 証明書やパスワードなどの秘密情報は、保護すべき最も重要な資産の 1 つです。これはこれら秘密情報を手にした攻撃者はシステム内部のより深くにアクセスすることができるからです。コードや設定からすべてのシークレットを取り除いてください。取り除いた情報は <a href="https://docs.microsoft.com/ja-jp/azure/key-vault/general/basic-concepts">Azure Key Vault</a> に配置し、<a href="https://docs.microsoft.com/ja-jp/azure/active-directory/managed-identities-azure-resources/overview">マネージド ID</a> を介してアクセスします。IT 管理者においては、アプリケーションの認証情報の管理を徹底する <a href="https://docs.microsoft.com/ja-jp/graph/api/resources/applicationauthenticationmethodpolicy?view=graph-rest-beta">アプリケーション認証方法ポリシー</a> を導入ください。</li><li><strong>強力なリスク ベース認証</strong>: IT 管理者は、多要素認証を必要とするポリシーを設定したいと考えるでしょう。<a href="https://docs.microsoft.com/ja-jp/azure/active-directory/conditional-access/overview">条件付きアクセス ポリシー</a> を使用することで、管理者は必要に応じて適切なアクセス制御を行うことで、組織の安全性を保ちつつも、制御の必要のないときにはユーザーの邪魔をしないようにできます。</li><li><strong><a href="https://docs.microsoft.com/ja-jp/azure/active-directory/develop/publisher-verification-overview">発行者確認済み</a> としているリスクの低いアクセス許可を要求するアプリケーションへの同意を制限する</strong>: Microsoft Graph などの API を使用してデータにアクセスすることで、リッチなアプリケーションを構築することができますが、同時に組織ではエンド ユーザーが特定の条件でアプリケーションに許可を与えることのできるポリシーを設定し、リスクを制限することが可能です。IT 部門は、<a href="https://docs.microsoft.com/ja-jp/azure/active-directory/manage-apps/configure-admin-consent-workflow">Azure AD の管理者同意ワークフロー</a> を使用して、ユーザー側で承諾できない要求をレビューすることができます。</li><li><strong>レガシーなプロトコルと API のブロック</strong>: これには、「Basic 認証」のような <a href="https://docs.microsoft.com/ja-jp/azure/active-directory/conditional-access/block-legacy-authentication">古い認証プロトコルをブロック</a> し、「Open ID Connect」や「OAuth 2」のような最新のプロトコルを使うようにすることが含まれます。利用しているアプリケーションがこれらの要件を満たしていることを組織全体で確認ください。</li></ul><h2 id="ゼロ-トラストでの構築を始める方法"><a href="#ゼロ-トラストでの構築を始める方法" class="headerlink" title="ゼロ トラストでの構築を始める方法"></a>ゼロ トラストでの構築を始める方法</h2><p>さらに詳しく知りたい方は、<a href="https://docs.microsoft.com/security/zero-trust/">Zero Trust Guidance Center</a> に公開された開発者向けの新しいガイダンスをご覧ください。このガイダンスには、Zero Trust に対応したアプリケーションを開発するための <a href="https://docs.microsoft.com/en-us/security/zero-trust/identity-developer">新しい開発および統合リソース</a> が含まれています。</p><p>詳細については、こちらからダウンロードできる開発者向けホワイトペーパーをご覧ください: <a href="https://aka.ms/ztdev">Zero Trust for the Microsoft Identity developer</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは、 Azure Identity サポート チームの小出です。&lt;/p&gt;
&lt;p&gt;本記事は、 2021 年 11 月15 日に米国の Azure Active Directory Identity Blog で公開された &lt;a href=&quot;https://techco</summary>
      
    
    
    
    
    <category term="Azure AD" scheme="https://jpazureid.github.io/blog/tags/Azure-AD/"/>
    
    <category term="US Identity Blog" scheme="https://jpazureid.github.io/blog/tags/US-Identity-Blog/"/>
    
  </entry>
  
  <entry>
    <title>お客様のセキュリティを強化する新しい ID パートナーシップと統合</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory/new-identity-partnerships-and-integrations-to-strengthen-your/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory/new-identity-partnerships-and-integrations-to-strengthen-your/</id>
    <published>2021-11-17T00:00:00.000Z</published>
    <updated>2022-01-31T04:07:17.519Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Azure Identity サポート チームの 村上 です。</p><p>本記事は、2021 年 11 月 3 日に米国の Azure Active Directory Identity Blog で公開された <a href="https://techcommunity.microsoft.com/t5/azure-active-directory-identity/new-identity-partnerships-and-integrations-to-strengthen-your/ba-p/2810629">New identity partnerships and integrations to strengthen your security</a> を意訳したものになります。ご不明点等ございましたらサポート チームまでお問い合わせください。</p><hr><p>今週の Microsoft Ignite では、お客様が様々なプラットフォームやクラウド間で耐障害性、安全性、生産性を向上できるように、<a href="https://techcommunity.microsoft.com/t5/azure-active-directory-identity/identity-at-ignite-strengthen-resilience-with-identity/ba-p/2747271">最新の ID イノベーション</a> について紹介いたしました。今週初めに紹介した新しいイノベーションに加えて、私たちは Azure Active Directory (Azure AD) の機能を拡張するために、さまざまなテクノロジー パートナーと協力してきました。私たちは複数のパートナーと協力しアプリケーションを統合することで、シームレスなアクセスを提供し、お客様固有の環境でのセキュリティをより強化するよう取り組んでいます。現在利用可能な新しいパートナー統合機能については、以下をご覧ください。</p><h2 id="Azure-AD-アプリ-ギャラリーで利用可能な新たな統合済みアプリ"><a href="#Azure-AD-アプリ-ギャラリーで利用可能な新たな統合済みアプリ" class="headerlink" title="Azure AD アプリ ギャラリーで利用可能な新たな統合済みアプリ"></a>Azure AD アプリ ギャラリーで利用可能な新たな統合済みアプリ</h2><p>Azure AD との統合において、私たちは独立系ソフトウェア ベンダー (ISVs) と密に提携し、Azure AD アプリ ギャラリーに統合済みのアプリを追加し続けています。7 月以降、<a href="https://docs.microsoft.com/ja-jp/azure/active-directory/fundamentals/whats-new#new-federated-apps-available-in-azure-ad-application-gallery---september-2021">シングルサインオン（SSO）をサポートする 101 の新しいアプリ</a> と、<a href="https://docs.microsoft.com/ja-jp/azure/active-directory/fundamentals/whats-new#new-provisioning-connectors-in-the-azure-ad-application-gallery---september-2021">23 の新しいプロビジョニング コネクタ</a> を追加しました。構築済みのこれらのアプリやコネクタを統合することにより、Azure AD で使用するアプリケーションの設定や管理、セキュリティ強化が容易になります。Azure AD アプリ ギャラリーに追加された注目のアプリは以下のとおりです。</p><p><img src="/blog/azure-active-directory/new-identity-partnerships-and-integrations-to-strengthen-your/SSOandProvisioningIntergrations.jpg"></p><h2 id="Pathlock-社との統合により職務分離チェックの準拠状態を確認"><a href="#Pathlock-社との統合により職務分離チェックの準拠状態を確認" class="headerlink" title="Pathlock 社との統合により職務分離チェックの準拠状態を確認"></a>Pathlock 社との統合により職務分離チェックの準拠状態を確認</h2><p>Azure AD の <a href="https://jpazureid.github.io/blog/azure-active-directory/ensure-compliance-using-separation-of-duties-checks-in-access-jp/">エンタイトルメント管理</a> において、職務の分離チェック機能がプレビューで利用できるようになり、ユーザーが過剰なアクセス権を保持しないように管理することができます。運営者やアクセス管理者は、ユーザーがすでに他のアクセス パッケージに割り当てられていたり、要求されたアクセスと互換性のない他のグループのメンバーであったりする場合、ユーザーが追加のアクセス パッケージを要求するのを防ぐことができます。</p><p>これまで SAP や Oracle、その他の財務アプリケーションやビジネス アプリケーションに厳しい規制要件を持つ企業は、IT ガバナンス、リスク管理、コンプライアンス (GRC) の専門ベンダーを活用して、これらのアプリケーション内でトランザクション レベルの制御やアクセスに関するレポートを行ってきました。当社は GRC パートナーやビジネス アプリケーションの開発者と共同で統合機能を開発しており、この機能により、金融アプリケーションやその他のビジネス クリティカルなアプリケーション、さらに Azure AD に統合されたアプリケーションの間においてアクセス制御を一貫して確認し、職務の分離チェックを実施することが可能になります。</p><p>近日、私たちはアクセス オーケストレーションのベンダーである <a href="https://pathlock.com/">Pathlock</a> 社と提携し、Azure AD のエンタイトルメント管理を同社のソリューションに統合しました。この統合により、Pathlock 社のお客様は、Azure AD のアクセス パッケージで詳細な職務の分離チェック機能を活用できるようになり、将来的には 140 以上の重要な <a href="https://pathlock.com/integrations/">ビジネス アプリケーション</a> に対してサーベンス オクスリー法 (SOX 法) などコンプライアンス要件に対応できるようになります。</p><p><img src="/blog/azure-active-directory/new-identity-partnerships-and-integrations-to-strengthen-your/BusinessApplications.jpg"></p><h2 id="SentinelOne-社-や-Illusive-Networks-社との統合により条件付きアクセスを利用したセキュリティを強化"><a href="#SentinelOne-社-や-Illusive-Networks-社との統合により条件付きアクセスを利用したセキュリティを強化" class="headerlink" title="SentinelOne 社 や Illusive Networks 社との統合により条件付きアクセスを利用したセキュリティを強化"></a>SentinelOne 社 や Illusive Networks 社との統合により条件付きアクセスを利用したセキュリティを強化</h2><p>多くの場合、情報や脅威インテリジェンス、リスクの共有は縦割りの組織構造により分断されており、お客様にとってセキュリティ上の課題となっています。だからこそ、私たちのソリューションが幅広く連携して動作できるよう、セキュリティ エコシステム全体でパートナー関係を確立することが重要だと考えています。</p><p>先日、当社は SentinelOne 社と提携し、Azure AD を <a href="https://www.sentinelone.com/platform/">SentinelOne Singularity Platform</a> に統合しました。SentinelOne をエンドポイントに直接展開し Azure AD と統合することで、両社のお客様はすべてのユーザー ID やエンドポイントに対して、継続的かつ自動的に信頼性を検証する仕組みを利用いただけます。また、SentinelOne でユーザーが何かしらの影響を受けたことが確認された場合、ユーザーの情報はリアルタイムに Azure AD と共有され、<a href="https://www.youtube.com/watch?v=7ihTzvnmkeI">組織の条件付きアクセス ポリシーが作動</a> します。</p><p><img src="/blog/azure-active-directory/new-identity-partnerships-and-integrations-to-strengthen-your/ConditionalAccess.png"></p><p>上記に加えて、マイクロソフトは Illusive Networks 社と提携し、<a href="https://illusive.com/illusives-integration-with-azure-active-directory-conditional-access/">Illusive 社の ID リスク管理ソリューション</a> に条件付きアクセス ポリシーを統合しました。Illusive Networks 社は、ID のリスクやポリシー違反を自動的に軽減することで、特権を持つ ID に対する攻撃を減らすことが可能です。これは特に機密性の高い認証情報にリスクが検出された場合に、条件付きアクセス ポリシーをより強力に適用することで実現します。</p><p><img src="/blog/azure-active-directory/new-identity-partnerships-and-integrations-to-strengthen-your/PrivlegedIdentities.png"></p><h2 id="未来に向けて検証済みの安全なデジタル-ID-を創る"><a href="#未来に向けて検証済みの安全なデジタル-ID-を創る" class="headerlink" title="未来に向けて検証済みの安全なデジタル ID を創る"></a>未来に向けて検証済みの安全なデジタル ID を創る</h2><p>当社は ID コミュニティのリーダーと協力して、<a href="https://www.microsoft.com/ja-jp/security/business/identity-access-management/verifiable-credentials">検証された情報や資格情報が安全で標準化された方法でやり取り</a> されることを可能にし、<a href="https://www.microsoft.com/security/blog/2021/10/06/microsofts-5-guiding-principles-for-decentralized-identities/">プライバシー、セキュリティ、公正さ、個人のコントロールの原則</a> に沿ったテクノロジーによって、すべての人が自分自身の ID を所有および管理できるよう取り組んでいます。</p><p>先日、当社は <a href="https://www.clearme.com/">CLEAR</a> とのコラボレーションを発表しました。これにより、CLEAR の利用者は、プライバシーとセキュリティを維持しながら、デジタル ID をより多くの場所で活用できるようになります。この Azure AD との統合により、ユーザーは Authenticator アプリを通じて、CLEAR によって検証されたデジタル資格情報にアクセスできるようになります。この資格情報には、健康状態、ワクチン接種記録、年齢確認、支払い方法などが含まれますが、これらに限定されるものではありません。</p><h2 id="IDEMIA-mID-によるサインインとサインアップの効率化"><a href="#IDEMIA-mID-によるサインインとサインアップの効率化" class="headerlink" title="IDEMIA mID によるサインインとサインアップの効率化"></a>IDEMIA mID によるサインインとサインアップの効率化</h2><p>現在プレビュー中の機能で、Azure AD B2C のお客様は、IDEMIA mID ソリューションでモバイル運転免許証の <a href="https://docs.microsoft.com/ja-jp/azure/active-directory-b2c/partner-idemia?pivots=b2c-custom-policy">サインイン / サインアップ</a> が可能となります。IDEMIA 社の <a href="https://www.idemia.com/mobile-id">Mobile ID</a> により、市民は政府発行の信頼されたデジタル ID を利用できるようになり、自撮り写真の照合や自分で選択した PIN、TouchID/FaceID を活用することで、ID を検証できるようになります。Mobile ID を用いると、市民が各取引に必要な情報のみを共有でき、自分の ID をコントロール可能となります。</p><p><img src="/blog/azure-active-directory/new-identity-partnerships-and-integrations-to-strengthen-your/IDEMIA.gif"></p><h2 id="新しい-FIPS-認定済みの-FIDO2-セキュリティ-キー"><a href="#新しい-FIPS-認定済みの-FIDO2-セキュリティ-キー" class="headerlink" title="新しい FIPS 認定済みの FIDO2 セキュリティ キー"></a>新しい FIPS 認定済みの FIDO2 セキュリティ キー</h2><p>2021 年 5 月に発表された <a href="https://www.federalregister.gov/documents/2021/05/17/2021-10460/improving-the-nations-cybersecurity">大統領令</a> 以来、弊社は Yubico 社や FEITIAN 社などの FIDO2 セキュリティ キーのトップ ベンダーと協力して、両ベンダーのソリューションとして FIPS 140-2 認定を完了し、これらのセキュリティ キーが Windows 11 や Azure AD と互換性があることを確認してきました。新しい認定済みのキーは、以下のとおりです。</p><table><thead><tr><th>製品画像</th><th>解説</th></tr></thead><tbody><tr><td><img src="/blog/azure-active-directory/new-identity-partnerships-and-integrations-to-strengthen-your/FEITAN.png"></td><td><strong>FEITIAN バイオメトリック FIDO セキュリティ キー</strong>: FEITIAN 社は現在、<a href="https://www.ftsafe.com/article/792.html">バイオメトリック</a> FIPS 140-2 認定済みの FIDO2 セキュリティ キーを提供しており、FIPS 140-2 レベル 2 を達成しています。</td></tr><tr><td><img src="/blog/azure-active-directory/new-identity-partnerships-and-integrations-to-strengthen-your/Yibico.png"></td><td><strong>Yubico 5 シリーズ</strong>: Yubico 社は、<a href="https://www.yubico.com/products/yubikey-fips/">YubiKey 5</a> シリーズで FIPS 140-2 の検証を完了しました。FIPS 140-2 検証により、政府機関や規制産業は、新しい NIST SP800-63B ガイダンスの最高レベルである <a href="https://docs.microsoft.com/ja-jp/azure/active-directory/standards/nist-authenticator-assurance-level-3">認証保証レベル 3 (AAL3)</a> の要件を満たすことができます。</td></tr></tbody></table><h2 id="ゼロ-トラスト-ガイダンス-センターで次の統合を始めましょう"><a href="#ゼロ-トラスト-ガイダンス-センターで次の統合を始めましょう" class="headerlink" title="ゼロ トラスト ガイダンス センターで次の統合を始めましょう"></a>ゼロ トラスト ガイダンス センターで次の統合を始めましょう</h2><p>マイクロソフトのセキュリティ製品と統合したゼロ トラスト対応ソリューションの開発に関心のあるパートナー様のために <a href="https://docs.microsoft.com/ja-jp/security/zero-trust/integrate/overview">ゼロ トラスト リソース センター</a> に新しいテクノロジー パートナー統合セクションを追加しました。新しいテクノロジー パートナー統合セクションでは、複数のゼロ トラストの技術分野に渡り、パートナーの皆様が統合の機会について学ぶことが可能です。Azure AD や Azure AD B2C と統合するゼロ トラスト対応ソリューションの構築方法や、ソリューションを活用できる ID 管理のシナリオについては、以下の動画でご紹介しております。</p><p>【動画】 <a href="https://youtu.be/2QY-aDFvnO8">Microsoft Azure Active Directory: Zero Trust partner integrations</a></p><p>セキュリティ エコシステム全体のパートナーシップに感謝申し上げるとともに、今後のさらなる統合の機会に期待しております。ご意見がございましたら、Twitter の <a href="https://twitter.com/Sue_Bohn">@Sue_Bohn</a> までコメントをお寄せください。</p><p>Sue Bohn<br>Vice President of Program Management<br>Microsoft Identity Division<br>Twitter: <a href="https://twitter.com/Sue_Bohn">@Sue_Bohn</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは、Azure Identity サポート チームの 村上 です。&lt;/p&gt;
&lt;p&gt;本記事は、2021 年 11 月 3 日に米国の Azure Active Directory Identity Blog で公開された &lt;a href=&quot;https://techco</summary>
      
    
    
    
    
    <category term="Azure AD" scheme="https://jpazureid.github.io/blog/tags/Azure-AD/"/>
    
    <category term="US Identity Blog" scheme="https://jpazureid.github.io/blog/tags/US-Identity-Blog/"/>
    
  </entry>
  
  <entry>
    <title>Microsoft Authenticator アプリ - アイコンを刷新し企業アカウントをより簡単に追加および管理できるようになりました。</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory/microsoft-authenticator-app/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory/microsoft-authenticator-app/</id>
    <published>2021-11-13T00:00:00.000Z</published>
    <updated>2022-01-31T04:07:17.495Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Azure Identity サポート チームの中井です。</p><p>本記事は、2021 年 11 月 4 日に米国の Azure Active Directory Identity Blog で公開された <a href="https://techcommunity.microsoft.com/t5/azure-active-directory-identity/microsoft-authenticator-app-easier-ways-to-add-or-manage/ba-p/2464408">Microsoft Authenticator app – easier ways to add or manage enterprise accounts, and a cool new icon</a> を意訳したものになります。ご不明点等ございましたらサポート チームまでお問い合わせください。</p><hr><p>皆さん、こんにちは。</p><p>本日は、<a href="https://www.microsoft.com/ja-jp/security/mobile-authenticator-app?cmp=zgcv4w_jfocsi">Microsoft Authenticator アプリ</a> にいくつかの素晴らしいアップデートを行い、企業 (会社または学校のアカウント) アカウントにおけるユーザー体験が向上されたことをお伝えします。内容は以下の通りです。</p><ul><li>アプリ内でのアカウント管理</li><li>企業アカウントのためのアカウント追加機能の改善</li><li>より先進的な印象を与える新しいアイコンへの変更</li></ul><h2 id="アプリ内でのアカウント管理"><a href="#アプリ内でのアカウント管理" class="headerlink" title="アプリ内でのアカウント管理"></a>アプリ内でのアカウント管理</h2><p>今年の初めに、Microsoft Authenticator で個人の Microsoft アカウントを直接管理できる機能を <a href="https://techcommunity.microsoft.com/t5/azure-active-directory-identity/update-to-the-microsoft-authenticator-app-now-rolling-out/ba-p/1169863">発表</a> しました。それ以来、企業のお客様から、会社や学校のアカウントでも Authenticator で同じ機能を利用したいというご意見をいただいていました。本日、Azure AD アカウントでも同じ機能を利用できるようになりました。ここでは、設定を管理する 3 つの方法をご紹介します。</p><p><strong>(1) パスワードの変更</strong>  </p><p>Microsoft Authenticator で仕事や学校のアカウントをタップし、新しい「パスワードの変更」オプションをクリックすると、アプリ内からすぐにアカウントのパスワードを変更することができます。</p><p><img src="/blog/azure-active-directory/microsoft-authenticator-app/fig1.png"></p><p><strong>(2) セキュリティ情報の更新</strong>  </p><p>職場や学校のアカウントの認証方法を、Microsoft Authenticator 内で管理することもできるようになりました。Authenticator でアカウントをタップし、「セキュリティ情報の更新」をクリックください。モバイル用の <a href="https://mysignins.microsoft.com/security-info">セキュリティ情報ページ</a> が表示され、認証方法を管理することができます。</p><p>セキュリティ情報ページの詳細については、こちらのブログをご覧ください: <a href="https://techcommunity.microsoft.com/t5/azure-active-directory-identity/combined-mfa-and-password-reset-registration-is-now-generally/ba-p/1257355">Combined MFA and password reset registration is now generally available</a></p><p><img src="/blog/azure-active-directory/microsoft-authenticator-app/fig2.png"></p><p><strong>(3) 最近のアクティビティの確認</strong>  </p><p>職場や学校のアカウントのサインイン履歴を Microsoft Authenticator からすぐに確認できるようになり、異常なアクティビティを報告できるようになりました。サインインの履歴を確認するには、Authenticator でアカウントをタップし、「最近のアクティビティを確認する」 をクリックします。</p><p>予期せぬサインインを報告する方法について詳しくは、こちらをご覧ください:<br><a href="https://techcommunity.microsoft.com/t5/azure-active-directory-identity/end-users-can-now-report-this-wasn-t-me-for-unusual-sign-in/ba-p/1257369">End users can now report “This wasn’t me” for unusual sign-in activity</a></p><p><img src="/blog/azure-active-directory/microsoft-authenticator-app/fig3.png"></p><h2 id="企業アカウントの追加方法の改善"><a href="#企業アカウントの追加方法の改善" class="headerlink" title="企業アカウントの追加方法の改善"></a>企業アカウントの追加方法の改善</h2><p>Microsoft Authenticator で会社や学校のアカウントを追加する際、ユーザーが常に PC の前など別の画面の前にいるとは限らないと思います (例えば、ユーザーがモバイル デバイスだけを持って移動している場合など)。<br>この度、Microsoft Authenticator に直接サインインすることで、別の画面から QR コードをスキャンすることなく、新しい職場や学校のアカウントを追加することができるようになりました。これにより、企業ユーザー向けの Microsoft Authenticator のセットアップが大幅に簡略化されます。詳細についてはこちらもご覧ください: <a href="https://support.microsoft.com/ja-jp/account-billing/%E3%82%A2%E3%83%97%E3%83%AA%E3%81%AB%E4%BB%95%E4%BA%8B%E7%94%A8%E3%81%BE%E3%81%9F%E3%81%AF%E5%AD%A6%E6%A0%A1%E3%82%A2%E3%82%AB%E3%82%A6%E3%83%B3%E3%83%88%E3%82%92microsoft-authenticator%E3%81%99%E3%82%8B-43a73ab5-b4e8-446d-9e54-2a4cb8e4e93c#sign-in-with-your-credentials">アプリに仕事用または学校アカウントをMicrosoft Authenticatorする</a></p><p>Microsoft Authenticator にサインインすることで、セットアップを実施する流れは以下の通りです。</p><ol><li>アカウントの追加ボタン（iOS では右上の「＋」、Android では「＋アカウントの追加」）をタップします。</li><li>「職場または学校のアカウント」をタップします。</li><li>「サインイン」をタップし、認証情報を入力しサインインします。</li></ol><p>必要な手順を経ることで、Authenticator が管理者のポリシーに従って設定されます。</p><p><img src="/blog/azure-active-directory/microsoft-authenticator-app/fig4.png"></p><h2 id="アイコンをより先進的なデザインに変更"><a href="#アイコンをより先進的なデザインに変更" class="headerlink" title="アイコンをより先進的なデザインに変更"></a>アイコンをより先進的なデザインに変更</h2><p>最後に、Microsoft Authenticator アプリケーションのアイコンがアップデートされたことをお知らせいたします。新しいアイコンは先進的かつ、Microsoft の幅広いデザイン言語に準拠しています。下図に示すように、新しいアイコンは既存のお客様にもなじみ深いものと思います。この変更により、Microsoft Authenticator に関する既存の挙動が変更されることはありません。なお、このデザインの変更は、2021 年 11 月以降、複数のプラットフォームで段階的に適用される予定です。</p><p><img src="/blog/azure-active-directory/microsoft-authenticator-app/fig5.png"></p><p>これらの新しいアップデートをお楽しみいただければ幸いです。また、お客様からのご意見やご要望もお待ちしております。以下のコメント欄または <a href="https://feedback.azure.com/d365community/forum/22920db1-ad25-ec11-b6e6-000d3a4f0789">Azure AD フィードバックフォーラム</a> でご意見をお聞かせください。</p><p>Alex Simons (<a href="https://twitter.com/Alex_A_Simons">@Alex_A_Simons</a>)<br>Corporate VP of Program Management<br>Microsoft Identity Division</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは、Azure Identity サポート チームの中井です。&lt;/p&gt;
&lt;p&gt;本記事は、2021 年 11 月 4 日に米国の Azure Active Directory Identity Blog で公開された &lt;a href=&quot;https://techcomm</summary>
      
    
    
    
    
    <category term="Azure AD" scheme="https://jpazureid.github.io/blog/tags/Azure-AD/"/>
    
    <category term="US Identity Blog" scheme="https://jpazureid.github.io/blog/tags/US-Identity-Blog/"/>
    
  </entry>
  
  <entry>
    <title>Ignite における ID 関連の発表まとめ - Azure AD の技術革新による障害耐性の強化</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory/identity-at-ignite-strengthen-resilience-with-identity/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory/identity-at-ignite-strengthen-resilience-with-identity/</id>
    <published>2021-11-07T00:00:00.000Z</published>
    <updated>2022-01-31T04:07:17.451Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Azure Identity サポート チームの 高田 です。</p><p>本記事は、2021 年 11 月 2 日に米国の Azure Active Directory Identity Blog で公開された <a href="https://techcommunity.microsoft.com/t5/azure-active-directory-identity/identity-at-ignite-strengthen-resilience-with-identity/ba-p/2747271">Identity at Ignite: Strengthen resilience with identity innovations in Azure AD</a> を意訳したものになります。</p><hr><p>脅威や攻撃が拡大し続ける中でハイブリッドな業務を実現するには、障害や攻撃からの復旧に多方面から取り組むことが必要です。どれほどサイバー セキュリティを強固にしても、セキュリティに起因する問題や危機的状況、あるいはビジネスの急激な成長など良い意味での課題を含め、様々な混乱は発生するものであり、組織の運営を継続しながら可能な限り迅速に状況を回復するため、それらあらゆる問題を抑え込んでいく必要があります。</p><p>当社は、お客様のパートナーとして、お客様の組織が安全かつ生産性を維持できるよう Azure AD への投資を行っています。今週の Microsoft Ignite での私のセッションでは、基盤となるプラットフォームの機能やセキュリティ、マルチ クラウドなど、これら多岐にわたる投資内容についてお話ししました。我々は、より耐障害性の高い ID サービス、特定が困難な攻撃も検知して対応するツール、デジタル資産全体のセキュリティ態勢を強化するシステムなどを構築しています。</p><h2 id="より耐障害性の高い-ID-サービス"><a href="#より耐障害性の高い-ID-サービス" class="headerlink" title="より耐障害性の高い ID サービス"></a>より耐障害性の高い ID サービス</h2><p>マイクロソフトは Azure AD がお客様の組織にとっていかに重要であるかを理解しております。結局のところ、ユーザーがサインインできなければ、何のサービスも利用できなくなってしまいます。お客様の信頼を継続して得ていく必要があると考え、8 つの基本原則に基づいてサービスの信頼性を高める投資を継続しています。</p><p><img src="/blog/azure-active-directory/identity-at-ignite-strengthen-resilience-with-identity/ReliabilityPrinciples.png"></p><p><a href="https://techcommunity.microsoft.com/t5/azure-active-directory-identity/99-99-uptime-for-azure-active-directory/ba-p/1999628">99.99% の SLA コミットメント</a> を確実に実現するため、独自の技術革新を進めています。例えば、Azure AD サービス全体に <strong>セル ベースのアーキテクチャ</strong> を採用しました。これは、サービスの一部で予期せぬ障害が発生した場合、その障害を一部にとどめ、サービスの他の部分に影響を与えないようにするためです。現在、Azure AD は 107 のセルに分割されています。最大規模のセルであっても、ユーザー全体の最大 1.7% しか利用していないため、障害が発生しても大多数のお客様には影響がないようにしています。</p><p>また、<strong>バックアップ認証サービス</strong> にも投資しています。これは、プライマリの認証システムがダウンした場合でも、セッションを維持するためのセカンダリ システムです。このシステムもマイクロソフトのクラウドで稼働していますが、プライマリの Azure AD サービスとは完全に分離されています。停電時の発電機のような役割を果たし、アクティブなセッションを引き継ぐことで、ユーザーがアプリにアクセスする際に従来と変わりのないユーザー体験を提供します。また、セキュリティ設定やアクセスの準拠状態も維持されますので、例えば条件付きアクセス ポリシーの適用やロールの変更に基づくアクセス可否の制御なども可能です。このバックアップ サービスは、現在 Exchange と SharePoint のワークロード、およびすべてのネイティブ デスクトップ アプリとモバイル アプリに対して有効です。本年末までには、すべてのウェブ アプリケーションにも対応する予定です。</p><p><strong>発表内容</strong> </p><ul><li>2021 年末までに Web アプリケーションのワークロードをサポートする Azure AD バックアップ認証サービスを提供予定</li></ul><h2 id="特定が困難な攻撃を検知して対応するツール"><a href="#特定が困難な攻撃を検知して対応するツール" class="headerlink" title="特定が困難な攻撃を検知して対応するツール"></a>特定が困難な攻撃を検知して対応するツール</h2><p>ID に対する攻撃は激化しています。実際、ID は新たなサイバー セキュリティの戦場となっており、攻撃の防止と検知のためのツールがこれまで以上に重要になっています。</p><p>攻撃を防止するため、マイクロソフトの <a href="https://www.microsoft.com/ja-jp/security/business/zero-trust">Zero Trust</a> アーキテクチャの中核をなすアクセス ポリシー エンジンである Azure AD <a href="https://www.microsoft.com/ja-jp/security/business/identity-access-management/identity-compromise">条件付きアクセス</a> にいくつかの機能強化を行っています。</p><ul><li>新しい <strong>条件付きアクセスの概要ダッシュボード</strong> では、組織のサインイン パターンの分析に基づいて、ポリシーを強化するヒントを提供します。また、Azure AD のセキュリティのベスト プラクティスに基づいて作成された <strong>テンプレート</strong> を利用して、追加の保護機能を迅速に導入することもできます。ダッシュボードと <a href="https://aka.ms/CATemplates/">テンプレート</a> は、共に現在パブリック プレビューです。</li><li><strong>アプリケーションとデバイスに対する条件付きアクセス フィルター</strong> を用いて、ポリシーの対象をよりきめ細かく設定し、特定のニーズに合わせてポリシーを改良することが可能です。このフィルターは、新しいアプリケーションやデバイスに動的に適用され、例えば、Intune のポリシーに準拠しているか、ハイブリッド ドメイン参加済みか、セキュア アクセス ワークステーションとして定義されているデバイスのいずれかでのみ、機密性の高いアプリケーションへのアクセスを許可するといったポリシーを構築することができます。<a href="https://docs.microsoft.com/ja-jp/azure/active-directory/conditional-access/concept-condition-filters-for-devices">デバイス用のフィルター</a> は現在一般提供済みとなっており、アプリ用のフィルターは年内にパブリック プレビューが開始される予定です。</li><li>人間以外の ID (アプリやサービスのワークロード ID) も、アクセス権限の付与が進むにつれ、悪意のある攻撃者から注目されるようになってきています。今月末にパブリックプレビューが開始される <strong>ワークロード ID 用の条件付きアクセス</strong> を使用して、これらの種類の ID を対象としたポリシーを設計することが可能となります。</li><li><strong>継続的なアクセス評価</strong> は、条件付きアクセスを個々のセッションに拡張し、新たなリスクが発生した場合に、ほぼリアルタイムでポリシーを適用する仕組みです。<a href="https://docs.microsoft.com/ja-jp/azure/active-directory/conditional-access/concept-continuous-access-evaluation">この機能</a> は年内に一般公開される予定です。</li></ul><p><img src="/blog/azure-active-directory/identity-at-ignite-strengthen-resilience-with-identity/ConditionalAccess.png"></p><p>強力な攻撃防止機能があっても、ゼロ トラストのアプローチでは常に侵害が起こることを想定します。Azure AD では、<a href="https://www.microsoft.com/ja-jp/security/business/identity-access-management/identity-compromise">Identity Protection</a> がリアルタイムでインテリジェントなリスク評価を行い、脅威や攻撃を検知して修復します。今回、Identity Protection を強化し、新機能を追加しました。これらの機能は一般提供済みとなっています。</p><ul><li><a href="https://docs.microsoft.com/ja-jp/azure/active-directory/identity-protection/concept-identity-protection-risks#sign-in-risk">新しいプロアクティブな検知機能</a> を追加することで、<strong>異常なトークンやセッション クッキーに対する見慣れないサインイン プロパティの検知</strong> など、一般的な攻撃手法と新たな攻撃手法の両方に対応します。</li><li>Identity Protection は、環境全体のユーザーおよびアクセス アクティビティを継続的に分析することで、リスクの特定や弱点の強化に利用できるデータを生成します。<strong>Identity Protection の診断設定</strong> では、選択した SIEM にワンクリックでリスク データをエクスポートしたり、データ保持期間を簡単にカスタマイズすることができます。Azure Monitor 上に構築された <strong>新しい Identity Protection リスク分析ワークブック</strong> は、リスク データと対応策の有効性を可視化するのに役立ちます。</li></ul><p> <img src="/blog/azure-active-directory/identity-at-ignite-strengthen-resilience-with-identity/HeatmapOfRiskDetections.png"></p><p>耐障害性を維持するということは、破壊的な状況に直面したときも、従業員や社外のチーム メンバーと連携できる対応力を維持することでもあります。Azure AD は、Microsoft Teams での安全なコラボレーション体験をサポートします。</p><p><strong>発表内容</strong></p><ul><li>Identity Protection のトークン盗難検出機能の一般提供開始</li><li>Identity Protection の診断設定の一般提供開始</li><li>Identity Protection のリスク分析ワークブックの一般提供開始</li><li>条件付きアクセスのデバイス フィルターの一般提供開始</li><li>2021 年末までに継続的アクセス評価の一般提供開始</li><li>条件付きアクセスのが用ダッシュボードのプレビュー開始</li><li>条件付きアクセステンプレートのプレビュー開始</li><li>2021 年 11 月後半でのワークロード ID 用の条件付きアクセスのプレビュー開始</li><li>2021 年末までに条件付きアクセスのアプリケーション フィルターのプレビュー開始</li></ul><h2 id="デジタル資産全体のセキュリティ対策を強化するシステム"><a href="#デジタル資産全体のセキュリティ対策を強化するシステム" class="headerlink" title="デジタル資産全体のセキュリティ対策を強化するシステム"></a>デジタル資産全体のセキュリティ対策を強化するシステム</h2><p>攻撃がより巧妙になっているだけでなく、ハイブリッドやマルチ クラウド戦略の採用、人やワークロードの ID も爆発的に増加しており、お客様環境も同様の対応を迫られていると思います。クラウド プロバイダーはアクセス管理の仕組みに異なるオペレーション モデルを採用しているため、複雑な環境でゼロトラストの原則である最小特権の考え方を実現することは困難です。</p><p>ほとんどの企業は自社のビジネスに最も適したアプリケーションやソリューションを選択できるように、マルチ クラウド戦略を採用しています。私たちは、マイクロソフトのクラウドで実行される部分だけでなく、お客様の環境全体を確実に保護したいと考えています。そのために、今年の初めに <a href="https://blogs.microsoft.com/blog/2021/07/21/microsoft-acquires-cloudknox-security-to-offer-unified-privileged-access-and-cloud-entitlement-management/">CloudKnox 社を買収</a> しました。CloudKnox 社のテクノロジーは、企業がすべての主要なクラウド上のすべての ID とリソースについて、アクセス許可の確認、リスクの評価と修正、異常なアクティビティの検出を支援します。これらの強力な機能を Azure AD や幅広いマイクロソフトのエコシステムと統合していく中で、来年にかけてより多くの情報を皆様に提供してまいります。</p><p>また、ID のプロビジョニング、ライフサイクル管理、ワークフローの自動化、権限管理、および分析を含む統合マルチクラウド ソリューションの提供に取り組んでいます。この戦略を推進するために、Azure AD Identity Governance を拡張し、<strong>オンプレミスやプライベート クラウドでホストされているアプリへもプロビジョニング</strong> を可能としました。個別のガバナンス システムを持つアプリ (<a href="https://docs.microsoft.com/en-us/azure/active-directory/app-provisioning/on-premises-application-provisioning-architecture">基礎となる SQL データベースやサードパーティの LDAP ディレクトリに依存しているアプリなど</a>) へのプロビジョニングも提供します。これにより、すべてのアプリケーションに対して一貫したアクセスのプロビジョニングが可能になります。</p><p>また、Azure Logic Apps をベースにした <strong>カスタム エンタイトルメント ワークフロー</strong> により、ユーザーのプロビジョニングやライフサイクルの管理を容易に行えるようにしました。Azure Logic Apps は、Salesforce や Office 365、SQL など、何百もの既存システムとのコネクターを備えており、独自にコーディングする必要はありません。</p><p><strong>発表内容</strong></p><ul><li>Azure AD からのオンプレミス アプリケーション プロビジョニングのプレビュー開始</li><li>Azure AD エンタイトルメント管理のカスタム割り当てワークフローのプレビュー開始</li></ul><h2 id="認証基盤の近代化"><a href="#認証基盤の近代化" class="headerlink" title="認証基盤の近代化"></a>認証基盤の近代化</h2><p>お客様がクラウドならではのセキュリティの進化を享受できるように、我々のチームでは、お客様がより多くのワークロードをクラウドに移行できるようにする新しい方法の検討を進めています。例えば、アプリの認証の流れをオンプレミスの Active Directory Federation Services (AD FS) から Azure AD に移行する際には、<strong>新しいクレーム、クレーム変換、トークン フィルタリング、SAML 構成設定の追加</strong> などのプレビューを利用して、<a href="https://docs.microsoft.com/en-us/azure/active-directory/hybrid/how-to-connect-fed-group-claims">移行を加速</a> することができます。</p><p>また、特にワークロード ID に関連するシークレットをよりセキュアにする取り組みを採用することも検討ください。多くのアプリケーション開発者が、未だにアプリの登録にパスワード シークレットを使用しており、その中には有効期間が長いものもあります。<a href="https://docs.microsoft.com/en-us/graph/api/resources/applicationauthenticationmethodpolicy?view=graph-rest-beta">Microsoft Graph で利用できる</a> <strong>新しい認証方法ポリシー</strong> のプレビューでは、パスワード シークレットの使用をブロックしたり、その有効期限を制限したり、ワークロード ID のキーの資格情報に最大の有効期限を設定したりすることができます。また、<strong>GitHub Actions による Azure AD ワークロード ID 連携のサポート</strong> もプレビューとなりました。これにより、アプリケーション開発者は、アプリケーションを Azure にデプロイする際に、GitHubのリポジトリに Azure AD の認証情報を作成および保存する必要がなくなります。 </p><p><strong>発表内容</strong></p><ul><li>Azure AD での新しいクレーム、クレーム変換、トークン フィルタリング、SAML 構成設定のプレビュー開始</li><li>アプリとワークロード ID の新しい認証方法ポリシーのプレビュー開始</li><li>ワークロード ID 連携による GitHub との統合のプレビュー開始</li></ul><p>これらの機能をオンデマンドでご覧になりたい方は、<a href="https://myignite.microsoft.com/home">Microsoft Ignite</a> に無料で登録し、太平洋時間の本日午後 1 時 30 分から始まる私のセッション <a href="https://myignite.microsoft.com/sessions/fe5951da-9fa5-4e09-b529-007fff7a2add?source=sessions">Strengthen resilience with identity innovations in Azure AD</a> をご覧ください。また、今後数週間、<a href="https://aka.ms/identityblog">このブログ</a> でこれらの機能の詳細の案内や、お客様の組織に導入するためのベストプラクティスをご紹介していきますのでご注目ください。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは、Azure Identity サポート チームの 高田 です。&lt;/p&gt;
&lt;p&gt;本記事は、2021 年 11 月 2 日に米国の Azure Active Directory Identity Blog で公開された &lt;a href=&quot;https://techco</summary>
      
    
    
    
    
    <category term="Azure AD" scheme="https://jpazureid.github.io/blog/tags/Azure-AD/"/>
    
    <category term="US Identity Blog" scheme="https://jpazureid.github.io/blog/tags/US-Identity-Blog/"/>
    
  </entry>
  
</feed>
